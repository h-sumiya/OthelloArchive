var hn=Object.defineProperty;var gn=(t,e,n)=>e in t?hn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>(gn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function N(){}function _t(t,e){for(const n in e)t[n]=e[n];return t}function mn(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Yt(t){return t()}function Ct(){return Object.create(null)}function He(t){t.forEach(Yt)}function en(t){return typeof t=="function"}function P(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pn(t){return Object.keys(t).length===0}function vn(t,e,n,l){if(t){const s=tn(t,e,n,l);return t[0](s)}}function tn(t,e,n,l){return t[1]&&l?_t(n.ctx.slice(),t[1](l(e))):n.ctx}function bn(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],r=Math.max(e.dirty.length,s.length);for(let o=0;o<r;o+=1)i[o]=e.dirty[o]|s[o];return i}return e.dirty|s}return e.dirty}function wn(t,e,n,l,s,i){if(s){const r=tn(e,n,l,i);t.p(r,s)}}function yn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function f(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function ze(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function _e(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function S(t){return document.createTextNode(t)}function b(){return S(" ")}function xe(){return S("")}function Ae(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function kn(t){return Array.from(t.childNodes)}function F(t,e){e=""+e,t.data!==e&&(t.data=e)}function ce(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let st;function An(){if(st===void 0){st=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{st=!0}}return st}function nn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=m("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const s=An();let i;return s?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=Ae(window,"message",r=>{r.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{i=Ae(l.contentWindow,"resize",e),e()}),f(t,l),()=>{(s||i&&l.contentWindow)&&i(),w(l)}}function ne(t,e,n){t.classList.toggle(e,!!n)}function Cn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}class $n{constructor(e=!1){ke(this,"is_svg",!1);ke(this,"e");ke(this,"n");ke(this,"t");ke(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=_e(n.nodeName):this.e=m(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)y(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(w)}}let et;function de(t){et=t}function ht(){if(!et)throw new Error("Function called outside component initialization");return et}function gt(t){ht().$$.on_mount.push(t)}function rt(){const t=ht();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=Cn(e,n,{cancelable:l});return s.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}function Mn(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const Oe=[],he=[];let Ue=[];const at=[],In=Promise.resolve();let ft=!1;function Ln(){ft||(ft=!0,In.then(mt))}function tt(t){Ue.push(t)}function je(t){at.push(t)}const ct=new Set;let Re=0;function mt(){if(Re!==0)return;const t=et;do{try{for(;Re<Oe.length;){const e=Oe[Re];Re++,de(e),Bn(e.$$)}}catch(e){throw Oe.length=0,Re=0,e}for(de(null),Oe.length=0,Re=0;he.length;)he.pop()();for(let e=0;e<Ue.length;e+=1){const n=Ue[e];ct.has(n)||(ct.add(n),n())}Ue.length=0}while(Oe.length);for(;at.length;)at.pop()();ft=!1,ct.clear(),de(t)}function Bn(t){if(t.fragment!==null){t.update(),He(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(tt)}}function qn(t){const e=[],n=[];Ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ue=e}const it=new Set;let Ee;function ge(){Ee={r:0,c:[],p:Ee}}function me(){Ee.r||He(Ee.c),Ee=Ee.p}function k(t,e){t&&t.i&&(it.delete(t),t.i(e))}function A(t,e,n,l){if(t&&t.o){if(it.has(t))return;it.add(t),Ee.c.push(()=>{it.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function En(t,e){const n=e.token={};function l(s,i,r,o){if(e.token!==n)return;e.resolved=o;let c=e.ctx;r!==void 0&&(c=c.slice(),c[r]=o);const a=s&&(e.current=s)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((_,p)=>{p!==i&&_&&(ge(),A(_,1,1,()=>{e.blocks[p]===_&&(e.blocks[p]=null)}),me())}):e.block.d(1),a.c(),k(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[i]=a),u&&mt()}if(mn(t)){const s=ht();if(t.then(i=>{de(s),l(e.then,1,e.value,i),de(null)},i=>{if(de(s),l(e.catch,2,e.error,i),de(null),!e.hasCatch)throw i}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function Q(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ln(t,e){const n={},l={},s={$$scope:1};let i=t.length;for(;i--;){const r=t[i],o=e[i];if(o){for(const c in r)c in o||(l[c]=1);for(const c in o)s[c]||(n[c]=o[c],s[c]=1);t[i]=o}else for(const c in r)s[c]=1}for(const r in l)r in n||(n[r]=void 0);return n}function sn(t){return typeof t=="object"&&t!==null?t:{}}function Te(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function z(t){t&&t.c()}function j(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),tt(()=>{const i=t.$$.on_mount.map(Yt).filter(en);t.$$.on_destroy?t.$$.on_destroy.push(...i):He(i),t.$$.on_mount=[]}),s.forEach(tt)}function T(t,e){const n=t.$$;n.fragment!==null&&(qn(n.after_update),He(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function jn(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),Ln(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,l,s,i,r,o=[-1]){const c=et;de(t);const a=t.$$={fragment:null,ctx:[],props:i,update:N,not_equal:s,bound:Ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ct(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};r&&r(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(_,p,...g)=>{const C=g.length?g[0]:p;return a.ctx&&s(a.ctx[_],a.ctx[_]=C)&&(!a.skip_bound&&a.bound[_]&&a.bound[_](C),u&&jn(t,_)),p}):[],a.update(),u=!0,He(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const _=kn(e.target);a.fragment&&a.fragment.l(_),_.forEach(w)}else a.fragment&&a.fragment.c();e.intro&&k(t.$$.fragment),j(t,e.target,e.anchor),mt()}de(c)}class O{constructor(){ke(this,"$$");ke(this,"$$set")}$destroy(){T(this,1),this.$destroy=N}$on(e,n){if(!en(n))return N;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!pn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Tn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Tn);function zn(){return new Worker(""+new URL("ai.worker-2e41913d.js",import.meta.url).href)}let H,Ke=null;function De(){return(Ke===null||Ke.byteLength===0)&&(Ke=new Int32Array(H.memory.buffer)),Ke}const rn=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&rn.decode();let Ze=null;function Sn(){return(Ze===null||Ze.byteLength===0)&&(Ze=new Uint8Array(H.memory.buffer)),Ze}function Nn(t,e){return t=t>>>0,rn.decode(Sn().subarray(t,t+e))}function Wn(){let t,e;try{const s=H.__wbindgen_add_to_stack_pointer(-16);H.version(s);var n=De()[s/4+0],l=De()[s/4+1];return t=n,e=l,Nn(n,l)}finally{H.__wbindgen_add_to_stack_pointer(16),H.__wbindgen_free(t,e,1)}}let Qe=null;function cn(){return(Qe===null||Qe.byteLength===0)&&(Qe=new Uint32Array(H.memory.buffer)),Qe}let pt=0;function on(t,e){const n=e(t.length*4,4)>>>0;return cn().set(t,n/4),pt=t.length,n}function an(t,e){return t=t>>>0,cn().subarray(t/4,t/4+e)}function ut(t,e){try{const i=H.__wbindgen_add_to_stack_pointer(-16),r=on(t,H.__wbindgen_malloc),o=pt;H.legal_moves(i,r,o,e);var n=De()[i/4+0],l=De()[i/4+1],s=an(n,l).slice();return H.__wbindgen_free(n,l*4),s}finally{H.__wbindgen_add_to_stack_pointer(16)}}function $t(t,e,n,l){try{const o=H.__wbindgen_add_to_stack_pointer(-16),c=on(t,H.__wbindgen_malloc),a=pt;H.put(o,c,a,e,n,l);var s=De()[o/4+0],i=De()[o/4+1],r=an(s,i).slice();return H.__wbindgen_free(s,i*4),r}finally{H.__wbindgen_add_to_stack_pointer(16)}}async function Pn(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(l){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",l);else throw l}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Rn(){const t={};return t.wbg={},t}function On(t,e){return H=t.exports,fn.__wbindgen_wasm_module=e,Ke=null,Qe=null,Ze=null,H}async function fn(t){if(H!==void 0)return H;typeof t>"u"&&(t=new URL(""+new URL("webai_bg-9ee3a7ad.wasm",import.meta.url).href,self.location));const e=Rn();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:l}=await Pn(await t,e);return On(n,l)}const dt=new zn;let Un=new Promise((t,e)=>{dt.onmessage=n=>{t()}});const Mt=1e3;async function Dn(t,e){const n=Date.now();dt.postMessage({data:t,color:e});const l=await new Promise((i,r)=>{dt.onmessage=o=>{i(o.data)}}),s=Date.now()-n;return console.log(`ai elapsed: ${s}ms`),s<Mt&&await new Promise((i,r)=>{setTimeout(()=>{i()},Mt-s)}),l}let It=!1;async function Hn(){if(It)return;await fn();const t=Wn();console.log(`othello ai web edition(${t}) is successfully loaded.`),It=!0}function xn(t){let e,n;return{c(){e=new $n(!1),n=xe(),e.a=n},m(l,s){e.m(t[0],l,s),y(l,n,s)},p(l,[s]){s&1&&e.p(l[0])},i:N,o:N,d(l){l&&(w(n),e.d())}}}function Fn(t,e,n){let l=".&nbsp;&nbsp;";return gt(()=>{let s=0,i=setInterval(()=>{s++,s>3&&(s=0),n(0,l=".".repeat(s)+"&nbsp;".repeat(3-s))},300);return()=>{clearInterval(i)}}),[l]}class un extends O{constructor(e){super(),R(this,e,Fn,xn,P,{})}}function Vn(t){let e,n,l,s,i,r,o;return r=new un({}),{c(){e=m("div"),n=m("div"),l=b(),s=m("div"),i=S(t[0]),z(r.$$.fragment),d(n,"class","spinner svelte-7ywxxi"),d(e,"class","loading svelte-7ywxxi")},m(c,a){y(c,e,a),f(e,n),f(e,l),f(e,s),f(s,i),j(r,s,null),o=!0},p(c,[a]){(!o||a&1)&&F(i,c[0])},i(c){o||(k(r.$$.fragment,c),o=!0)},o(c){A(r.$$.fragment,c),o=!1},d(c){c&&w(e),T(r)}}}function Jn(t,e,n){let{text:l}=e;return t.$$set=s=>{"text"in s&&n(0,l=s.text)},[l]}class Gn extends O{constructor(e){super(),R(this,e,Jn,Vn,P,{text:0})}}function Kn(t){let e,n,l,s,i,r,o,c,a;return{c(){e=m("label"),n=m("input"),l=b(),s=m("span"),i=b(),r=m("span"),o=S(t[1]),d(n,"type","checkbox"),d(n,"class","input svelte-15e3hob"),d(s,"class","checkmark svelte-15e3hob"),d(r,"class","span"),d(e,"class","label svelte-15e3hob")},m(u,_){y(u,e,_),f(e,n),n.checked=t[0],f(e,l),f(e,s),f(e,i),f(e,r),f(r,o),c||(a=Ae(n,"change",t[2]),c=!0)},p(u,[_]){_&1&&(n.checked=u[0]),_&2&&F(o,u[1])},i:N,o:N,d(u){u&&w(e),c=!1,a()}}}function Zn(t,e,n){let{value:l=!1}=e,{text:s}=e;function i(){l=this.checked,n(0,l)}return t.$$set=r=>{"value"in r&&n(0,l=r.value),"text"in r&&n(1,s=r.text)},[l,s,i]}class Lt extends O{constructor(e){super(),R(this,e,Zn,Kn,P,{value:0,text:1})}}function Bt(t){let e;return{c(){e=m("div"),d(e,"class","cover svelte-ubliqf")},m(n,l){y(n,e,l)},d(n){n&&w(e)}}}function Qn(t){let e,n,l,s,i,r,o,c,a=t[1]&&Bt();return{c(){e=m("div"),n=m("div"),n.textContent="黒",l=b(),s=m("div"),s.textContent="白",i=b(),a&&a.c(),d(n,"class","black svelte-ubliqf"),d(n,"role","button"),d(n,"tabindex","0"),ne(n,"select",t[0]==1),d(s,"class","white svelte-ubliqf"),d(s,"role","button"),d(s,"tabindex","0"),ne(s,"select",t[0]==2),d(e,"class",r="wrap w_"+t[0]+" svelte-ubliqf")},m(u,_){y(u,e,_),f(e,n),f(e,l),f(e,s),f(e,i),a&&a.m(e,null),o||(c=[Ae(n,"click",t[2]),Ae(s,"click",t[3])],o=!0)},p(u,[_]){_&1&&ne(n,"select",u[0]==1),_&1&&ne(s,"select",u[0]==2),u[1]?a||(a=Bt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),_&1&&r!==(r="wrap w_"+u[0]+" svelte-ubliqf")&&d(e,"class",r)},i:N,o:N,d(u){u&&w(e),a&&a.d(),o=!1,He(c)}}}function Xn(t,e,n){let{select:l=1}=e,{disable:s=!1}=e;const i=()=>n(0,l=1),r=()=>n(0,l=2);return t.$$set=o=>{"select"in o&&n(0,l=o.select),"disable"in o&&n(1,s=o.disable)},[l,s,i,r]}class Yn extends O{constructor(e){super(),R(this,e,Xn,Qn,P,{select:0,disable:1})}}function qt(t){let e;return{c(){e=m("div"),d(e,"class","cover svelte-1sioc2l")},m(n,l){y(n,e,l)},d(n){n&&w(e)}}}function el(t){let e,n,l,s,i,r,o,c,a,u,_,p,g,C,v,L,q,B,h,M,G,U,x,I=!t[3]&&qt();function V(E){t[6](E)}let pe={text:"プレイヤー"};t[2]!==void 0&&(pe.value=t[2]),u=new Lt({props:pe}),he.push(()=>Te(u,"value",V));function le(E){t[7](E)}let oe={text:"AI"};t[1]!==void 0&&(oe.value=t[1]),g=new Lt({props:oe}),he.push(()=>Te(g,"value",le));function ae(E){t[8](E)}let K={disable:!t[3]};return t[0]!==void 0&&(K.select=t[0]),h=new Yn({props:K}),he.push(()=>Te(h,"select",ae)),{c(){e=m("div"),n=m("div"),l=m("div"),s=m("span"),s.textContent="はじめから",i=b(),I&&I.c(),r=b(),o=m("div"),o.textContent="候補を表示",c=b(),a=m("div"),z(u.$$.fragment),p=b(),z(g.$$.fragment),v=b(),L=m("div"),L.textContent="色を選択する(ゲームがリセットされます。)",q=b(),B=m("div"),z(h.$$.fragment),d(l,"class","reset svelte-1sioc2l"),d(l,"role","button"),d(l,"tabindex","0"),d(n,"class","r_wrap svelte-1sioc2l"),d(o,"class","title svelte-1sioc2l"),d(a,"class","inner svelte-1sioc2l"),d(L,"class","title svelte-1sioc2l"),d(B,"class","inner svelte-1sioc2l"),d(e,"class","panel svelte-1sioc2l")},m(E,X){y(E,e,X),f(e,n),f(n,l),f(l,s),f(l,i),I&&I.m(l,null),f(e,r),f(e,o),f(e,c),f(e,a),j(u,a,null),f(a,p),j(g,a,null),f(e,v),f(e,L),f(e,q),f(e,B),j(h,B,null),G=!0,U||(x=Ae(l,"click",t[5]),U=!0)},p(E,[X]){E[3]?I&&(I.d(1),I=null):I||(I=qt(),I.c(),I.m(l,null));const Y={};!_&&X&4&&(_=!0,Y.value=E[2],je(()=>_=!1)),u.$set(Y);const ee={};!C&&X&2&&(C=!0,ee.value=E[1],je(()=>C=!1)),g.$set(ee);const se={};X&8&&(se.disable=!E[3]),!M&&X&1&&(M=!0,se.select=E[0],je(()=>M=!1)),h.$set(se)},i(E){G||(k(u.$$.fragment,E),k(g.$$.fragment,E),k(h.$$.fragment,E),G=!0)},o(E){A(u.$$.fragment,E),A(g.$$.fragment,E),A(h.$$.fragment,E),G=!1},d(E){E&&w(e),I&&I.d(),T(u),T(g),T(h),U=!1,x()}}}function tl(t,e,n){let l=rt();function s(g){l("reset",{p:g})}let{display_ai_legal:i=!0}=e,{display_player_legal:r=!0}=e,{player:o=1}=e,{free:c=!0}=e;const a=()=>{c&&s(o)};function u(g){r=g,n(2,r)}function _(g){i=g,n(1,i)}function p(g){o=g,n(0,o)}return t.$$set=g=>{"display_ai_legal"in g&&n(1,i=g.display_ai_legal),"display_player_legal"in g&&n(2,r=g.display_player_legal),"player"in g&&n(0,o=g.player),"free"in g&&n(3,c=g.free)},t.$$.update=()=>{t.$$.dirty&1&&s(o)},[o,i,r,c,s,a,u,_,p]}class nl extends O{constructor(e){super(),R(this,e,tl,el,P,{display_ai_legal:1,display_player_legal:2,player:0,free:3})}}function ll(t){let e,n;return{c(){e=m("div"),d(e,"class",n="cell "+t[0]+" "+t[2]+" suggest "+t[3]+" svelte-1v0lz0w"),ne(e,"latest",t[1])},m(l,s){y(l,e,s)},p(l,s){s&13&&n!==(n="cell "+l[0]+" "+l[2]+" suggest "+l[3]+" svelte-1v0lz0w")&&d(e,"class",n),s&15&&ne(e,"latest",l[1])},d(l){l&&w(e)}}}function sl(t){let e,n,l,s;return{c(){e=m("div"),d(e,"class",n="cell "+t[0]+" clickable suggest "+t[3]+" svelte-1v0lz0w"),d(e,"role","button"),d(e,"tabindex","0"),ne(e,"latest",t[1])},m(i,r){y(i,e,r),l||(s=Ae(e,"click",t[5]),l=!0)},p(i,r){r&9&&n!==(n="cell "+i[0]+" clickable suggest "+i[3]+" svelte-1v0lz0w")&&d(e,"class",n),r&11&&ne(e,"latest",i[1])},d(i){i&&w(e),l=!1,s()}}}function il(t){let e;function n(i,r){return i[4]?sl:ll}let l=n(t),s=l(t);return{c(){s.c(),e=xe()},m(i,r){s.m(i,r),y(i,e,r)},p(i,[r]){l===(l=n(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},i:N,o:N,d(i){i&&w(e),s.d(i)}}}function rl(t,e,n){let l,s,{index:i}=e,r=rt();function o(){l&&r("click",{index:i})}let{type:c="null"}=e,{latest:a=!1}=e,{suggest:u=!1}=e,{input:_=!1}=e,{suggest_type:p="null"}=e,g="",C=null;return t.$$set=v=>{"index"in v&&n(6,i=v.index),"type"in v&&n(0,c=v.type),"latest"in v&&n(1,a=v.latest),"suggest"in v&&n(7,u=v.suggest),"input"in v&&n(8,_=v.input),"suggest_type"in v&&n(9,p=v.suggest_type)},t.$$.update=()=>{t.$$.dirty&1025&&(c=="black"?(C=="white"?n(2,g="white_to_black"):n(2,g=""),n(10,C="black")):c=="white"?(C=="black"?n(2,g="black_to_white"):n(2,g=""),n(10,C="white")):(n(2,g=""),n(10,C=null))),t.$$.dirty&768&&n(4,l=p!="null"&&_),t.$$.dirty&640&&n(3,s=u?`s_${p}`:"s_null")},[c,a,g,s,l,o,i,u,_,p,C]}class cl extends O{constructor(e){super(),R(this,e,rl,il,P,{index:6,type:0,latest:1,suggest:7,input:8,suggest_type:9})}}function Et(t,e,n){const l=t.slice();return l[9]=e[n],l[11]=n,l}function jt(t,e,n){const l=t.slice();return l[9]=e[n],l[13]=n,l}function Tt(t){let e,n;const l=[t[3][t[11]*8+t[13]],{suggest:t[1]},{input:t[0]},{index:t[11]*8+t[13]}];let s={};for(let i=0;i<l.length;i+=1)s=_t(s,l[i]);return e=new cl({props:s}),e.$on("click",t[7]),{c(){z(e.$$.fragment)},m(i,r){j(e,i,r),n=!0},p(i,r){const o=r&11?ln(l,[r&8&&sn(i[3][i[11]*8+i[13]]),r&2&&{suggest:i[1]},r&1&&{input:i[0]},l[3]]):{};e.$set(o)},i(i){n||(k(e.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),n=!1},d(i){T(e,i)}}}function zt(t){let e,n,l,s=Q({length:8}),i=[];for(let o=0;o<s.length;o+=1)i[o]=Tt(jt(t,s,o));const r=o=>A(i[o],1,1,()=>{i[o]=null});return{c(){e=m("div");for(let o=0;o<i.length;o+=1)i[o].c();n=b(),d(e,"class","row svelte-1xwiqwo")},m(o,c){y(o,e,c);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);f(e,n),l=!0},p(o,c){if(c&11){s=Q({length:8});let a;for(a=0;a<s.length;a+=1){const u=jt(o,s,a);i[a]?(i[a].p(u,c),k(i[a],1)):(i[a]=Tt(u),i[a].c(),k(i[a],1),i[a].m(e,n))}for(ge(),a=s.length;a<i.length;a+=1)r(a);me()}},i(o){if(!l){for(let c=0;c<s.length;c+=1)k(i[c]);l=!0}},o(o){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)A(i[c]);l=!1},d(o){o&&w(e),ze(i,o)}}}function ol(t){let e,n=`${t[2]}px`,l=`${t[2]}px`,s,i=Q({length:8}),r=[];for(let c=0;c<i.length;c+=1)r[c]=zt(Et(t,i,c));const o=c=>A(r[c],1,1,()=>{r[c]=null});return{c(){e=m("div");for(let c=0;c<r.length;c+=1)r[c].c();d(e,"class","board svelte-1xwiqwo"),ce(e,"width",n),ce(e,"height",l)},m(c,a){y(c,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);s=!0},p(c,[a]){if(a&11){i=Q({length:8});let u;for(u=0;u<i.length;u+=1){const _=Et(c,i,u);r[u]?(r[u].p(_,a),k(r[u],1)):(r[u]=zt(_),r[u].c(),k(r[u],1),r[u].m(e,null))}for(ge(),u=i.length;u<r.length;u+=1)o(u);me()}a&4&&n!==(n=`${c[2]}px`)&&ce(e,"width",n),a&4&&l!==(l=`${c[2]}px`)&&ce(e,"height",l)},i(c){if(!s){for(let a=0;a<i.length;a+=1)k(r[a]);s=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)A(r[a]);s=!1},d(c){c&&w(e),ze(r,c)}}}function al(t,e,n){let{data:l}=e,{player:s=1}=e,{latest:i=null}=e,{input:r=!1}=e,{suggest:o=!0}=e,{size:c=500}=e,a;const u={type:"null",latest:!1,suggest_type:"null"};function _(p){Mn.call(this,t,p)}return t.$$set=p=>{"data"in p&&n(4,l=p.data),"player"in p&&n(5,s=p.player),"latest"in p&&n(6,i=p.latest),"input"in p&&n(0,r=p.input),"suggest"in p&&n(1,o=p.suggest),"size"in p&&n(2,c=p.size)},t.$$.update=()=>{if(t.$$.dirty&112){let p=[],g=ut(l,s);for(let C=0;C<l.length;C++)if(l[C]==0)if(g.includes(C)){let v=s==1?"black":"white";p.push({...u,type:"null",latest:!1,suggest_type:v})}else p.push({...u,type:"null"});else l[C]==1?p.push({...u,type:"black"}):l[C]==2&&p.push({...u,type:"white"});i!=null&&(p[i].latest=!0),n(3,a=p)}},[r,o,c,a,l,s,i,_]}class fl extends O{constructor(e){super(),R(this,e,al,ol,P,{data:4,player:5,latest:6,input:0,suggest:1,size:2})}}function St(t){let e,n;return e=new un({}),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function ul(t){let e,n=t[4][0]+"",l,s,i=t[0][0]+"",r,o,c=t[4][1]+"",a,u,_=t[0][1]+"",p,g,C,v,L=`${t[1]}px`,q,B=t[2]&&St();return{c(){e=m("div"),l=S(n),s=S(": "),r=S(i),o=S(" | "),a=S(c),u=S(": "),p=S(_),g=S(" | "),C=S(t[3]),v=b(),B&&B.c(),d(e,"class","info svelte-1nn9nw6"),ce(e,"width",L)},m(h,M){y(h,e,M),f(e,l),f(e,s),f(e,r),f(e,o),f(e,a),f(e,u),f(e,p),f(e,g),f(e,C),f(e,v),B&&B.m(e,null),q=!0},p(h,[M]){(!q||M&16)&&n!==(n=h[4][0]+"")&&F(l,n),(!q||M&1)&&i!==(i=h[0][0]+"")&&F(r,i),(!q||M&16)&&c!==(c=h[4][1]+"")&&F(a,c),(!q||M&1)&&_!==(_=h[0][1]+"")&&F(p,_),(!q||M&8)&&F(C,h[3]),h[2]?B?M&4&&k(B,1):(B=St(),B.c(),k(B,1),B.m(e,null)):B&&(ge(),A(B,1,1,()=>{B=null}),me()),M&2&&L!==(L=`${h[1]}px`)&&ce(e,"width",L)},i(h){q||(k(B),q=!0)},o(h){A(B),q=!1},d(h){h&&w(e),B&&B.d()}}}function dl(t,e,n){let l,s,i,{counts:r=[2,2]}=e,{player:o=1}=e,{next:c=1}=e,{finish:a=!1}=e,{size:u=500}=e;return t.$$set=_=>{"counts"in _&&n(0,r=_.counts),"player"in _&&n(5,o=_.player),"next"in _&&n(6,c=_.next),"finish"in _&&n(7,a=_.finish),"size"in _&&n(1,u=_.size)},t.$$.update=()=>{t.$$.dirty&32&&n(4,l=o==1?["黒(あなた)","白(AI)"]:["黒(AI)","白(あなた)"]),t.$$.dirty&225&&n(3,s=a?r[o-1]>r[2-o]?"あなたの勝ち":r[o-1]<r[2-o]?"AIの勝ち":"引き分け":c==o?"あなたの番です。":"AIが考えています"),t.$$.dirty&224&&n(2,i=c!==o&&!a)},[r,u,i,s,l,o,c,a]}class _l extends O{constructor(e){super(),R(this,e,dl,ul,P,{counts:0,player:5,next:6,finish:7,size:1})}}const Nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function hl(t){let e,n,l,s,i,r,o,c,a,u,_,p;const g=[t[9],{data:t[1]},{latest:t[6]},{size:t[5]}];let C={};for(let h=0;h<g.length;h+=1)C=_t(C,g[h]);l=new fl({props:C}),l.$on("click",t[10]),i=new _l({props:{next:t[4],counts:t[8],size:t[5],finish:t[7],player:t[0]}});function v(h){t[13](h)}function L(h){t[14](h)}function q(h){t[15](h)}let B={free:t[0]==t[4]};return t[2].suggest!==void 0&&(B.display_ai_legal=t[2].suggest),t[3].suggest!==void 0&&(B.display_player_legal=t[3].suggest),t[0]!==void 0&&(B.player=t[0]),c=new nl({props:B}),he.push(()=>Te(c,"display_ai_legal",v)),he.push(()=>Te(c,"display_player_legal",L)),he.push(()=>Te(c,"player",q)),c.$on("reset",t[11]),{c(){e=m("div"),n=m("div"),z(l.$$.fragment),s=b(),z(i.$$.fragment),o=b(),z(c.$$.fragment),d(n,"class","main svelte-cpu8vx"),tt(()=>t[12].call(n)),d(e,"class","game svelte-cpu8vx")},m(h,M){y(h,e,M),f(e,n),j(l,n,null),f(n,s),j(i,n,null),r=nn(n,t[12].bind(n)),f(e,o),j(c,e,null),p=!0},p(h,[M]){const G=M&610?ln(g,[M&512&&sn(h[9]),M&2&&{data:h[1]},M&64&&{latest:h[6]},M&32&&{size:h[5]}]):{};l.$set(G);const U={};M&16&&(U.next=h[4]),M&256&&(U.counts=h[8]),M&32&&(U.size=h[5]),M&128&&(U.finish=h[7]),M&1&&(U.player=h[0]),i.$set(U);const x={};M&17&&(x.free=h[0]==h[4]),!a&&M&4&&(a=!0,x.display_ai_legal=h[2].suggest,je(()=>a=!1)),!u&&M&8&&(u=!0,x.display_player_legal=h[3].suggest,je(()=>u=!1)),!_&&M&1&&(_=!0,x.player=h[0],je(()=>_=!1)),c.$set(x)},i(h){p||(k(l.$$.fragment,h),k(i.$$.fragment,h),k(c.$$.fragment,h),p=!0)},o(h){A(l.$$.fragment,h),A(i.$$.fragment,h),A(c.$$.fragment,h),p=!1},d(h){h&&w(e),T(l),T(i),r(),T(c)}}}function gl(t,e,n){let l,s,i=500,r=1,o=null,c=!1,a=Nt;function u(){n(1,a=Nt),n(6,o=null),n(7,c=!1),n(4,g=1)}let _={suggest:!0,input:!1,player:3-r},p={suggest:!0,input:!0,player:r},g=r;async function C(){let I=await Dn(a,g);n(6,o=I),n(1,a=$t(a,I,g,3-g))}function v(){return ut(a,g).length!=0}function L(){return ut(a,3-g).length!=0}let q=!1;async function B(I){if(q)return;q=!0;let V=I.detail.index;for(n(6,o=V),n(1,a=$t(a,V,g,3-g)),n(4,g=3-g);v()&&(await C(),!L()););n(4,g=3-g),!v()&&!L()&&n(7,c=!0),q=!1}async function h(){u(),r==2&&(await C(),n(4,g=3-g))}function M(){i=this.clientWidth,n(5,i)}function G(I){t.$$.not_equal(_.suggest,I)&&(_.suggest=I,n(2,_),n(0,r))}function U(I){t.$$.not_equal(p.suggest,I)&&(p.suggest=I,n(3,p),n(0,r))}function x(I){r=I,n(0,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(3,p.player=r,p),t.$$.dirty&1&&n(2,_.player=3-r,_),t.$$.dirty&29&&n(9,l=g==r?p:_),t.$$.dirty&2&&n(8,s=[a.filter(I=>I==1).length,a.filter(I=>I==2).length])},[r,a,_,p,g,i,o,c,s,l,B,h,M,G,U,x]}class ml extends O{constructor(e){super(),R(this,e,gl,hl,P,{})}}function pl(t){let e,n;const l=t[1].default,s=vn(l,t,t[0],null);return{c(){e=m("div"),s&&s.c(),d(e,"class","title svelte-w8pvte")},m(i,r){y(i,e,r),s&&s.m(e,null),n=!0},p(i,[r]){s&&s.p&&(!n||r&1)&&wn(s,l,i,i[0],n?bn(l,i[0],r,null):yn(i[0]),null)},i(i){n||(k(s,i),n=!0)},o(i){A(s,i),n=!1},d(i){i&&w(e),s&&s.d(i)}}}function vl(t,e,n){let{$$slots:l={},$$scope:s}=e;return t.$$set=i=>{"$$scope"in i&&n(0,s=i.$$scope)},[s,l]}class ot extends O{constructor(e){super(),R(this,e,vl,pl,P,{})}}function Wt(t,e,n){const l=t.slice();return l[4]=e[n],l[6]=n,l}function Pt(t){let e,n=t[4]+"",l,s,i,r;function o(){return t[3](t[6])}return{c(){e=m("div"),l=S(n),s=b(),d(e,"class","item svelte-rvcr6i"),d(e,"role","button"),d(e,"tabindex","0"),ne(e,"select",t[6]==t[0])},m(c,a){y(c,e,a),f(e,l),f(e,s),i||(r=Ae(e,"click",o),i=!0)},p(c,a){t=c,a&2&&n!==(n=t[4]+"")&&F(l,n),a&1&&ne(e,"select",t[6]==t[0])},d(c){c&&w(e),i=!1,r()}}}function bl(t){let e,n=Q(t[1]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Pt(Wt(t,n,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();d(e,"class","wrap svelte-rvcr6i")},m(s,i){y(s,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,[i]){if(i&7){n=Q(s[1]);let r;for(r=0;r<n.length;r+=1){const o=Wt(s,n,r);l[r]?l[r].p(o,i):(l[r]=Pt(o),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:N,o:N,d(s){s&&w(e),ze(l,s)}}}function wl(t,e,n){let{select:l=null}=e,{values:s=[]}=e;function i(o){o==l?n(0,l=null):n(0,l=o)}const r=o=>{i(o)};return t.$$set=o=>{"select"in o&&n(0,l=o.select),"values"in o&&n(1,s=o.values)},[l,s,i,r]}class yl extends O{constructor(e){super(),R(this,e,wl,bl,P,{select:0,values:1})}}function Rt(t){let e,n,l;return{c(){e=_e("path"),d(e,"d",n="M"+(t[6]*t[0]+t[5])+",100 L"+t[4]+",0 "),d(e,"stroke",l=t[2]===1?"red":"blue"),d(e,"stroke-width","3")},m(s,i){y(s,e,i)},p(s,i){i&113&&n!==(n="M"+(s[6]*s[0]+s[5])+",100 L"+s[4]+",0 ")&&d(e,"d",n),i&4&&l!==(l=s[2]===1?"red":"blue")&&d(e,"stroke",l)},d(s){s&&w(e)}}}function Ot(t){let e=t[1],n,l=Ut(t);return{c(){l.c(),n=xe()},m(s,i){l.m(s,i),y(s,n,i)},p(s,i){i&2&&P(e,e=s[1])?(l.d(1),l=Ut(s),l.c(),l.m(n.parentNode,n)):l.p(s,i)},d(s){s&&w(n),l.d(s)}}}function Ut(t){let e,n,l,s,i,r,o;return{c(){e=_e("svg"),n=_e("path"),l=_e("animate"),d(l,"attributeName","d"),d(l,"dur","0.5s"),d(l,"from",s="M"+t[4]+",0 L"+t[4]+",0"),d(l,"to",i="M"+t[4]+",0 L"+(t[6]*t[1]+t[5])+",100"),d(l,"fill","freeze"),d(n,"d",r="M"+t[4]+",0 L"+(t[6]*t[1]+t[5])+",100"),d(n,"stroke","green"),d(n,"stroke-width","3"),d(n,"class","line svelte-yvqfrn"),d(e,"viewBox",o="0 0 "+t[3]+" 100"),d(e,"class","line svelte-yvqfrn")},m(c,a){y(c,e,a),f(e,n),f(n,l)},p(c,a){a&16&&s!==(s="M"+c[4]+",0 L"+c[4]+",0")&&d(l,"from",s),a&114&&i!==(i="M"+c[4]+",0 L"+(c[6]*c[1]+c[5])+",100")&&d(l,"to",i),a&114&&r!==(r="M"+c[4]+",0 L"+(c[6]*c[1]+c[5])+",100")&&d(n,"d",r),a&8&&o!==(o="0 0 "+c[3]+" 100")&&d(e,"viewBox",o)},d(c){c&&w(e)}}}function kl(t){let e,n,l,s,i,r,o=t[0]!==null&&Rt(t),c=t[1]!==null&&Ot(t);return{c(){e=m("div"),n=_e("svg"),l=_e("path"),o&&o.c(),i=b(),c&&c.c(),d(l,"d",t[7]),d(l,"stroke","black"),d(l,"stroke-width","1"),d(n,"viewBox",s="0 0 "+t[3]+" 100"),d(e,"class","svelte-yvqfrn"),tt(()=>t[9].call(e))},m(a,u){y(a,e,u),f(e,n),f(n,l),o&&o.m(n,null),f(e,i),c&&c.m(e,null),r=nn(e,t[9].bind(e))},p(a,[u]){u&128&&d(l,"d",a[7]),a[0]!==null?o?o.p(a,u):(o=Rt(a),o.c(),o.m(n,null)):o&&(o.d(1),o=null),u&8&&s!==(s="0 0 "+a[3]+" 100")&&d(n,"viewBox",s),a[1]!==null?c?c.p(a,u):(c=Ot(a),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:N,o:N,d(a){a&&w(e),o&&o.d(),c&&c.d(),r()}}}function Al(t,e,n){let l,s,i,r,{lines:o=2}=e,{select:c=null}=e,{check:a=null}=e,{mode:u=1}=e,_=100;function p(){_=this.clientWidth,n(3,_)}return t.$$set=g=>{"lines"in g&&n(8,o=g.lines),"select"in g&&n(0,c=g.select),"check"in g&&n(1,a=g.check),"mode"in g&&n(2,u=g.mode)},t.$$.update=()=>{if(t.$$.dirty&264&&n(6,l=_/o),t.$$.dirty&264&&n(5,s=_/o/2),t.$$.dirty&8&&n(4,i=_/2),t.$$.dirty&368){let g="";for(let C=0;C<o;C++)g+=`M${l*C+s},100 L${i},0 `;n(7,r=g)}},n(7,r=""),[c,a,u,_,i,s,l,r,o,p]}class Cl extends O{constructor(e){super(),R(this,e,Al,kl,P,{lines:8,select:0,check:1,mode:2})}}function $l(t){let e,n,l,s;return{c(){e=m("div"),n=m("div"),l=m("span"),s=S(t[0]),d(l,"class","svelte-ed4d3x"),d(n,"class","value svelte-ed4d3x"),d(e,"class","box svelte-ed4d3x")},m(i,r){y(i,e,r),f(e,n),f(n,l),f(l,s)},p(i,[r]){r&1&&F(s,i[0])},i:N,o:N,d(i){i&&w(e)}}}function Ml(t,e,n){let l=rt(),{start:s=!1}=e,i="",r=!1;return t.$$set=o=>{"start"in o&&n(1,s=o.start)},t.$$.update=()=>{t.$$.dirty&7&&s&&!r&&(n(2,r=!0),setTimeout(()=>{n(0,i=n(0,i=Math.floor(Math.random()*100-50))),l("value",{value:i})},500))},[i,s,r]}class Il extends O{constructor(e){super(),R(this,e,Ml,$l,P,{start:1})}}function Dt(t,e,n){const l=t.slice();return l[12]=e[n],l[14]=n,l}function Ht(t,e,n){const l=t.slice();return l[12]=e[n],l[14]=n,l}function Ll(t){let e,n,l=Q({length:t[0]}),s=[];for(let r=0;r<l.length;r+=1)s[r]=xt(Dt(t,l,r));const i=r=>A(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=xe()},m(r,o){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,o);y(r,e,o),n=!0},p(r,o){if(o&137){l=Q({length:r[0]});let c;for(c=0;c<l.length;c+=1){const a=Dt(r,l,c);s[c]?(s[c].p(a,o),k(s[c],1)):(s[c]=xt(a),s[c].c(),k(s[c],1),s[c].m(e.parentNode,e))}for(ge(),c=l.length;c<s.length;c+=1)i(c);me()}},i(r){if(!n){for(let o=0;o<l.length;o+=1)k(s[o]);n=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)A(s[o]);n=!1},d(r){r&&w(e),ze(s,r)}}}function Bl(t){let e,n,l=Q({length:t[0]}),s=[];for(let r=0;r<l.length;r+=1)s[r]=Ft(Ht(t,l,r));const i=r=>A(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=xe()},m(r,o){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,o);y(r,e,o),n=!0},p(r,o){if(o&143){l=Q({length:r[0]});let c;for(c=0;c<l.length;c+=1){const a=Ht(r,l,c);s[c]?(s[c].p(a,o),k(s[c],1)):(s[c]=Ft(a),s[c].c(),k(s[c],1),s[c].m(e.parentNode,e))}for(ge(),c=l.length;c<s.length;c+=1)i(c);me()}},i(r){if(!n){for(let o=0;o<l.length;o+=1)k(s[o]);n=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)A(s[o]);n=!1},d(r){r&&w(e),ze(s,r)}}}function xt(t){let e,n;function l(...s){return t[10](t[14],...s)}return e=new Il({props:{start:t[14]<=t[3]}}),e.$on("value",l),{c(){z(e.$$.fragment)},m(s,i){j(e,s,i),n=!0},p(s,i){t=s;const r={};i&8&&(r.start=t[14]<=t[3]),e.$set(r)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Ft(t){let e,n;function l(...s){return t[9](t[14],...s)}return e=new dn({props:{depth:t[1]-1,mode:t[2]*-1,start:t[14]<=t[3]}}),e.$on("value",l),{c(){z(e.$$.fragment)},m(s,i){j(e,s,i),n=!0},p(s,i){t=s;const r={};i&2&&(r.depth=t[1]-1),i&4&&(r.mode=t[2]*-1),i&8&&(r.start=t[14]<=t[3]),e.$set(r)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function ql(t){let e,n,l,s,i,r,o,c,a,u,_;r=new Cl({props:{lines:t[0],check:t[5],select:t[4],mode:t[2]}});const p=[Bl,Ll],g=[];function C(v,L){return v[1]!==0?0:1}return a=C(t),u=g[a]=p[a](t),{c(){e=m("div"),n=m("div"),l=m("span"),s=S(t[6]),i=b(),z(r.$$.fragment),o=b(),c=m("div"),u.c(),d(l,"class","svelte-170uqb6"),d(n,"class","value svelte-170uqb6"),d(c,"class","wraps svelte-170uqb6"),d(e,"class","wrap svelte-170uqb6"),ne(e,"view",t[1]===0&&t[3]>=0&&t[3]!==t[0])},m(v,L){y(v,e,L),f(e,n),f(n,l),f(l,s),f(e,i),j(r,e,null),f(e,o),f(e,c),g[a].m(c,null),_=!0},p(v,[L]){(!_||L&64)&&F(s,v[6]);const q={};L&1&&(q.lines=v[0]),L&32&&(q.check=v[5]),L&16&&(q.select=v[4]),L&4&&(q.mode=v[2]),r.$set(q);let B=a;a=C(v),a===B?g[a].p(v,L):(ge(),A(g[B],1,1,()=>{g[B]=null}),me(),u=g[a],u?u.p(v,L):(u=g[a]=p[a](v),u.c()),k(u,1),u.m(c,null)),(!_||L&11)&&ne(e,"view",v[1]===0&&v[3]>=0&&v[3]!==v[0])},i(v){_||(k(r.$$.fragment,v),k(u),_=!0)},o(v){A(r.$$.fragment,v),A(u),_=!1},d(v){v&&w(e),T(r),g[a].d()}}}function El(t,e,n){let{n:l=Math.floor(Math.random()*3)+1}=e,{depth:s=0}=e,{mode:i=1}=e,{start:r=!1}=e,o=rt(),c=-1,a=null,u=null,_="";function p(v,L){(_===""||v*i>_*i)&&(n(4,a=L),n(6,_=v)),n(3,c++,c),c<l?n(5,u=c):(n(5,u=null),o("value",{value:_}))}const g=(v,L)=>p(L.detail.value,v),C=(v,L)=>p(L.detail.value,v);return t.$$set=v=>{"n"in v&&n(0,l=v.n),"depth"in v&&n(1,s=v.depth),"mode"in v&&n(2,i=v.mode),"start"in v&&n(8,r=v.start)},t.$$.update=()=>{t.$$.dirty&256&&r&&setTimeout(()=>{n(3,c=0),n(5,u=0)},500)},[l,s,i,c,a,u,_,p,r,g,C]}class dn extends O{constructor(e){super(),R(this,e,El,ql,P,{n:0,depth:1,mode:2,start:8})}}function Vt(t){let e,n;return e=new dn({props:{depth:2,start:!0,n:Math.floor(Math.random()*2)+2}}),e.$on("value",t[1]),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},p:N,i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function jl(t){let e,n=t[0],l,s=Vt(t);return{c(){e=m("div"),s.c(),d(e,"class","wrap svelte-17wisx6")},m(i,r){y(i,e,r),s.m(e,null),l=!0},p(i,[r]){r&1&&P(n,n=i[0])?(ge(),A(s,1,1,N),me(),s=Vt(i),s.c(),k(s,1),s.m(e,null)):s.p(i,r)},i(i){l||(k(s),l=!0)},o(i){A(s),l=!1},d(i){i&&w(e),s.d(i)}}}function Tl(t,e,n){let l=0;function s(){setTimeout(()=>{n(0,l++,l)},5e3)}return[l,s]}class zl extends O{constructor(e){super(),R(this,e,Tl,jl,P,{})}}function Jt(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function Gt(t,e,n){const l=t.slice();return l[5]=e[n],l[9]=n,l}function Kt(t){let e,n;return{c(){e=m("div"),d(e,"class",n="cell cell_"+t[0][t[7]*t[1]+t[9]]+" svelte-1s0u75h")},m(l,s){y(l,e,s)},p(l,s){s&3&&n!==(n="cell cell_"+l[0][l[7]*l[1]+l[9]]+" svelte-1s0u75h")&&d(e,"class",n)},d(l){l&&w(e)}}}function Zt(t){let e,n,l=Q({length:t[1]}),s=[];for(let i=0;i<l.length;i+=1)s[i]=Kt(Gt(t,l,i));return{c(){e=m("div");for(let i=0;i<s.length;i+=1)s[i].c();n=b(),d(e,"class","row svelte-1s0u75h")},m(i,r){y(i,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);f(e,n)},p(i,r){if(r&3){l=Q({length:i[1]});let o;for(o=0;o<l.length;o+=1){const c=Gt(i,l,o);s[o]?s[o].p(c,r):(s[o]=Kt(c),s[o].c(),s[o].m(e,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(i){i&&w(e),ze(s,i)}}}function Sl(t){let e,n=Q({length:t[2]}),l=[];for(let s=0;s<n.length;s+=1)l[s]=Zt(Jt(t,n,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();d(e,"class","icon svelte-1s0u75h"),ce(e,"--ws",t[4]),ce(e,"--hs",t[3])},m(s,i){y(s,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,[i]){if(i&7){n=Q({length:s[2]});let r;for(r=0;r<n.length;r+=1){const o=Jt(s,n,r);l[r]?l[r].p(o,i):(l[r]=Zt(o),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}i&16&&ce(e,"--ws",s[4]),i&8&&ce(e,"--hs",s[3])},i:N,o:N,d(s){s&&w(e),ze(l,s)}}}function Nl(t,e,n){let l,s,{data:i}=e,{w:r=8}=e,{h:o=8}=e;return t.$$set=c=>{"data"in c&&n(0,i=c.data),"w"in c&&n(1,r=c.w),"h"in c&&n(2,o=c.h)},t.$$.update=()=>{t.$$.dirty&2&&n(4,l=r/8),t.$$.dirty&4&&n(3,s=o/8)},[i,r,o,s,l]}class Xe extends O{constructor(e){super(),R(this,e,Nl,Sl,P,{data:0,w:1,h:2})}}function Wl(t){let e,n,l;return{c(){e=_e("svg"),n=_e("path"),d(n,"d",l=t[1][t[0]]),d(n,"class","svelte-nuwpfa"),d(e,"viewBox","0 -960 960 960"),d(e,"class","svelte-nuwpfa")},m(s,i){y(s,e,i),f(e,n)},p(s,[i]){i&1&&l!==(l=s[1][s[0]])&&d(n,"d",l)},i:N,o:N,d(s){s&&w(e)}}}function Pl(t,e,n){let l={then:"m560-242-43-42 168-168H160v-60h525L516-681l43-42 241 241-240 240Z"},{name:s}=e;return t.$$set=i=>{"name"in i&&n(0,s=i.name)},[s,l]}class Ye extends O{constructor(e){super(),R(this,e,Pl,Wl,P,{name:0})}}function Rl(t){let e,n,l,s,i,r,o,c=t[1][t[0]].pos+"",a,u;return n=new Xe({props:{data:t[1][t[0]].data}}),i=new Ye({props:{name:"then"}}),{c(){e=m("div"),z(n.$$.fragment),l=b(),s=m("div"),z(i.$$.fragment),r=b(),o=m("div"),a=S(c),d(s,"class","then svelte-1empsdn"),d(o,"class","num svelte-1empsdn"),d(e,"class","book svelte-1empsdn")},m(_,p){y(_,e,p),j(n,e,null),f(e,l),f(e,s),j(i,s,null),f(e,r),f(e,o),f(o,a),u=!0},p(_,[p]){const g={};p&1&&(g.data=_[1][_[0]].data),n.$set(g),(!u||p&1)&&c!==(c=_[1][_[0]].pos+"")&&F(a,c)},i(_){u||(k(n.$$.fragment,_),k(i.$$.fragment,_),u=!0)},o(_){A(n.$$.fragment,_),A(i.$$.fragment,_),u=!1},d(_){_&&w(e),T(n),T(i)}}}function Ol(t,e,n){class l{constructor(o,c,a){this.data=[];for(let u=0;u<64;u++){let _=1n<<BigInt(u);o&_?this.data.push(1):c&_?this.data.push(2):this.data.push(0)}this.pos=a}}const s=[new l(0x00081820000000n,0x0010001e180000n,"f6"),new l(0x10302020200400n,0x04081c1c181800n,"d1"),new l(0x00381200000000n,0x00040c1c000000n,"b6"),new l(0x00221400000800n,0x0808083c3c3000n,"c2"),new l(0x0000002c0c0800n,0x00083e10000000n,"b6"),new l(0x00003008080000n,0x003c0c14240000n,"e3"),new l(0x00003800000000n,0x0000001e100000n,"d3"),new l(0x0028000c102000n,0x00043c10000000n,"f4"),new l(0x000018180c0000n,0x00382024000000n,"c5"),new l(0x003c7c38002000n,0x00010246fe1800n,"e1"),new l(0x0000060e0c2c20n,0x143c3830301010n,"d1"),new l(0x00000018180000n,0x00203c24040000n,"d6"),new l(0x00000810100000n,0x00203028000000n,"d3"),new l(0x00102074000400n,0x000e1c08380800n,"b5"),new l(0x000018181c0000n,0x00040406000000n,"b3"),new l(0x18002010000000n,0x20f85808000000n,"f8"),new l(0x04083c04040000n,0x00000038380000n,"g3"),new l(0x0008043a080000n,0x00003804060000n,"e6"),new l(0x081828000a0000n,0x0004143e302000n,"e2"),new l(0x0000682e0a0000n,0x003c1450341000n,"b6"),new l(0x002c0e0c040000n,0x10103030182800n,"g4"),new l(0x00080008000000n,0x00101c10000000n,"f4"),new l(0x0000181c040000n,0x00382020080000n,"e3"),new l(0x00040000040010n,0x00383838180804n,"f3"),new l(0x0000040c040000n,0x00181810000000n,"f6"),new l(0x00080020080000n,0x0010381c040000n,"b3"),new l(0x00201038102000n,0x000e0c060f0000n,"a4"),new l(0x00181818080000n,0x20202400100000n,"g6"),new l(0x101c1000700000n,0x20002e7c080000n,"f6"),new l(0x1010181c181000n,0x00002020200000n,"g4"),new l(0x00081c001c0000n,0x0004003e000000n,"b5"),new l(0x000010001c0000n,0x0000081c200000n,"d6")];let i=0;return gt(()=>{let r=setInterval(()=>{let o=Math.floor(Math.random()*s.length);for(;o==i;)o=Math.floor(Math.random()*s.length);n(0,i=o)},300);return()=>clearInterval(r)}),[i,s]}class Ul extends O{constructor(e){super(),R(this,e,Ol,Rl,P,{})}}function Dl(t){let e,n,l,s,i,r,o,c,a,u,_,p,g,C,v,L=t[0].rands[0]+"",q,B,h,M,G,U,x,I,V,pe,le=t[0].rands[1]+"",oe,ae,K,E,X,Y,ee,se,ve,fe,Ce=t[0].rands[2]+"",be,Se,J,Fe,ue=t[0].rands[0]+"",Ne,$e,Me=t[0].rands[1]+"",we,Ve,ie=t[0].rands[2]+"",We,Ie,Le=t[0].rands[0]+t[0].rands[1]+t[0].rands[2]+"",ye,Z;return n=new Xe({props:{data:t[0].data}}),i=new Ye({props:{name:"then"}}),a=new Xe({props:{data:t[0].cross()}}),p=new Ye({props:{name:"then"}}),M=new Xe({props:{data:t[0].corner(),w:4,h:4}}),x=new Ye({props:{name:"then"}}),E=new Xe({props:{data:t[0].edge(),w:1}}),ee=new Ye({props:{name:"then"}}),{c(){e=m("div"),z(n.$$.fragment),l=b(),s=m("div"),z(i.$$.fragment),r=b(),o=m("div"),c=m("div"),z(a.$$.fragment),u=b(),_=m("div"),z(p.$$.fragment),g=b(),C=m("div"),v=S("A:"),q=S(L),B=b(),h=m("div"),z(M.$$.fragment),G=b(),U=m("div"),z(x.$$.fragment),I=b(),V=m("div"),pe=S("B:"),oe=S(le),ae=b(),K=m("div"),z(E.$$.fragment),X=b(),Y=m("div"),z(ee.$$.fragment),se=b(),ve=m("div"),fe=S("C:"),be=S(Ce),Se=b(),J=m("div"),Fe=S("A("),Ne=S(ue),$e=S(") + B("),we=S(Me),Ve=S(") + C("),We=S(ie),Ie=S(") = SCORE:"),ye=S(Le),d(e,"class","src svelte-6mnjq4"),d(s,"class","flow flow_m svelte-6mnjq4"),d(_,"class","flow svelte-6mnjq4"),d(C,"class","rand svelte-6mnjq4"),d(c,"class","svelte-6mnjq4"),d(U,"class","flow svelte-6mnjq4"),d(V,"class","rand svelte-6mnjq4"),d(h,"class","svelte-6mnjq4"),d(Y,"class","flow svelte-6mnjq4"),d(ve,"class","rand svelte-6mnjq4"),d(K,"class","svelte-6mnjq4"),d(o,"class","parts svelte-6mnjq4"),d(J,"class","res svelte-6mnjq4")},m($,D){y($,e,D),j(n,e,null),y($,l,D),y($,s,D),j(i,s,null),y($,r,D),y($,o,D),f(o,c),j(a,c,null),f(c,u),f(c,_),j(p,_,null),f(c,g),f(c,C),f(C,v),f(C,q),f(o,B),f(o,h),j(M,h,null),f(h,G),f(h,U),j(x,U,null),f(h,I),f(h,V),f(V,pe),f(V,oe),f(o,ae),f(o,K),j(E,K,null),f(K,X),f(K,Y),j(ee,Y,null),f(K,se),f(K,ve),f(ve,fe),f(ve,be),y($,Se,D),y($,J,D),f(J,Fe),f(J,Ne),f(J,$e),f(J,we),f(J,Ve),f(J,We),f(J,Ie),f(J,ye),Z=!0},p($,[D]){const Be={};D&1&&(Be.data=$[0].data),n.$set(Be);const Je={};D&1&&(Je.data=$[0].cross()),a.$set(Je),(!Z||D&1)&&L!==(L=$[0].rands[0]+"")&&F(q,L);const qe={};D&1&&(qe.data=$[0].corner()),M.$set(qe),(!Z||D&1)&&le!==(le=$[0].rands[1]+"")&&F(oe,le);const Ge={};D&1&&(Ge.data=$[0].edge()),E.$set(Ge),(!Z||D&1)&&Ce!==(Ce=$[0].rands[2]+"")&&F(be,Ce),(!Z||D&1)&&ue!==(ue=$[0].rands[0]+"")&&F(Ne,ue),(!Z||D&1)&&Me!==(Me=$[0].rands[1]+"")&&F(we,Me),(!Z||D&1)&&ie!==(ie=$[0].rands[2]+"")&&F(We,ie),(!Z||D&1)&&Le!==(Le=$[0].rands[0]+$[0].rands[1]+$[0].rands[2]+"")&&F(ye,Le)},i($){Z||(k(n.$$.fragment,$),k(i.$$.fragment,$),k(a.$$.fragment,$),k(p.$$.fragment,$),k(M.$$.fragment,$),k(x.$$.fragment,$),k(E.$$.fragment,$),k(ee.$$.fragment,$),Z=!0)},o($){A(n.$$.fragment,$),A(i.$$.fragment,$),A(a.$$.fragment,$),A(p.$$.fragment,$),A(M.$$.fragment,$),A(x.$$.fragment,$),A(E.$$.fragment,$),A(ee.$$.fragment,$),Z=!1},d($){$&&(w(e),w(l),w(s),w(r),w(o),w(Se),w(J)),T(n),T(i),T(a),T(p),T(M),T(x),T(E),T(ee)}}}function Qt(){let t=[];for(let e=0;e<64;e++)t.push(Math.floor(Math.random()*3));return t}function Hl(t,e,n){const l=[0,1,2,3,8,9,10,16,17,24],s=[0,1,2,3,4,5,6,8,9,12],i=[0,9,18,27,36,45,54,63];class r{constructor(a){this.data=a,this.rands=[];for(let u=0;u<3;u++)this.rands.push(Math.floor(Math.random()*64-32))}edge(){return this.data.slice(0,8)}corner(){let a=Array(16).fill(3);for(let u=0;u<l.length;u++)a[s[u]]=this.data[l[u]];return a}cross(){let a=Array(64).fill(3);for(let u=0;u<i.length;u++)a[i[u]]=this.data[i[u]];return a}}let o=new r(Qt());return gt(()=>{let c=setInterval(()=>{n(0,o=new r(Qt()))},1e3);return()=>clearInterval(c)}),[o]}class xl extends O{constructor(e){super(),R(this,e,Hl,Dl,P,{})}}function Fl(t){let e;return{c(){e=S("このサイトについて")},m(n,l){y(n,e,l)},d(n){n&&w(e)}}}function Vl(t){let e;return{c(){e=S("サイトの仕組み")},m(n,l){y(n,e,l)},d(n){n&&w(e)}}}function Jl(t){let e,n,l,s,i,r,o;return{c(){e=m("p"),e.textContent="Svelteとは独自の記法で書いたSvelteファイルをCSS、JavaScriptにコンパイルするツールです。",n=b(),l=m("p"),l.textContent="WebフレームワークとしてはReact、Vue、Angularなどが有名ですが、Svelteはこれらのツールと比較して少ないコード量、小さなコンパイルサイズ、高速な動作が特徴です。",s=b(),i=m("p"),i.textContent="今回のプロジェクトでは短い期間での開発に大きく貢献してくれました。",r=b(),o=m("p"),o.innerHTML='入門に最適なチュートリアルはこちら<a href="https://svelte.jp/tutorial/basics">こちら</a>',d(e,"class","svelte-1hkdwcd"),d(l,"class","svelte-1hkdwcd"),d(i,"class","svelte-1hkdwcd"),d(o,"class","svelte-1hkdwcd")},m(c,a){y(c,e,a),y(c,n,a),y(c,l,a),y(c,s,a),y(c,i,a),y(c,r,a),y(c,o,a)},d(c){c&&(w(e),w(n),w(l),w(s),w(i),w(r),w(o))}}}function Gl(t){let e,n,l;return{c(){e=m("p"),e.textContent=`WebAssemblyとは従来ブラウザ上ではJavaScriptのみ実行できたのに対し、Rust、C、GOなどの言語を用いて書かれたコードを\r
                コンパイルし生成されたバイナリをブラウザ上で実行できるようにする技術です。`,n=b(),l=m("p"),l.textContent="JavaScriptと比較して高速に動作し、今回のように大量の盤面を探索する際には非常に有効です。",d(e,"class","svelte-1hkdwcd"),d(l,"class","svelte-1hkdwcd")},m(s,i){y(s,e,i),y(s,n,i),y(s,l,i)},d(s){s&&(w(e),w(n),w(l))}}}function Kl(t){let e,n,l,s,i,r,o;return{c(){e=m("p"),e.textContent="今回のプロジェクトでは主にRustというプログラミング言語を使い開発しました。",n=b(),l=m("p"),l.textContent="Rustは数あるプログラミング言語の中でも最も高いパフォーマンスを発揮するこのできる言語の一つであり、今回のようにブラウザ上で実行することができるなど、ほぼすべてのプラットフォームに向けてコンパイルすることもできます。",s=b(),i=m("p"),i.textContent="更にRustでは独自の仕組みによりプログラミング中意識せずとも安全とパフォーマンスが保証されます。",r=b(),o=m("p"),o.innerHTML='入門に最適なチュートリアルはこちら<a href="https://doc.rust-jp.rs/book-ja/">こちら</a>',d(e,"class","svelte-1hkdwcd"),d(l,"class","svelte-1hkdwcd"),d(i,"class","svelte-1hkdwcd"),d(o,"class","svelte-1hkdwcd")},m(c,a){y(c,e,a),y(c,n,a),y(c,l,a),y(c,s,a),y(c,i,a),y(c,r,a),y(c,o,a)},d(c){c&&(w(e),w(n),w(l),w(s),w(i),w(r),w(o))}}}function Zl(t){let e;return{c(){e=S("AIの仕組み")},m(n,l){y(n,e,l)},d(n){n&&w(e)}}}function Ql(t){let e,n,l,s,i,r,o,c,a,u,_,p,g,C,v,L,q,B,h,M,G,U,x,I,V,pe,le,oe,ae,K,E,X,Y,ee,se,ve,fe,Ce,be,Se,J,Fe,ue,Ne,$e,Me,we,Ve,ie,We,Ie,Le,ye,Z,$,D,Be,Je,qe,Ge,nt,lt;n=new ot({props:{$$slots:{default:[Fl]},$$scope:{ctx:t}}}),r=new ot({props:{$$slots:{default:[Vl]},$$scope:{ctx:t}}});function _n(W){t[1](W)}let vt={values:["Rust","WebAssembly","Svelte"]};t[0]!==void 0&&(vt.select=t[0]),g=new yl({props:vt}),he.push(()=>Te(g,"select",_n));function bt(W,re){if(W[0]===0)return Kl;if(W[0]===1)return Gl;if(W[0]===2)return Jl}let Pe=bt(t),te=Pe&&Pe(t);return q=new ot({props:{$$slots:{default:[Zl]},$$scope:{ctx:t}}}),V=new Ul({}),fe=new zl({}),ie=new xl({}),{c(){e=m("div"),z(n.$$.fragment),l=b(),s=m("div"),s.innerHTML='<p class="svelte-1hkdwcd">このサイトは上智大学のプログラミングサークル(UnbiasedProgramming)内のイベントProjectSoma2023で作成したオセロAIをブラウザ上で動かせるように移植したものです。</p> <p class="svelte-1hkdwcd">サイトのソースコードは<a href="https://github.com/h-sumiya/OthelloAI-WEB">こちら</a>にあります。</p> <p class="svelte-1hkdwcd">移植前のオセロAIは<a href="https://www.codingame.com/multiplayer/bot-programming/othello-1">オセロAIの大会</a>に提出し最高で18位の成績を残しています。</p>',i=b(),z(r.$$.fragment),o=b(),c=m("div"),a=m("p"),a.textContent="オセロAIのコードはRustを使って書かれており、WebAssemblyに変換して静的なページとして公開しています。",u=b(),_=m("p"),_.textContent="UI部分はSvelteを使用し作成しました。",p=b(),z(g.$$.fragment),v=b(),te&&te.c(),L=b(),z(q.$$.fragment),B=b(),h=m("div"),M=m("p"),M.textContent="このオセロAIは主に4つの要素、定跡データ、αβ法、評価関数、Bitboardによって構成されています。",G=b(),U=m("p"),U.textContent="AIははじめに定跡データの確認を行い登録されている手が見つかった場合に登録されていた手を打ちます。",x=b(),I=m("div"),z(V.$$.fragment),pe=b(),le=m("div"),le.textContent="図のように盤面の状態をハッシュテーブルのキーとしてその後打つべき手を値に格納している",oe=b(),ae=m("p"),ae.textContent="AIは後述するαβ法によって最善手を探索しますが、8手ほど先までのみの探索となるので序盤においては終盤を見据えた手を打つことができません。",K=b(),E=m("p"),E.textContent="そこで序盤において取ることのできるパターンが少ないことを利用して事前に打つ手を決めて置くと言うことです。",X=b(),Y=m("p"),Y.textContent="登録されている定跡が見つからなかった場合にAIはαβ法による探索を開始します。αβ法とはより簡単なアルゴリズムであるミニマックス法と同じ結果を高速に出すことができるアルゴリズムです。",ee=b(),se=m("p"),se.textContent="ミニマックス法とは自分は常に最善手を打ち、相手は常に自分にとって最悪の手を打つという仮定のもとに探索を行い、その中で最も良い結果となる手を探索するアルゴリズムです。",ve=b(),z(fe.$$.fragment),Ce=b(),be=m("div"),be.textContent="赤線(自分のターン)は最大値、青線(相手のターン)は最小値を探している。",Se=b(),J=m("p"),J.textContent=`では評価関数とは何を行うものでしょうか?\r
            前述のミニマックス法やαβ法では最悪の手、最善の手をそれぞれ打つと説明しましたが何を持って最善の手、最悪の手とするのでしょうか?`,Fe=b(),ue=m("p"),ue.textContent="この問題の答えが評価関数です。評価関数ではある盤面の状態に対して点数をつけます。その点数を評価値と呼び探索においてはこの点数をもとに最善の手を決定します。",Ne=b(),$e=m("p"),$e.textContent="しかしオセロの盤面に決まった点数、良し悪しはありません。そこでこの評価関数をどのように作成するかが様々なオセロAIの差となります。",Me=b(),we=m("p"),we.textContent="今回作成したAIでは1ターン目から60ターン目の最終点差をPyTorchを用いて学習させたニューラルネットワークによって評価値を算出しています。",Ve=b(),z(ie.$$.fragment),We=b(),Ie=m("div"),Ie.textContent="実際には10個のマスなら3^10通りのパターンしかないため盤面を細かく分割して学習させ、それぞれのパターンの点数を事前に計算しておくことで高速化を図っていいる。",Le=b(),ye=m("p"),ye.textContent="最後にBitboardについて軽く説明します。Bitboardとは盤面の状態を2つの64bitの整数で表現したものです。",Z=b(),$=m("p"),$.textContent="コンピューターでは数字を01000111...のように0と1のみを使って管理していてbitとは一つの0か1のことを指します。",D=b(),Be=m("p"),Be.textContent="64bitの整数は64個のbitを持っているので64マスの盤面を表現することができ、黒のデータ、白のデータの2つを用意することで盤面の状態を表現することができます。",Je=b(),qe=m("p"),qe.textContent=`このような方法を用いる理由は、詳しい説明は省略しますが一度にすべての着手可能なマスを求めたり、着手後の盤面を求める処理を非常に高速に行うことが可能になるためです。\r
            更に2つの数字で1ターン分のデータを表すことができるためメモリの使用量も少なく済みます。`,Ge=b(),nt=m("p"),nt.textContent="以上が簡易的なこのオセロAIの仕組みになります。詳しい説明はソースコードを参照してください。",d(s,"class","inner svelte-1hkdwcd"),d(a,"class","svelte-1hkdwcd"),d(_,"class","svelte-1hkdwcd"),d(c,"class","inner svelte-1hkdwcd"),d(M,"class","svelte-1hkdwcd"),d(U,"class","svelte-1hkdwcd"),d(le,"class","info svelte-1hkdwcd"),d(ae,"class","svelte-1hkdwcd"),d(E,"class","svelte-1hkdwcd"),d(Y,"class","svelte-1hkdwcd"),d(se,"class","svelte-1hkdwcd"),d(be,"class","info svelte-1hkdwcd"),d(J,"class","svelte-1hkdwcd"),d(ue,"class","svelte-1hkdwcd"),d($e,"class","svelte-1hkdwcd"),d(we,"class","svelte-1hkdwcd"),d(Ie,"class","info svelte-1hkdwcd"),d(ye,"class","svelte-1hkdwcd"),d($,"class","svelte-1hkdwcd"),d(Be,"class","svelte-1hkdwcd"),d(qe,"class","svelte-1hkdwcd"),d(nt,"class","svelte-1hkdwcd"),d(h,"class","inner svelte-1hkdwcd"),d(e,"class","body svelte-1hkdwcd")},m(W,re){y(W,e,re),j(n,e,null),f(e,l),f(e,s),f(e,i),j(r,e,null),f(e,o),f(e,c),f(c,a),f(c,u),f(c,_),f(c,p),j(g,c,null),f(c,v),te&&te.m(c,null),f(e,L),j(q,e,null),f(e,B),f(e,h),f(h,M),f(h,G),f(h,U),f(h,x),f(h,I),j(V,I,null),f(I,pe),f(I,le),f(h,oe),f(h,ae),f(h,K),f(h,E),f(h,X),f(h,Y),f(h,ee),f(h,se),f(h,ve),j(fe,h,null),f(h,Ce),f(h,be),f(h,Se),f(h,J),f(h,Fe),f(h,ue),f(h,Ne),f(h,$e),f(h,Me),f(h,we),f(h,Ve),j(ie,h,null),f(h,We),f(h,Ie),f(h,Le),f(h,ye),f(h,Z),f(h,$),f(h,D),f(h,Be),f(h,Je),f(h,qe),f(h,Ge),f(h,nt),lt=!0},p(W,[re]){const wt={};re&4&&(wt.$$scope={dirty:re,ctx:W}),n.$set(wt);const yt={};re&4&&(yt.$$scope={dirty:re,ctx:W}),r.$set(yt);const kt={};!C&&re&1&&(C=!0,kt.select=W[0],je(()=>C=!1)),g.$set(kt),Pe!==(Pe=bt(W))&&(te&&te.d(1),te=Pe&&Pe(W),te&&(te.c(),te.m(c,null)));const At={};re&4&&(At.$$scope={dirty:re,ctx:W}),q.$set(At)},i(W){lt||(k(n.$$.fragment,W),k(r.$$.fragment,W),k(g.$$.fragment,W),k(q.$$.fragment,W),k(V.$$.fragment,W),k(fe.$$.fragment,W),k(ie.$$.fragment,W),lt=!0)},o(W){A(n.$$.fragment,W),A(r.$$.fragment,W),A(g.$$.fragment,W),A(q.$$.fragment,W),A(V.$$.fragment,W),A(fe.$$.fragment,W),A(ie.$$.fragment,W),lt=!1},d(W){W&&w(e),T(n),T(r),T(g),te&&te.d(),T(q),T(V),T(fe),T(ie)}}}function Xl(t,e,n){let l=null;function s(i){l=i,n(0,l)}return[l,s]}class Yl extends O{constructor(e){super(),R(this,e,Xl,Ql,P,{})}}function es(t){let e;return{c(){e=m("div"),d(e,"class","footer svelte-mpheog")},m(n,l){y(n,e,l)},p:N,i:N,o:N,d(n){n&&w(e)}}}class ts extends O{constructor(e){super(),R(this,e,null,es,P,{})}}function ns(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="inner svelte-1hpvxsb"><a href="https://www.unbiasedlearning.org/" class="title svelte-1hpvxsb">Unbiased Programming</a></div>',d(e,"class","head svelte-1hpvxsb")},m(n,l){y(n,e,l)},p:N,i:N,o:N,d(n){n&&w(e)}}}class ls extends O{constructor(e){super(),R(this,e,null,ns,P,{})}}function Xt(t){let e,n,l={ctx:t,current:null,token:null,hasCatch:!1,pending:rs,then:is,catch:ss,blocks:[,,,]};return En(Un,l),{c(){e=xe(),l.block.c()},m(s,i){y(s,e,i),l.block.m(s,l.anchor=i),l.mount=()=>e.parentNode,l.anchor=e,n=!0},p(s,i){t=s},i(s){n||(k(l.block),n=!0)},o(s){for(let i=0;i<3;i+=1){const r=l.blocks[i];A(r)}n=!1},d(s){s&&w(e),l.block.d(s),l.token=null,l=null}}}function ss(t){return{c:N,m:N,i:N,o:N,d:N}}function is(t){let e,n;return e=new ml({}),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function rs(t){let e,n;return e=new Gn({props:{text:"AIを読み込んでいます"}}),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function cs(t){let e,n,l,s,i,r,o;e=new ls({});let c=t[0]&&Xt(t);return s=new Yl({}),r=new ts({}),{c(){z(e.$$.fragment),n=b(),c&&c.c(),l=b(),z(s.$$.fragment),i=b(),z(r.$$.fragment)},m(a,u){j(e,a,u),y(a,n,u),c&&c.m(a,u),y(a,l,u),j(s,a,u),y(a,i,u),j(r,a,u),o=!0},p(a,[u]){a[0]?c?u&1&&k(c,1):(c=Xt(a),c.c(),k(c,1),c.m(l.parentNode,l)):c&&(ge(),A(c,1,1,()=>{c=null}),me())},i(a){o||(k(e.$$.fragment,a),k(c),k(s.$$.fragment,a),k(r.$$.fragment,a),o=!0)},o(a){A(e.$$.fragment,a),A(c),A(s.$$.fragment,a),A(r.$$.fragment,a),o=!1},d(a){a&&(w(n),w(l),w(i)),T(e,a),c&&c.d(a),T(s,a),T(r,a)}}}function os(t,e,n){let l=!1;return(async()=>l||(await Hn(),n(0,l=!0)))(),[l]}class as extends O{constructor(e){super(),R(this,e,os,cs,P,{})}}new as({target:document.getElementById("app")});
