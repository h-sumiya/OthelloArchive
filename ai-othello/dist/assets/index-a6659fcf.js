var fn=Object.defineProperty;var on=(n,e,t)=>e in n?fn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>(on(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function T(){}function dt(n,e){for(const t in e)n[t]=e[t];return n}function un(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Qt(n){return n()}function $t(){return Object.create(null)}function Ue(n){n.forEach(Qt)}function Xt(n){return typeof n=="function"}function P(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function an(n){return Object.keys(n).length===0}function dn(n,e,t,l){if(n){const s=Yt(n,e,t,l);return n[0](s)}}function Yt(n,e,t,l){return n[1]&&l?dt(t.ctx.slice(),n[1](l(e))):t.ctx}function _n(n,e,t,l){if(n[2]&&l){const s=n[2](l(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],r=Math.max(e.dirty.length,s.length);for(let f=0;f<r;f+=1)i[f]=e.dirty[f]|s[f];return i}return e.dirty|s}return e.dirty}function hn(n,e,t,l,s,i){if(s){const r=Yt(e,t,l,i);n.p(r,s)}}function gn(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let l=0;l<t;l++)e[l]=-1;return e}return-1}function a(n,e){n.appendChild(e)}function k(n,e,t){n.insertBefore(e,t||null)}function w(n){n.parentNode&&n.parentNode.removeChild(n)}function xe(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function m(n){return document.createElement(n)}function be(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function E(n){return document.createTextNode(n)}function v(){return E(" ")}function Qe(){return E("")}function we(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function d(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function mn(n){return Array.from(n.childNodes)}function D(n,e){e=""+e,n.data!==e&&(n.data=e)}function re(n,e,t,l){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,l?"important":"")}let tt;function pn(){if(tt===void 0){tt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{tt=!0}}return tt}function en(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const l=m("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const s=pn();let i;return s?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=we(window,"message",r=>{r.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{i=we(l.contentWindow,"resize",e),e()}),a(n,l),()=>{(s||i&&l.contentWindow)&&i(),w(l)}}function te(n,e,t){n.classList.toggle(e,!!t)}function vn(n,e,{bubbles:t=!1,cancelable:l=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:l})}class bn{constructor(e=!1){ve(this,"is_svg",!1);ve(this,"e");ve(this,"n");ve(this,"t");ve(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,l=null){this.e||(this.is_svg?this.e=be(t.nodeName):this.e=m(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)k(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(w)}}let Ke;function ae(n){Ke=n}function _t(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function it(n){_t().$$.on_mount.push(n)}function rt(){const n=_t();return(e,t,{cancelable:l=!1}={})=>{const s=n.$$.callbacks[e];if(s){const i=vn(e,t,{cancelable:l});return s.slice().forEach(r=>{r.call(n,i)}),!i.defaultPrevented}return!0}}function wn(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(l=>l.call(this,e))}const We=[],de=[];let He=[];const ot=[],kn=Promise.resolve();let ut=!1;function yn(){ut||(ut=!0,kn.then(ht))}function Ze(n){He.push(n)}function qe(n){ot.push(n)}const ct=new Set;let Oe=0;function ht(){if(Oe!==0)return;const n=Ke;do{try{for(;Oe<We.length;){const e=We[Oe];Oe++,ae(e),$n(e.$$)}}catch(e){throw We.length=0,Oe=0,e}for(ae(null),We.length=0,Oe=0;de.length;)de.pop()();for(let e=0;e<He.length;e+=1){const t=He[e];ct.has(t)||(ct.add(t),t())}He.length=0}while(We.length);for(;ot.length;)ot.pop()();ut=!1,ct.clear(),ae(n)}function $n(n){if(n.fragment!==null){n.update(),Ue(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ze)}}function Cn(n){const e=[],t=[];He.forEach(l=>n.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),He=e}const nt=new Set;let ze;function ke(){ze={r:0,c:[],p:ze}}function ye(){ze.r||Ue(ze.c),ze=ze.p}function y(n,e){n&&n.i&&(nt.delete(n),n.i(e))}function C(n,e,t,l){if(n&&n.o){if(nt.has(n))return;nt.add(n),ze.c.push(()=>{nt.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}function In(n,e){const t=e.token={};function l(s,i,r,f){if(e.token!==t)return;e.resolved=f;let c=e.ctx;r!==void 0&&(c=c.slice(),c[r]=f);const o=s&&(e.current=s)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((_,p)=>{p!==i&&_&&(ke(),C(_,1,1,()=>{e.blocks[p]===_&&(e.blocks[p]=null)}),ye())}):e.block.d(1),o.c(),y(o,1),o.m(e.mount(),e.anchor),u=!0),e.block=o,e.blocks&&(e.blocks[i]=o),u&&ht()}if(un(n)){const s=_t();if(n.then(i=>{ae(s),l(e.then,1,e.value,i),ae(null)},i=>{if(ae(s),l(e.catch,2,e.error,i),ae(null),!e.hasCatch)throw i}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,n),!0;e.resolved=n}}function Z(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function tn(n,e){const t={},l={},s={$$scope:1};let i=n.length;for(;i--;){const r=n[i],f=e[i];if(f){for(const c in r)c in f||(l[c]=1);for(const c in f)s[c]||(t[c]=f[c],s[c]=1);n[i]=f}else for(const c in r)s[c]=1}for(const r in l)r in t||(t[r]=void 0);return t}function nn(n){return typeof n=="object"&&n!==null?n:{}}function Ee(n,e,t){const l=n.$$.props[e];l!==void 0&&(n.$$.bound[l]=t,t(n.$$.ctx[l]))}function x(n){n&&n.c()}function z(n,e,t){const{fragment:l,after_update:s}=n.$$;l&&l.m(e,t),Ze(()=>{const i=n.$$.on_mount.map(Qt).filter(Xt);n.$$.on_destroy?n.$$.on_destroy.push(...i):Ue(i),n.$$.on_mount=[]}),s.forEach(Ze)}function q(n,e){const t=n.$$;t.fragment!==null&&(Cn(t.after_update),Ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function An(n,e){n.$$.dirty[0]===-1&&(We.push(n),yn(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function O(n,e,t,l,s,i,r,f=[-1]){const c=Ke;ae(n);const o=n.$$={fragment:null,ctx:[],props:i,update:T,not_equal:s,bound:$t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:$t(),dirty:f,skip_bound:!1,root:e.target||c.$$.root};r&&r(o.root);let u=!1;if(o.ctx=t?t(n,e.props||{},(_,p,...g)=>{const $=g.length?g[0]:p;return o.ctx&&s(o.ctx[_],o.ctx[_]=$)&&(!o.skip_bound&&o.bound[_]&&o.bound[_]($),u&&An(n,_)),p}):[],o.update(),u=!0,Ue(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const _=mn(e.target);o.fragment&&o.fragment.l(_),_.forEach(w)}else o.fragment&&o.fragment.c();e.intro&&y(n.$$.fragment),z(n,e.target,e.anchor),ht()}ae(c)}class W{constructor(){ve(this,"$$");ve(this,"$$set")}$destroy(){q(this,1),this.$destroy=T}$on(e,t){if(!Xt(t))return T;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const s=l.indexOf(t);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!an(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mn);function Bn(){return new Worker(""+new URL("ai.worker-ec4ed721.js",import.meta.url).href)}const at=new Bn;let jn=new Promise((n,e)=>{at.onmessage=t=>{n()}});const Ct=1e3;async function zn(n,e){const t=Date.now();at.postMessage({data:n,color:e});const l=await new Promise((i,r)=>{at.onmessage=f=>{i(f.data)}}),s=Date.now()-t;return console.log(`ai elapsed: ${s}ms`),s<Ct&&await new Promise((i,r)=>{setTimeout(()=>{i()},Ct-s)}),l}function qn(n){let e,t;return{c(){e=new bn(!1),t=Qe(),e.a=t},m(l,s){e.m(n[0],l,s),k(l,t,s)},p(l,[s]){s&1&&e.p(l[0])},i:T,o:T,d(l){l&&(w(t),e.d())}}}function En(n,e,t){let l=".&nbsp;&nbsp;";return it(()=>{let s=0,i=setInterval(()=>{s++,s>3&&(s=0),t(0,l=".".repeat(s)+"&nbsp;".repeat(3-s))},300);return()=>{clearInterval(i)}}),[l]}class ln extends W{constructor(e){super(),O(this,e,En,qn,P,{})}}function xn(n){let e,t,l,s,i,r,f;return r=new ln({}),{c(){e=m("div"),t=m("div"),l=v(),s=m("div"),i=E(n[0]),x(r.$$.fragment),d(t,"class","spinner svelte-7ywxxi"),d(e,"class","loading svelte-7ywxxi")},m(c,o){k(c,e,o),a(e,t),a(e,l),a(e,s),a(s,i),z(r,s,null),f=!0},p(c,[o]){(!f||o&1)&&D(i,c[0])},i(c){f||(y(r.$$.fragment,c),f=!0)},o(c){C(r.$$.fragment,c),f=!1},d(c){c&&w(e),q(r)}}}function Sn(n,e,t){let{text:l}=e;return n.$$set=s=>{"text"in s&&t(0,l=s.text)},[l]}class Ln extends W{constructor(e){super(),O(this,e,Sn,xn,P,{text:0})}}function Nn(n){let e,t,l,s,i,r,f,c,o;return{c(){e=m("label"),t=m("input"),l=v(),s=m("span"),i=v(),r=m("span"),f=E(n[1]),d(t,"type","checkbox"),d(t,"class","input svelte-15e3hob"),d(s,"class","checkmark svelte-15e3hob"),d(r,"class","span"),d(e,"class","label svelte-15e3hob")},m(u,_){k(u,e,_),a(e,t),t.checked=n[0],a(e,l),a(e,s),a(e,i),a(e,r),a(r,f),c||(o=we(t,"change",n[2]),c=!0)},p(u,[_]){_&1&&(t.checked=u[0]),_&2&&D(f,u[1])},i:T,o:T,d(u){u&&w(e),c=!1,o()}}}function Tn(n,e,t){let{value:l=!1}=e,{text:s}=e;function i(){l=this.checked,t(0,l)}return n.$$set=r=>{"value"in r&&t(0,l=r.value),"text"in r&&t(1,s=r.text)},[l,s,i]}class It extends W{constructor(e){super(),O(this,e,Tn,Nn,P,{value:0,text:1})}}function At(n){let e;return{c(){e=m("div"),d(e,"class","cover svelte-ubliqf")},m(t,l){k(t,e,l)},d(t){t&&w(e)}}}function Pn(n){let e,t,l,s,i,r,f,c,o=n[1]&&At();return{c(){e=m("div"),t=m("div"),t.textContent="黒",l=v(),s=m("div"),s.textContent="白",i=v(),o&&o.c(),d(t,"class","black svelte-ubliqf"),d(t,"role","button"),d(t,"tabindex","0"),te(t,"select",n[0]==1),d(s,"class","white svelte-ubliqf"),d(s,"role","button"),d(s,"tabindex","0"),te(s,"select",n[0]==2),d(e,"class",r="wrap w_"+n[0]+" svelte-ubliqf")},m(u,_){k(u,e,_),a(e,t),a(e,l),a(e,s),a(e,i),o&&o.m(e,null),f||(c=[we(t,"click",n[2]),we(s,"click",n[3])],f=!0)},p(u,[_]){_&1&&te(t,"select",u[0]==1),_&1&&te(s,"select",u[0]==2),u[1]?o||(o=At(),o.c(),o.m(e,null)):o&&(o.d(1),o=null),_&1&&r!==(r="wrap w_"+u[0]+" svelte-ubliqf")&&d(e,"class",r)},i:T,o:T,d(u){u&&w(e),o&&o.d(),f=!1,Ue(c)}}}function On(n,e,t){let{select:l=1}=e,{disable:s=!1}=e;const i=()=>t(0,l=1),r=()=>t(0,l=2);return n.$$set=f=>{"select"in f&&t(0,l=f.select),"disable"in f&&t(1,s=f.disable)},[l,s,i,r]}class Wn extends W{constructor(e){super(),O(this,e,On,Pn,P,{select:0,disable:1})}}function Mt(n){let e;return{c(){e=m("div"),d(e,"class","cover svelte-1sioc2l")},m(t,l){k(t,e,l)},d(t){t&&w(e)}}}function Rn(n){let e,t,l,s,i,r,f,c,o,u,_,p,g,$,b,M,S,B,h,A,V,R,U,j=!n[3]&&Mt();function F(L){n[6](L)}let _e={text:"プレイヤー"};n[2]!==void 0&&(_e.value=n[2]),u=new It({props:_e}),de.push(()=>Ee(u,"value",F));function ne(L){n[7](L)}let ce={text:"AI"};n[1]!==void 0&&(ce.value=n[1]),g=new It({props:ce}),de.push(()=>Ee(g,"value",ne));function fe(L){n[8](L)}let G={disable:!n[3]};return n[0]!==void 0&&(G.select=n[0]),h=new Wn({props:G}),de.push(()=>Ee(h,"select",fe)),{c(){e=m("div"),t=m("div"),l=m("div"),s=m("span"),s.textContent="はじめから",i=v(),j&&j.c(),r=v(),f=m("div"),f.textContent="候補を表示",c=v(),o=m("div"),x(u.$$.fragment),p=v(),x(g.$$.fragment),b=v(),M=m("div"),M.textContent="色を選択する(ゲームがリセットされます。)",S=v(),B=m("div"),x(h.$$.fragment),d(l,"class","reset svelte-1sioc2l"),d(l,"role","button"),d(l,"tabindex","0"),d(t,"class","r_wrap svelte-1sioc2l"),d(f,"class","title svelte-1sioc2l"),d(o,"class","inner svelte-1sioc2l"),d(M,"class","title svelte-1sioc2l"),d(B,"class","inner svelte-1sioc2l"),d(e,"class","panel svelte-1sioc2l")},m(L,Q){k(L,e,Q),a(e,t),a(t,l),a(l,s),a(l,i),j&&j.m(l,null),a(e,r),a(e,f),a(e,c),a(e,o),z(u,o,null),a(o,p),z(g,o,null),a(e,b),a(e,M),a(e,S),a(e,B),z(h,B,null),V=!0,R||(U=we(l,"click",n[5]),R=!0)},p(L,[Q]){L[3]?j&&(j.d(1),j=null):j||(j=Mt(),j.c(),j.m(l,null));const X={};!_&&Q&4&&(_=!0,X.value=L[2],qe(()=>_=!1)),u.$set(X);const Y={};!$&&Q&2&&($=!0,Y.value=L[1],qe(()=>$=!1)),g.$set(Y);const le={};Q&8&&(le.disable=!L[3]),!A&&Q&1&&(A=!0,le.select=L[0],qe(()=>A=!1)),h.$set(le)},i(L){V||(y(u.$$.fragment,L),y(g.$$.fragment,L),y(h.$$.fragment,L),V=!0)},o(L){C(u.$$.fragment,L),C(g.$$.fragment,L),C(h.$$.fragment,L),V=!1},d(L){L&&w(e),j&&j.d(),q(u),q(g),q(h),R=!1,U()}}}function Hn(n,e,t){let l=rt();function s(g){l("reset",{p:g})}let{display_ai_legal:i=!0}=e,{display_player_legal:r=!0}=e,{player:f=1}=e,{free:c=!0}=e;const o=()=>{c&&s(f)};function u(g){r=g,t(2,r)}function _(g){i=g,t(1,i)}function p(g){f=g,t(0,f)}return n.$$set=g=>{"display_ai_legal"in g&&t(1,i=g.display_ai_legal),"display_player_legal"in g&&t(2,r=g.display_player_legal),"player"in g&&t(0,f=g.player),"free"in g&&t(3,c=g.free)},n.$$.update=()=>{n.$$.dirty&1&&s(f)},[f,i,r,c,s,o,u,_,p]}class Un extends W{constructor(e){super(),O(this,e,Hn,Rn,P,{display_ai_legal:1,display_player_legal:2,player:0,free:3})}}const lt=[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];function st(n,e){return 0<=n&&n<8?0<=e&&e<8:!1}function Bt(n,e,t){let l=[],s=3-t,i=e%8,r=Math.floor(e/8);if(n[e]!==0)throw"すでに石が置かれていました";for(let c=0;c<8;c++){let o=lt[c][0],u=lt[c][1],_=[],p=i+o,g=r+u;for(;st(p,g)&&n[g*8+p]==s;)_.push(g*8+p),p+=o,g+=u;st(p,g)&&n[g*8+p]==t&&(l=[...l,..._])}if(l.length==0)throw"置けません";let f=[...n];for(let c=0;c<l.length;c++)f[l[c]]=t;return f[e]=t,f}function sn(n,e,t){let l=3-t,s=e%8,i=Math.floor(e/8);if(n[e]!==0)return!1;for(let r=0;r<8;r++){let f=lt[r][0],c=lt[r][1],o=s+f,u=i+c,_=!1;for(;st(o,u)&&n[u*8+o]==l;)_=!0,o+=f,u+=c;if(st(o,u)&&n[u*8+o]==t&&_)return!0}return!1}function Dn(n,e){let t=[];for(let l=0;l<64;l++)sn(n,l,e)&&t.push(l);return t}function jt(n,e){for(let t=0;t<64;t++)if(sn(n,t,e))return!0;return!1}function Fn(n){let e,t;return{c(){e=m("div"),d(e,"class",t="cell "+n[0]+" "+n[2]+" suggest "+n[3]+" svelte-1v0lz0w"),te(e,"latest",n[1])},m(l,s){k(l,e,s)},p(l,s){s&13&&t!==(t="cell "+l[0]+" "+l[2]+" suggest "+l[3]+" svelte-1v0lz0w")&&d(e,"class",t),s&15&&te(e,"latest",l[1])},d(l){l&&w(e)}}}function Jn(n){let e,t,l,s;return{c(){e=m("div"),d(e,"class",t="cell "+n[0]+" clickable suggest "+n[3]+" svelte-1v0lz0w"),d(e,"role","button"),d(e,"tabindex","0"),te(e,"latest",n[1])},m(i,r){k(i,e,r),l||(s=we(e,"click",n[5]),l=!0)},p(i,r){r&9&&t!==(t="cell "+i[0]+" clickable suggest "+i[3]+" svelte-1v0lz0w")&&d(e,"class",t),r&11&&te(e,"latest",i[1])},d(i){i&&w(e),l=!1,s()}}}function Vn(n){let e;function t(i,r){return i[4]?Jn:Fn}let l=t(n),s=l(n);return{c(){s.c(),e=Qe()},m(i,r){s.m(i,r),k(i,e,r)},p(i,[r]){l===(l=t(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},i:T,o:T,d(i){i&&w(e),s.d(i)}}}function Gn(n,e,t){let l,s,{index:i}=e,r=rt();function f(){l&&r("click",{index:i})}let{type:c="null"}=e,{latest:o=!1}=e,{suggest:u=!1}=e,{input:_=!1}=e,{suggest_type:p="null"}=e,g="",$=null;return n.$$set=b=>{"index"in b&&t(6,i=b.index),"type"in b&&t(0,c=b.type),"latest"in b&&t(1,o=b.latest),"suggest"in b&&t(7,u=b.suggest),"input"in b&&t(8,_=b.input),"suggest_type"in b&&t(9,p=b.suggest_type)},n.$$.update=()=>{n.$$.dirty&1025&&(c=="black"?($=="white"?t(2,g="white_to_black"):t(2,g=""),t(10,$="black")):c=="white"?($=="black"?t(2,g="black_to_white"):t(2,g=""),t(10,$="white")):(t(2,g=""),t(10,$=null))),n.$$.dirty&768&&t(4,l=p!="null"&&_),n.$$.dirty&640&&t(3,s=u?`s_${p}`:"s_null")},[c,o,g,s,l,f,i,u,_,p,$]}class Kn extends W{constructor(e){super(),O(this,e,Gn,Vn,P,{index:6,type:0,latest:1,suggest:7,input:8,suggest_type:9})}}function zt(n,e,t){const l=n.slice();return l[9]=e[t],l[11]=t,l}function qt(n,e,t){const l=n.slice();return l[9]=e[t],l[13]=t,l}function Et(n){let e,t;const l=[n[3][n[11]*8+n[13]],{suggest:n[1]},{input:n[0]},{index:n[11]*8+n[13]}];let s={};for(let i=0;i<l.length;i+=1)s=dt(s,l[i]);return e=new Kn({props:s}),e.$on("click",n[7]),{c(){x(e.$$.fragment)},m(i,r){z(e,i,r),t=!0},p(i,r){const f=r&11?tn(l,[r&8&&nn(i[3][i[11]*8+i[13]]),r&2&&{suggest:i[1]},r&1&&{input:i[0]},l[3]]):{};e.$set(f)},i(i){t||(y(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function xt(n){let e,t,l,s=Z({length:8}),i=[];for(let f=0;f<s.length;f+=1)i[f]=Et(qt(n,s,f));const r=f=>C(i[f],1,1,()=>{i[f]=null});return{c(){e=m("div");for(let f=0;f<i.length;f+=1)i[f].c();t=v(),d(e,"class","row svelte-1xwiqwo")},m(f,c){k(f,e,c);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);a(e,t),l=!0},p(f,c){if(c&11){s=Z({length:8});let o;for(o=0;o<s.length;o+=1){const u=qt(f,s,o);i[o]?(i[o].p(u,c),y(i[o],1)):(i[o]=Et(u),i[o].c(),y(i[o],1),i[o].m(e,t))}for(ke(),o=s.length;o<i.length;o+=1)r(o);ye()}},i(f){if(!l){for(let c=0;c<s.length;c+=1)y(i[c]);l=!0}},o(f){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)C(i[c]);l=!1},d(f){f&&w(e),xe(i,f)}}}function Zn(n){let e,t=`${n[2]}px`,l=`${n[2]}px`,s,i=Z({length:8}),r=[];for(let c=0;c<i.length;c+=1)r[c]=xt(zt(n,i,c));const f=c=>C(r[c],1,1,()=>{r[c]=null});return{c(){e=m("div");for(let c=0;c<r.length;c+=1)r[c].c();d(e,"class","board svelte-1xwiqwo"),re(e,"width",t),re(e,"height",l)},m(c,o){k(c,e,o);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);s=!0},p(c,[o]){if(o&11){i=Z({length:8});let u;for(u=0;u<i.length;u+=1){const _=zt(c,i,u);r[u]?(r[u].p(_,o),y(r[u],1)):(r[u]=xt(_),r[u].c(),y(r[u],1),r[u].m(e,null))}for(ke(),u=i.length;u<r.length;u+=1)f(u);ye()}o&4&&t!==(t=`${c[2]}px`)&&re(e,"width",t),o&4&&l!==(l=`${c[2]}px`)&&re(e,"height",l)},i(c){if(!s){for(let o=0;o<i.length;o+=1)y(r[o]);s=!0}},o(c){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)C(r[o]);s=!1},d(c){c&&w(e),xe(r,c)}}}function Qn(n,e,t){let{data:l}=e,{player:s=1}=e,{latest:i=null}=e,{input:r=!1}=e,{suggest:f=!0}=e,{size:c=500}=e,o;const u={type:"null",latest:!1,suggest_type:"null"};function _(p){wn.call(this,n,p)}return n.$$set=p=>{"data"in p&&t(4,l=p.data),"player"in p&&t(5,s=p.player),"latest"in p&&t(6,i=p.latest),"input"in p&&t(0,r=p.input),"suggest"in p&&t(1,f=p.suggest),"size"in p&&t(2,c=p.size)},n.$$.update=()=>{if(n.$$.dirty&112){let p=[],g=Dn(l,s);for(let $=0;$<l.length;$++)if(l[$]==0)if(g.includes($)){let b=s==1?"black":"white";p.push({...u,type:"null",latest:!1,suggest_type:b})}else p.push({...u,type:"null"});else l[$]==1?p.push({...u,type:"black"}):l[$]==2&&p.push({...u,type:"white"});i!=null&&(p[i].latest=!0),t(3,o=p)}},[r,f,c,o,l,s,i,_]}class Xn extends W{constructor(e){super(),O(this,e,Qn,Zn,P,{data:4,player:5,latest:6,input:0,suggest:1,size:2})}}function St(n){let e,t;return e=new ln({}),{c(){x(e.$$.fragment)},m(l,s){z(e,l,s),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Yn(n){let e,t=n[4][0]+"",l,s,i=n[0][0]+"",r,f,c=n[4][1]+"",o,u,_=n[0][1]+"",p,g,$,b,M=`${n[1]}px`,S,B=n[2]&&St();return{c(){e=m("div"),l=E(t),s=E(": "),r=E(i),f=E(" | "),o=E(c),u=E(": "),p=E(_),g=E(" | "),$=E(n[3]),b=v(),B&&B.c(),d(e,"class","info svelte-1nn9nw6"),re(e,"width",M)},m(h,A){k(h,e,A),a(e,l),a(e,s),a(e,r),a(e,f),a(e,o),a(e,u),a(e,p),a(e,g),a(e,$),a(e,b),B&&B.m(e,null),S=!0},p(h,[A]){(!S||A&16)&&t!==(t=h[4][0]+"")&&D(l,t),(!S||A&1)&&i!==(i=h[0][0]+"")&&D(r,i),(!S||A&16)&&c!==(c=h[4][1]+"")&&D(o,c),(!S||A&1)&&_!==(_=h[0][1]+"")&&D(p,_),(!S||A&8)&&D($,h[3]),h[2]?B?A&4&&y(B,1):(B=St(),B.c(),y(B,1),B.m(e,null)):B&&(ke(),C(B,1,1,()=>{B=null}),ye()),A&2&&M!==(M=`${h[1]}px`)&&re(e,"width",M)},i(h){S||(y(B),S=!0)},o(h){C(B),S=!1},d(h){h&&w(e),B&&B.d()}}}function el(n,e,t){let l,s,i,{counts:r=[2,2]}=e,{player:f=1}=e,{next:c=1}=e,{finish:o=!1}=e,{size:u=500}=e;return n.$$set=_=>{"counts"in _&&t(0,r=_.counts),"player"in _&&t(5,f=_.player),"next"in _&&t(6,c=_.next),"finish"in _&&t(7,o=_.finish),"size"in _&&t(1,u=_.size)},n.$$.update=()=>{n.$$.dirty&32&&t(4,l=f==1?["黒(あなた)","白(AI)"]:["黒(AI)","白(あなた)"]),n.$$.dirty&225&&t(3,s=o?r[f-1]>r[2-f]?"あなたの勝ち":r[f-1]<r[2-f]?"AIの勝ち":"引き分け":c==f?"あなたの番です。":"AIが考えています"),n.$$.dirty&224&&t(2,i=c!==f&&!o)},[r,u,i,s,l,f,c,o]}class tl extends W{constructor(e){super(),O(this,e,el,Yn,P,{counts:0,player:5,next:6,finish:7,size:1})}}const Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function nl(n){let e,t,l,s,i,r,f,c,o,u,_,p;const g=[n[9],{data:n[1]},{latest:n[6]},{size:n[5]}];let $={};for(let h=0;h<g.length;h+=1)$=dt($,g[h]);l=new Xn({props:$}),l.$on("click",n[10]),i=new tl({props:{next:n[4],counts:n[8],size:n[5],finish:n[7],player:n[0]}});function b(h){n[13](h)}function M(h){n[14](h)}function S(h){n[15](h)}let B={free:n[0]==n[4]};return n[2].suggest!==void 0&&(B.display_ai_legal=n[2].suggest),n[3].suggest!==void 0&&(B.display_player_legal=n[3].suggest),n[0]!==void 0&&(B.player=n[0]),c=new Un({props:B}),de.push(()=>Ee(c,"display_ai_legal",b)),de.push(()=>Ee(c,"display_player_legal",M)),de.push(()=>Ee(c,"player",S)),c.$on("reset",n[11]),{c(){e=m("div"),t=m("div"),x(l.$$.fragment),s=v(),x(i.$$.fragment),f=v(),x(c.$$.fragment),d(t,"class","main svelte-cpu8vx"),Ze(()=>n[12].call(t)),d(e,"class","game svelte-cpu8vx")},m(h,A){k(h,e,A),a(e,t),z(l,t,null),a(t,s),z(i,t,null),r=en(t,n[12].bind(t)),a(e,f),z(c,e,null),p=!0},p(h,[A]){const V=A&610?tn(g,[A&512&&nn(h[9]),A&2&&{data:h[1]},A&64&&{latest:h[6]},A&32&&{size:h[5]}]):{};l.$set(V);const R={};A&16&&(R.next=h[4]),A&256&&(R.counts=h[8]),A&32&&(R.size=h[5]),A&128&&(R.finish=h[7]),A&1&&(R.player=h[0]),i.$set(R);const U={};A&17&&(U.free=h[0]==h[4]),!o&&A&4&&(o=!0,U.display_ai_legal=h[2].suggest,qe(()=>o=!1)),!u&&A&8&&(u=!0,U.display_player_legal=h[3].suggest,qe(()=>u=!1)),!_&&A&1&&(_=!0,U.player=h[0],qe(()=>_=!1)),c.$set(U)},i(h){p||(y(l.$$.fragment,h),y(i.$$.fragment,h),y(c.$$.fragment,h),p=!0)},o(h){C(l.$$.fragment,h),C(i.$$.fragment,h),C(c.$$.fragment,h),p=!1},d(h){h&&w(e),q(l),q(i),r(),q(c)}}}function ll(n,e,t){let l,s,i=500,r=1,f=null,c=!1,o=Lt;function u(){t(1,o=Lt),t(6,f=null),t(7,c=!1),t(4,g=1)}let _={suggest:!0,input:!1,player:3-r},p={suggest:!0,input:!0,player:r},g=r;async function $(){let j=await zn(o,g);t(6,f=j),t(1,o=Bt(o,j,g))}function b(){return jt(o,g)}function M(){return jt(o,3-g)}let S=!1;async function B(j){if(S)return;S=!0;let F=j.detail.index;for(t(6,f=F),t(1,o=Bt(o,F,g)),t(4,g=3-g);b()&&(await $(),!M()););t(4,g=3-g),!b()&&!M()&&t(7,c=!0),S=!1}async function h(){u(),r==2&&(await $(),t(4,g=3-g))}function A(){i=this.clientWidth,t(5,i)}function V(j){n.$$.not_equal(_.suggest,j)&&(_.suggest=j,t(2,_),t(0,r))}function R(j){n.$$.not_equal(p.suggest,j)&&(p.suggest=j,t(3,p),t(0,r))}function U(j){r=j,t(0,r)}return n.$$.update=()=>{n.$$.dirty&1&&t(3,p.player=r,p),n.$$.dirty&1&&t(2,_.player=3-r,_),n.$$.dirty&29&&t(9,l=g==r?p:_),n.$$.dirty&2&&t(8,s=[o.filter(j=>j==1).length,o.filter(j=>j==2).length])},[r,o,_,p,g,i,f,c,s,l,B,h,A,V,R,U]}class sl extends W{constructor(e){super(),O(this,e,ll,nl,P,{})}}function il(n){let e,t;const l=n[1].default,s=dn(l,n,n[0],null);return{c(){e=m("div"),s&&s.c(),d(e,"class","title svelte-w8pvte")},m(i,r){k(i,e,r),s&&s.m(e,null),t=!0},p(i,[r]){s&&s.p&&(!t||r&1)&&hn(s,l,i,i[0],t?_n(l,i[0],r,null):gn(i[0]),null)},i(i){t||(y(s,i),t=!0)},o(i){C(s,i),t=!1},d(i){i&&w(e),s&&s.d(i)}}}function rl(n,e,t){let{$$slots:l={},$$scope:s}=e;return n.$$set=i=>{"$$scope"in i&&t(0,s=i.$$scope)},[s,l]}class ft extends W{constructor(e){super(),O(this,e,rl,il,P,{})}}function Nt(n,e,t){const l=n.slice();return l[4]=e[t],l[6]=t,l}function Tt(n){let e,t=n[4]+"",l,s,i,r;function f(){return n[3](n[6])}return{c(){e=m("div"),l=E(t),s=v(),d(e,"class","item svelte-rvcr6i"),d(e,"role","button"),d(e,"tabindex","0"),te(e,"select",n[6]==n[0])},m(c,o){k(c,e,o),a(e,l),a(e,s),i||(r=we(e,"click",f),i=!0)},p(c,o){n=c,o&2&&t!==(t=n[4]+"")&&D(l,t),o&1&&te(e,"select",n[6]==n[0])},d(c){c&&w(e),i=!1,r()}}}function cl(n){let e,t=Z(n[1]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Tt(Nt(n,t,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();d(e,"class","wrap svelte-rvcr6i")},m(s,i){k(s,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,[i]){if(i&7){t=Z(s[1]);let r;for(r=0;r<t.length;r+=1){const f=Nt(s,t,r);l[r]?l[r].p(f,i):(l[r]=Tt(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},i:T,o:T,d(s){s&&w(e),xe(l,s)}}}function fl(n,e,t){let{select:l=null}=e,{values:s=[]}=e;function i(f){f==l?t(0,l=null):t(0,l=f)}const r=f=>{i(f)};return n.$$set=f=>{"select"in f&&t(0,l=f.select),"values"in f&&t(1,s=f.values)},[l,s,i,r]}class ol extends W{constructor(e){super(),O(this,e,fl,cl,P,{select:0,values:1})}}function Pt(n){let e,t,l;return{c(){e=be("path"),d(e,"d",t="M"+(n[6]*n[0]+n[5])+",100 L"+n[4]+",0 "),d(e,"stroke",l=n[2]===1?"red":"blue"),d(e,"stroke-width","3")},m(s,i){k(s,e,i)},p(s,i){i&113&&t!==(t="M"+(s[6]*s[0]+s[5])+",100 L"+s[4]+",0 ")&&d(e,"d",t),i&4&&l!==(l=s[2]===1?"red":"blue")&&d(e,"stroke",l)},d(s){s&&w(e)}}}function Ot(n){let e=n[1],t,l=Wt(n);return{c(){l.c(),t=Qe()},m(s,i){l.m(s,i),k(s,t,i)},p(s,i){i&2&&P(e,e=s[1])?(l.d(1),l=Wt(s),l.c(),l.m(t.parentNode,t)):l.p(s,i)},d(s){s&&w(t),l.d(s)}}}function Wt(n){let e,t,l,s,i;return{c(){e=m("div"),t=be("svg"),l=be("path"),d(l,"d",s="M"+n[4]+",0 L"+(n[6]*n[1]+n[5])+",100"),d(l,"stroke","green"),d(l,"stroke-width","3"),d(t,"viewBox",i="0 0 "+n[3]+" 100"),d(t,"class","line svelte-1izpj23"),d(e,"class","line_box svelte-1izpj23")},m(r,f){k(r,e,f),a(e,t),a(t,l)},p(r,f){f&114&&s!==(s="M"+r[4]+",0 L"+(r[6]*r[1]+r[5])+",100")&&d(l,"d",s),f&8&&i!==(i="0 0 "+r[3]+" 100")&&d(t,"viewBox",i)},d(r){r&&w(e)}}}function ul(n){let e,t,l,s,i,r,f=n[0]!==null&&Pt(n),c=n[1]!==null&&Ot(n);return{c(){e=m("div"),t=be("svg"),l=be("path"),f&&f.c(),i=v(),c&&c.c(),d(l,"d",n[7]),d(l,"stroke","black"),d(l,"stroke-width","1"),d(t,"viewBox",s="0 0 "+n[3]+" 100"),d(e,"class","svelte-1izpj23"),Ze(()=>n[9].call(e))},m(o,u){k(o,e,u),a(e,t),a(t,l),f&&f.m(t,null),a(e,i),c&&c.m(e,null),r=en(e,n[9].bind(e))},p(o,[u]){u&128&&d(l,"d",o[7]),o[0]!==null?f?f.p(o,u):(f=Pt(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null),u&8&&s!==(s="0 0 "+o[3]+" 100")&&d(t,"viewBox",s),o[1]!==null?c?c.p(o,u):(c=Ot(o),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:T,o:T,d(o){o&&w(e),f&&f.d(),c&&c.d(),r()}}}function al(n,e,t){let l,s,i,r,{lines:f=2}=e,{select:c=null}=e,{check:o=null}=e,{mode:u=1}=e,_=100;function p(){_=this.clientWidth,t(3,_)}return n.$$set=g=>{"lines"in g&&t(8,f=g.lines),"select"in g&&t(0,c=g.select),"check"in g&&t(1,o=g.check),"mode"in g&&t(2,u=g.mode)},n.$$.update=()=>{if(n.$$.dirty&264&&t(6,l=_/f),n.$$.dirty&264&&t(5,s=_/f/2),n.$$.dirty&8&&t(4,i=_/2),n.$$.dirty&368){let g="";for(let $=0;$<f;$++)g+=`M${l*$+s},100 L${i},0 `;t(7,r=g)}},t(7,r=""),[c,o,u,_,i,s,l,r,f,p]}class dl extends W{constructor(e){super(),O(this,e,al,ul,P,{lines:8,select:0,check:1,mode:2})}}function _l(n){let e,t,l,s;return{c(){e=m("div"),t=m("div"),l=m("span"),s=E(n[0]),d(l,"class","svelte-ed4d3x"),d(t,"class","value svelte-ed4d3x"),d(e,"class","box svelte-ed4d3x")},m(i,r){k(i,e,r),a(e,t),a(t,l),a(l,s)},p(i,[r]){r&1&&D(s,i[0])},i:T,o:T,d(i){i&&w(e)}}}function hl(n,e,t){let l=rt(),{start:s=!1}=e,i="",r=!1;return n.$$set=f=>{"start"in f&&t(1,s=f.start)},n.$$.update=()=>{n.$$.dirty&7&&s&&!r&&(t(2,r=!0),setTimeout(()=>{t(0,i=t(0,i=Math.floor(Math.random()*100-50))),l("value",{value:i})},500))},[i,s,r]}class gl extends W{constructor(e){super(),O(this,e,hl,_l,P,{start:1})}}function Rt(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function Ht(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function ml(n){let e,t,l=Z({length:n[0]}),s=[];for(let r=0;r<l.length;r+=1)s[r]=Ut(Rt(n,l,r));const i=r=>C(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Qe()},m(r,f){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,f);k(r,e,f),t=!0},p(r,f){if(f&137){l=Z({length:r[0]});let c;for(c=0;c<l.length;c+=1){const o=Rt(r,l,c);s[c]?(s[c].p(o,f),y(s[c],1)):(s[c]=Ut(o),s[c].c(),y(s[c],1),s[c].m(e.parentNode,e))}for(ke(),c=l.length;c<s.length;c+=1)i(c);ye()}},i(r){if(!t){for(let f=0;f<l.length;f+=1)y(s[f]);t=!0}},o(r){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)C(s[f]);t=!1},d(r){r&&w(e),xe(s,r)}}}function pl(n){let e,t,l=Z({length:n[0]}),s=[];for(let r=0;r<l.length;r+=1)s[r]=Dt(Ht(n,l,r));const i=r=>C(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Qe()},m(r,f){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,f);k(r,e,f),t=!0},p(r,f){if(f&143){l=Z({length:r[0]});let c;for(c=0;c<l.length;c+=1){const o=Ht(r,l,c);s[c]?(s[c].p(o,f),y(s[c],1)):(s[c]=Dt(o),s[c].c(),y(s[c],1),s[c].m(e.parentNode,e))}for(ke(),c=l.length;c<s.length;c+=1)i(c);ye()}},i(r){if(!t){for(let f=0;f<l.length;f+=1)y(s[f]);t=!0}},o(r){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)C(s[f]);t=!1},d(r){r&&w(e),xe(s,r)}}}function Ut(n){let e,t;function l(...s){return n[10](n[14],...s)}return e=new gl({props:{start:n[14]<=n[3]}}),e.$on("value",l),{c(){x(e.$$.fragment)},m(s,i){z(e,s,i),t=!0},p(s,i){n=s;const r={};i&8&&(r.start=n[14]<=n[3]),e.$set(r)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function Dt(n){let e,t;function l(...s){return n[9](n[14],...s)}return e=new rn({props:{depth:n[1]-1,mode:n[2]*-1,start:n[14]<=n[3]}}),e.$on("value",l),{c(){x(e.$$.fragment)},m(s,i){z(e,s,i),t=!0},p(s,i){n=s;const r={};i&2&&(r.depth=n[1]-1),i&4&&(r.mode=n[2]*-1),i&8&&(r.start=n[14]<=n[3]),e.$set(r)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function vl(n){let e,t,l,s,i,r,f,c,o,u,_;r=new dl({props:{lines:n[0],check:n[5],select:n[4],mode:n[2]}});const p=[pl,ml],g=[];function $(b,M){return b[1]!==0?0:1}return o=$(n),u=g[o]=p[o](n),{c(){e=m("div"),t=m("div"),l=m("span"),s=E(n[6]),i=v(),x(r.$$.fragment),f=v(),c=m("div"),u.c(),d(l,"class","svelte-170uqb6"),d(t,"class","value svelte-170uqb6"),d(c,"class","wraps svelte-170uqb6"),d(e,"class","wrap svelte-170uqb6"),te(e,"view",n[1]===0&&n[3]>=0&&n[3]!==n[0])},m(b,M){k(b,e,M),a(e,t),a(t,l),a(l,s),a(e,i),z(r,e,null),a(e,f),a(e,c),g[o].m(c,null),_=!0},p(b,[M]){(!_||M&64)&&D(s,b[6]);const S={};M&1&&(S.lines=b[0]),M&32&&(S.check=b[5]),M&16&&(S.select=b[4]),M&4&&(S.mode=b[2]),r.$set(S);let B=o;o=$(b),o===B?g[o].p(b,M):(ke(),C(g[B],1,1,()=>{g[B]=null}),ye(),u=g[o],u?u.p(b,M):(u=g[o]=p[o](b),u.c()),y(u,1),u.m(c,null)),(!_||M&11)&&te(e,"view",b[1]===0&&b[3]>=0&&b[3]!==b[0])},i(b){_||(y(r.$$.fragment,b),y(u),_=!0)},o(b){C(r.$$.fragment,b),C(u),_=!1},d(b){b&&w(e),q(r),g[o].d()}}}function bl(n,e,t){let{n:l=Math.floor(Math.random()*3)+1}=e,{depth:s=0}=e,{mode:i=1}=e,{start:r=!1}=e,f=rt(),c=-1,o=null,u=null,_="";function p(b,M){(_===""||b*i>_*i)&&(t(4,o=M),t(6,_=b)),t(3,c++,c),c<l?t(5,u=c):(t(5,u=null),f("value",{value:_}))}const g=(b,M)=>p(M.detail.value,b),$=(b,M)=>p(M.detail.value,b);return n.$$set=b=>{"n"in b&&t(0,l=b.n),"depth"in b&&t(1,s=b.depth),"mode"in b&&t(2,i=b.mode),"start"in b&&t(8,r=b.start)},n.$$.update=()=>{n.$$.dirty&256&&r&&setTimeout(()=>{t(3,c=0),t(5,u=0)},500)},[l,s,i,c,o,u,_,p,r,g,$]}class rn extends W{constructor(e){super(),O(this,e,bl,vl,P,{n:0,depth:1,mode:2,start:8})}}function Ft(n){let e,t;return e=new rn({props:{depth:2,start:!0,n:Math.floor(Math.random()*2)+2}}),e.$on("value",n[1]),{c(){x(e.$$.fragment)},m(l,s){z(e,l,s),t=!0},p:T,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function wl(n){let e,t,l=n[0],s,i=Ft(n);return{c(){e=m("div"),t=m("div"),i.c(),d(t,"class","inner svelte-1q53nds"),d(e,"class","wrap svelte-1q53nds")},m(r,f){k(r,e,f),a(e,t),i.m(t,null),s=!0},p(r,[f]){f&1&&P(l,l=r[0])?(ke(),C(i,1,1,T),ye(),i=Ft(r),i.c(),y(i,1),i.m(t,null)):i.p(r,f)},i(r){s||(y(i),s=!0)},o(r){C(i),s=!1},d(r){r&&w(e),i.d(r)}}}function kl(n,e,t){let l=0;function s(){setTimeout(()=>{t(0,l++,l)},5e3)}return[l,s]}class yl extends W{constructor(e){super(),O(this,e,kl,wl,P,{})}}function Jt(n,e,t){const l=n.slice();return l[5]=e[t],l[7]=t,l}function Vt(n,e,t){const l=n.slice();return l[5]=e[t],l[9]=t,l}function Gt(n){let e,t;return{c(){e=m("div"),d(e,"class",t="cell cell_"+n[0][n[7]*n[1]+n[9]]+" svelte-1s0u75h")},m(l,s){k(l,e,s)},p(l,s){s&3&&t!==(t="cell cell_"+l[0][l[7]*l[1]+l[9]]+" svelte-1s0u75h")&&d(e,"class",t)},d(l){l&&w(e)}}}function Kt(n){let e,t,l=Z({length:n[1]}),s=[];for(let i=0;i<l.length;i+=1)s[i]=Gt(Vt(n,l,i));return{c(){e=m("div");for(let i=0;i<s.length;i+=1)s[i].c();t=v(),d(e,"class","row svelte-1s0u75h")},m(i,r){k(i,e,r);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);a(e,t)},p(i,r){if(r&3){l=Z({length:i[1]});let f;for(f=0;f<l.length;f+=1){const c=Vt(i,l,f);s[f]?s[f].p(c,r):(s[f]=Gt(c),s[f].c(),s[f].m(e,t))}for(;f<s.length;f+=1)s[f].d(1);s.length=l.length}},d(i){i&&w(e),xe(s,i)}}}function $l(n){let e,t=Z({length:n[2]}),l=[];for(let s=0;s<t.length;s+=1)l[s]=Kt(Jt(n,t,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();d(e,"class","icon svelte-1s0u75h"),re(e,"--ws",n[4]),re(e,"--hs",n[3])},m(s,i){k(s,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,[i]){if(i&7){t=Z({length:s[2]});let r;for(r=0;r<t.length;r+=1){const f=Jt(s,t,r);l[r]?l[r].p(f,i):(l[r]=Kt(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}i&16&&re(e,"--ws",s[4]),i&8&&re(e,"--hs",s[3])},i:T,o:T,d(s){s&&w(e),xe(l,s)}}}function Cl(n,e,t){let l,s,{data:i}=e,{w:r=8}=e,{h:f=8}=e;return n.$$set=c=>{"data"in c&&t(0,i=c.data),"w"in c&&t(1,r=c.w),"h"in c&&t(2,f=c.h)},n.$$.update=()=>{n.$$.dirty&2&&t(4,l=r/8),n.$$.dirty&4&&t(3,s=f/8)},[i,r,f,s,l]}class Re extends W{constructor(e){super(),O(this,e,Cl,$l,P,{data:0,w:1,h:2})}}function Il(n){let e,t,l;return{c(){e=be("svg"),t=be("path"),d(t,"d",l=n[1][n[0]]),d(t,"class","svelte-nuwpfa"),d(e,"viewBox","0 -960 960 960"),d(e,"class","svelte-nuwpfa")},m(s,i){k(s,e,i),a(e,t)},p(s,[i]){i&1&&l!==(l=s[1][s[0]])&&d(t,"d",l)},i:T,o:T,d(s){s&&w(e)}}}function Al(n,e,t){let l={then:"m560-242-43-42 168-168H160v-60h525L516-681l43-42 241 241-240 240Z"},{name:s}=e;return n.$$set=i=>{"name"in i&&t(0,s=i.name)},[s,l]}class Ge extends W{constructor(e){super(),O(this,e,Al,Il,P,{name:0})}}function Ml(n){let e,t,l,s,i,r,f,c=n[1][n[0]].pos+"",o,u;return t=new Re({props:{data:n[1][n[0]].data}}),i=new Ge({props:{name:"then"}}),{c(){e=m("div"),x(t.$$.fragment),l=v(),s=m("div"),x(i.$$.fragment),r=v(),f=m("div"),o=E(c),d(s,"class","then svelte-1empsdn"),d(f,"class","num svelte-1empsdn"),d(e,"class","book svelte-1empsdn")},m(_,p){k(_,e,p),z(t,e,null),a(e,l),a(e,s),z(i,s,null),a(e,r),a(e,f),a(f,o),u=!0},p(_,[p]){const g={};p&1&&(g.data=_[1][_[0]].data),t.$set(g),(!u||p&1)&&c!==(c=_[1][_[0]].pos+"")&&D(o,c)},i(_){u||(y(t.$$.fragment,_),y(i.$$.fragment,_),u=!0)},o(_){C(t.$$.fragment,_),C(i.$$.fragment,_),u=!1},d(_){_&&w(e),q(t),q(i)}}}function Bl(n,e,t){class l{constructor(f,c,o){this.data=[];for(let u=0;u<64;u++){let _=1n<<BigInt(u);f&_?this.data.push(1):c&_?this.data.push(2):this.data.push(0)}this.pos=o}}const s=[new l(0x00081820000000n,0x0010001e180000n,"f6"),new l(0x10302020200400n,0x04081c1c181800n,"d1"),new l(0x00381200000000n,0x00040c1c000000n,"b6"),new l(0x00221400000800n,0x0808083c3c3000n,"c2"),new l(0x0000002c0c0800n,0x00083e10000000n,"b6"),new l(0x00003008080000n,0x003c0c14240000n,"e3"),new l(0x00003800000000n,0x0000001e100000n,"d3"),new l(0x0028000c102000n,0x00043c10000000n,"f4"),new l(0x000018180c0000n,0x00382024000000n,"c5"),new l(0x003c7c38002000n,0x00010246fe1800n,"e1"),new l(0x0000060e0c2c20n,0x143c3830301010n,"d1"),new l(0x00000018180000n,0x00203c24040000n,"d6"),new l(0x00000810100000n,0x00203028000000n,"d3"),new l(0x00102074000400n,0x000e1c08380800n,"b5"),new l(0x000018181c0000n,0x00040406000000n,"b3"),new l(0x18002010000000n,0x20f85808000000n,"f8"),new l(0x04083c04040000n,0x00000038380000n,"g3"),new l(0x0008043a080000n,0x00003804060000n,"e6"),new l(0x081828000a0000n,0x0004143e302000n,"e2"),new l(0x0000682e0a0000n,0x003c1450341000n,"b6"),new l(0x002c0e0c040000n,0x10103030182800n,"g4"),new l(0x00080008000000n,0x00101c10000000n,"f4"),new l(0x0000181c040000n,0x00382020080000n,"e3"),new l(0x00040000040010n,0x00383838180804n,"f3"),new l(0x0000040c040000n,0x00181810000000n,"f6"),new l(0x00080020080000n,0x0010381c040000n,"b3"),new l(0x00201038102000n,0x000e0c060f0000n,"a4"),new l(0x00181818080000n,0x20202400100000n,"g6"),new l(0x101c1000700000n,0x20002e7c080000n,"f6"),new l(0x1010181c181000n,0x00002020200000n,"g4"),new l(0x00081c001c0000n,0x0004003e000000n,"b5"),new l(0x000010001c0000n,0x0000081c200000n,"d6")];let i=0;return it(()=>{let r=setInterval(()=>{let f=Math.floor(Math.random()*s.length);for(;f==i;)f=Math.floor(Math.random()*s.length);t(0,i=f)},600);return()=>clearInterval(r)}),[i,s]}class jl extends W{constructor(e){super(),O(this,e,Bl,Ml,P,{})}}function zl(n){let e,t,l,s,i,r,f,c,o,u,_,p,g,$,b,M=n[0].rands[0]+"",S,B,h,A,V,R,U,j,F,_e,ne=n[0].rands[1]+"",ce,fe,G,L,Q,X,Y,le,he,oe,$e=n[0].rands[2]+"",ge,Se,J,De,ue=n[0].rands[0]+"",Le,Ce,Ie=n[0].rands[1]+"",me,Fe,se=n[0].rands[2]+"",Ne,Ae,Me=n[0].rands[0]+n[0].rands[1]+n[0].rands[2]+"",pe,K;return t=new Re({props:{data:n[0].data}}),i=new Ge({props:{name:"then"}}),o=new Re({props:{data:n[0].cross()}}),p=new Ge({props:{name:"then"}}),A=new Re({props:{data:n[0].corner(),w:4,h:4}}),U=new Ge({props:{name:"then"}}),L=new Re({props:{data:n[0].edge(),w:1}}),Y=new Ge({props:{name:"then"}}),{c(){e=m("div"),x(t.$$.fragment),l=v(),s=m("div"),x(i.$$.fragment),r=v(),f=m("div"),c=m("div"),x(o.$$.fragment),u=v(),_=m("div"),x(p.$$.fragment),g=v(),$=m("div"),b=E("A:"),S=E(M),B=v(),h=m("div"),x(A.$$.fragment),V=v(),R=m("div"),x(U.$$.fragment),j=v(),F=m("div"),_e=E("B:"),ce=E(ne),fe=v(),G=m("div"),x(L.$$.fragment),Q=v(),X=m("div"),x(Y.$$.fragment),le=v(),he=m("div"),oe=E("C:"),ge=E($e),Se=v(),J=m("div"),De=E("A("),Le=E(ue),Ce=E(") + B("),me=E(Ie),Fe=E(") + C("),Ne=E(se),Ae=E(") = SCORE:"),pe=E(Me),d(e,"class","src svelte-6mnjq4"),d(s,"class","flow flow_m svelte-6mnjq4"),d(_,"class","flow svelte-6mnjq4"),d($,"class","rand svelte-6mnjq4"),d(c,"class","svelte-6mnjq4"),d(R,"class","flow svelte-6mnjq4"),d(F,"class","rand svelte-6mnjq4"),d(h,"class","svelte-6mnjq4"),d(X,"class","flow svelte-6mnjq4"),d(he,"class","rand svelte-6mnjq4"),d(G,"class","svelte-6mnjq4"),d(f,"class","parts svelte-6mnjq4"),d(J,"class","res svelte-6mnjq4")},m(I,H){k(I,e,H),z(t,e,null),k(I,l,H),k(I,s,H),z(i,s,null),k(I,r,H),k(I,f,H),a(f,c),z(o,c,null),a(c,u),a(c,_),z(p,_,null),a(c,g),a(c,$),a($,b),a($,S),a(f,B),a(f,h),z(A,h,null),a(h,V),a(h,R),z(U,R,null),a(h,j),a(h,F),a(F,_e),a(F,ce),a(f,fe),a(f,G),z(L,G,null),a(G,Q),a(G,X),z(Y,X,null),a(G,le),a(G,he),a(he,oe),a(he,ge),k(I,Se,H),k(I,J,H),a(J,De),a(J,Le),a(J,Ce),a(J,me),a(J,Fe),a(J,Ne),a(J,Ae),a(J,pe),K=!0},p(I,[H]){const Be={};H&1&&(Be.data=I[0].data),t.$set(Be);const Je={};H&1&&(Je.data=I[0].cross()),o.$set(Je),(!K||H&1)&&M!==(M=I[0].rands[0]+"")&&D(S,M);const je={};H&1&&(je.data=I[0].corner()),A.$set(je),(!K||H&1)&&ne!==(ne=I[0].rands[1]+"")&&D(ce,ne);const Ve={};H&1&&(Ve.data=I[0].edge()),L.$set(Ve),(!K||H&1)&&$e!==($e=I[0].rands[2]+"")&&D(ge,$e),(!K||H&1)&&ue!==(ue=I[0].rands[0]+"")&&D(Le,ue),(!K||H&1)&&Ie!==(Ie=I[0].rands[1]+"")&&D(me,Ie),(!K||H&1)&&se!==(se=I[0].rands[2]+"")&&D(Ne,se),(!K||H&1)&&Me!==(Me=I[0].rands[0]+I[0].rands[1]+I[0].rands[2]+"")&&D(pe,Me)},i(I){K||(y(t.$$.fragment,I),y(i.$$.fragment,I),y(o.$$.fragment,I),y(p.$$.fragment,I),y(A.$$.fragment,I),y(U.$$.fragment,I),y(L.$$.fragment,I),y(Y.$$.fragment,I),K=!0)},o(I){C(t.$$.fragment,I),C(i.$$.fragment,I),C(o.$$.fragment,I),C(p.$$.fragment,I),C(A.$$.fragment,I),C(U.$$.fragment,I),C(L.$$.fragment,I),C(Y.$$.fragment,I),K=!1},d(I){I&&(w(e),w(l),w(s),w(r),w(f),w(Se),w(J)),q(t),q(i),q(o),q(p),q(A),q(U),q(L),q(Y)}}}function Zt(){let n=[];for(let e=0;e<64;e++)n.push(Math.floor(Math.random()*3));return n}function ql(n,e,t){const l=[0,1,2,3,8,9,10,16,17,24],s=[0,1,2,3,4,5,6,8,9,12],i=[0,9,18,27,36,45,54,63];class r{constructor(o){this.data=o,this.rands=[];for(let u=0;u<3;u++)this.rands.push(Math.floor(Math.random()*64-32))}edge(){return this.data.slice(0,8)}corner(){let o=Array(16).fill(3);for(let u=0;u<l.length;u++)o[s[u]]=this.data[l[u]];return o}cross(){let o=Array(64).fill(3);for(let u=0;u<i.length;u++)o[i[u]]=this.data[i[u]];return o}}let f=new r(Zt());return it(()=>{let c=setInterval(()=>{t(0,f=new r(Zt()))},1e3);return()=>clearInterval(c)}),[f]}class El extends W{constructor(e){super(),O(this,e,ql,zl,P,{})}}function xl(n){let e,t,l,s,i,r,f,c,o,u=n[0].toString(16)+"",_,p;return t=new Re({props:{data:n[1]}}),{c(){e=m("div"),x(t.$$.fragment),l=v(),s=m("div"),i=E("10進数表記"),r=E(n[0]),f=v(),c=m("div"),o=E("16進数表記:"),_=E(u),d(s,"class","svelte-t6xt2z"),d(c,"class","svelte-t6xt2z"),d(e,"class","icon svelte-t6xt2z")},m(g,$){k(g,e,$),z(t,e,null),a(e,l),a(e,s),a(s,i),a(s,r),a(e,f),a(e,c),a(c,o),a(c,_),p=!0},p(g,[$]){const b={};$&2&&(b.data=g[1]),t.$set(b),(!p||$&1)&&D(r,g[0]),(!p||$&1)&&u!==(u=g[0].toString(16)+"")&&D(_,u)},i(g){p||(y(t.$$.fragment,g),p=!0)},o(g){C(t.$$.fragment,g),p=!1},d(g){g&&w(e),q(t)}}}function Sl(n,e){let t=[];for(let l=0;l<64;l++)n&1n<<BigInt(l)?t.push(e):t.push(0);return t}function Ll(n,e,t){let l,{n:s=0n}=e,{color:i=1}=e;return n.$$set=r=>{"n"in r&&t(0,s=r.n),"color"in r&&t(2,i=r.color)},n.$$.update=()=>{n.$$.dirty&5&&t(1,l=Sl(s,i))},[s,l,i]}class Nl extends W{constructor(e){super(),O(this,e,Ll,xl,P,{n:0,color:2})}}function Tl(n){let e,t;return e=new Nl({props:{n:n[0].black,color:1}}),{c(){x(e.$$.fragment)},m(l,s){z(e,l,s),t=!0},p(l,[s]){const i={};s&1&&(i.n=l[0].black),e.$set(i)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Pl(n,e,t){class l{constructor(){this.black=0n,this.white=0n;for(let r=0;r<64;r++)Math.random()<1/3?this.black|=1n<<BigInt(r):Math.random()<.5&&(this.white|=1n<<BigInt(r))}}let s=new l;return it(()=>{let i=setInterval(()=>{t(0,s.black=0x7f7f7f7f7f7f7fn&s.black>>9n,s),s.black===0n&&t(0,s=new l)},1e3);return()=>clearInterval(i)}),[s]}class Ol extends W{constructor(e){super(),O(this,e,Pl,Tl,P,{})}}function Wl(n){let e;return{c(){e=E("このサイトについて")},m(t,l){k(t,e,l)},d(t){t&&w(e)}}}function Rl(n){let e;return{c(){e=E("サイトの仕組み")},m(t,l){k(t,e,l)},d(t){t&&w(e)}}}function Hl(n){let e,t,l,s,i,r,f;return{c(){e=m("p"),e.textContent="Svelteとは独自の記法で書いたSvelteファイルをCSS、JavaScriptにコンパイルするツールです。",t=v(),l=m("p"),l.textContent="WebフレームワークとしてはReact、Vue、Angularなどが有名ですが、Svelteはこれらのツールと比較して少ないコード量、小さなコンパイルサイズ、高速な動作が特徴です。",s=v(),i=m("p"),i.textContent="今回のプロジェクトでは短い期間で開発するためにSvelteを使用しました。",r=v(),f=m("p"),f.innerHTML='公式チュートリアルはこちら<a href="https://svelte.jp/tutorial/basics">こちら</a>',d(e,"class","svelte-1hkdwcd"),d(l,"class","svelte-1hkdwcd"),d(i,"class","svelte-1hkdwcd"),d(f,"class","svelte-1hkdwcd")},m(c,o){k(c,e,o),k(c,t,o),k(c,l,o),k(c,s,o),k(c,i,o),k(c,r,o),k(c,f,o)},d(c){c&&(w(e),w(t),w(l),w(s),w(i),w(r),w(f))}}}function Ul(n){let e,t,l;return{c(){e=m("p"),e.textContent=`WebAssemblyとは従来ブラウザ上ではJavaScriptのみ実行できたのに対し、Rust、C、GOなどの言語を用いて書かれたコードを\r
                コンパイルし生成されたバイナリをブラウザ上で実行できるようにする技術です。`,t=v(),l=m("p"),l.textContent="JavaScriptと比較して高速に動作し、今回のように大量の盤面を探索する際には非常に有効です。",d(e,"class","svelte-1hkdwcd"),d(l,"class","svelte-1hkdwcd")},m(s,i){k(s,e,i),k(s,t,i),k(s,l,i)},d(s){s&&(w(e),w(t),w(l))}}}function Dl(n){let e,t,l,s,i,r,f;return{c(){e=m("p"),e.textContent="今回のプロジェクトでは主にRustというプログラミング言語を使い開発しました。",t=v(),l=m("p"),l.textContent="Rustは数あるプログラミング言語の中でも最も高いパフォーマンスを発揮するこのできる言語の一つであり、今回のようにブラウザ上で実行することができるなど、ほぼすべてのプラットフォームに向けてコンパイルすることもできます。",s=v(),i=m("p"),i.textContent="オセロAIでは大量の計算が必要となるためRustで開発を行いました。",r=v(),f=m("p"),f.innerHTML='公式チュートリアルはこちら<a href="https://doc.rust-jp.rs/book-ja/">こちら</a>',d(e,"class","svelte-1hkdwcd"),d(l,"class","svelte-1hkdwcd"),d(i,"class","svelte-1hkdwcd"),d(f,"class","svelte-1hkdwcd")},m(c,o){k(c,e,o),k(c,t,o),k(c,l,o),k(c,s,o),k(c,i,o),k(c,r,o),k(c,f,o)},d(c){c&&(w(e),w(t),w(l),w(s),w(i),w(r),w(f))}}}function Fl(n){let e;return{c(){e=E("AIの仕組み")},m(t,l){k(t,e,l)},d(t){t&&w(e)}}}function Jl(n){let e,t,l,s,i,r,f,c,o,u,_,p,g,$,b,M,S,B,h,A,V,R,U,j,F,_e,ne,ce,fe,G,L,Q,X,Y,le,he,oe,$e,ge,Se,J,De,ue,Le,Ce,Ie,me,Fe,se,Ne,Ae,Me,pe,K,I,H,Be,Je,je,Ve,Te,gt,Xe,mt,Ye,et;t=new ft({props:{$$slots:{default:[Wl]},$$scope:{ctx:n}}}),r=new ft({props:{$$slots:{default:[Rl]},$$scope:{ctx:n}}});function cn(N){n[1](N)}let pt={values:["Rust","WebAssembly","Svelte"]};n[0]!==void 0&&(pt.select=n[0]),g=new ol({props:pt}),de.push(()=>Ee(g,"select",cn));function vt(N,ie){if(N[0]===0)return Dl;if(N[0]===1)return Ul;if(N[0]===2)return Hl}let Pe=vt(n),ee=Pe&&Pe(n);return S=new ft({props:{$$slots:{default:[Fl]},$$scope:{ctx:n}}}),F=new jl({}),oe=new yl({}),se=new El({}),Te=new Ol({}),{c(){e=m("div"),x(t.$$.fragment),l=v(),s=m("div"),s.innerHTML='<p class="svelte-1hkdwcd">このサイトは上智大学のプログラミングサークル(UnbiasedProgramming)内のイベントProjectSoma2023で作成したオセロAIをブラウザ上で動かせるように移植したものです。</p> <p class="svelte-1hkdwcd">サイトのソースコードは<a href="https://github.com/h-sumiya/OthelloAI-WEB">こちら</a>にあります。</p> <p class="svelte-1hkdwcd">移植前のオセロAIは<a href="https://www.codingame.com/multiplayer/bot-programming/othello-1">オセロAIの大会</a>に提出し最高で18位の成績を残しています。</p>',i=v(),x(r.$$.fragment),f=v(),c=m("div"),o=m("p"),o.textContent="オセロAIのコードはRustを使って書かれており、WebAssemblyに変換して静的なページとして公開しています。",u=v(),_=m("p"),_.textContent="UI部分はSvelteを使用し作成しました。",p=v(),x(g.$$.fragment),b=v(),ee&&ee.c(),M=v(),x(S.$$.fragment),B=v(),h=m("div"),A=m("p"),A.textContent="このオセロAIは主に4つの要素、定跡データ、αβ法、評価関数、Bitboardによって構成されています。",V=v(),R=m("p"),R.textContent="AIははじめに定跡データの確認を行い登録されている手が見つかった場合に登録されていた手を打ちます。",U=v(),j=m("div"),x(F.$$.fragment),_e=v(),ne=m("div"),ne.textContent="図のように盤面の状態をハッシュテーブルのキーとしてその後打つべき手を値に格納している",ce=v(),fe=m("p"),fe.textContent="AIは後述するαβ法によって最善手を探索しますが、8手ほど先までのみの探索となるので序盤においては終盤を見据えた手を打つことができません。",G=v(),L=m("p"),L.textContent="そこで序盤において取ることのできるパターンが少ないことを利用して事前に打つ手を決めて置くと言うことです。",Q=v(),X=m("p"),X.textContent="登録されている定跡が見つからなかった場合にAIはαβ法による探索を開始します。αβ法とはより簡単なアルゴリズムであるミニマックス法と同じ結果を高速に出すことができるアルゴリズムです。",Y=v(),le=m("p"),le.textContent="ミニマックス法とは自分は常に最善手を打ち、相手は常に自分にとって最悪の手を打つという仮定のもとに探索を行い、その中で最も良い結果となる手を探索するアルゴリズムです。",he=v(),x(oe.$$.fragment),$e=v(),ge=m("div"),ge.textContent="赤線(自分のターン)は最大値、青線(相手のターン)は最小値を探している。",Se=v(),J=m("p"),J.textContent=`では評価関数とは何を行うものでしょうか?\r
            前述のミニマックス法やαβ法では最悪の手、最善の手をそれぞれ打つと説明しましたが何を持って最善の手、最悪の手とするのでしょうか?`,De=v(),ue=m("p"),ue.textContent="この問題の答えが評価関数です。評価関数ではある盤面の状態に対して点数をつけます。その点数を評価値と呼び探索においてはこの点数をもとに最善の手を決定します。",Le=v(),Ce=m("p"),Ce.textContent="しかしオセロの盤面に決まった点数、良し悪しはありません。そこでこの評価関数をどのように作成するかが様々なオセロAIの差となります。",Ie=v(),me=m("p"),me.textContent="今回作成したAIでは1ターン目から60ターン目の最終点差をPyTorchを用いて学習させたニューラルネットワークによって評価値を算出しています。",Fe=v(),x(se.$$.fragment),Ne=v(),Ae=m("div"),Ae.textContent="実際には10個のマスなら3^10通りのパターンしかないため盤面を細かく分割して学習させ、それぞれのパターンの点数を事前に計算しておくことで高速化を図っていいる。",Me=v(),pe=m("p"),pe.textContent="最後にBitboardについて軽く説明します。Bitboardとは盤面の状態を2つの64bitの整数で表現したものです。",K=v(),I=m("p"),I.textContent="コンピューターでは数字を01000111...のように0と1のみを使って管理していてbitとは一つの0か1のことを指します。",H=v(),Be=m("p"),Be.textContent="64bitの整数は64個のbitを持っているので64マスの盤面を表現することができ、黒のデータ、白のデータの2つを用意することで盤面の状態を表現することができます。",Je=v(),je=m("p"),je.textContent=`このような方法を用いる理由は一度にすべての着手可能なマスを求めたり、着手後の盤面を求める処理を非常に高速に行うことが可能になるためです。\r
            (複雑な操作になるためここでは説明を省略)\r
            更に2つの数字で1ターン分のデータを表すことができるためメモリの使用量も少なく済みます。`,Ve=v(),x(Te.$$.fragment),gt=v(),Xe=m("div"),Xe.textContent="操作の例:0x7f7f7f7f7f7f7f(盤面の上、左のみビットが立っていない64bit整数)と黒盤の9bit右にシフトしたものの論理積をとり左上に盤面を移動させている。",mt=v(),Ye=m("p"),Ye.textContent="以上が簡易的なこのオセロAIの仕組みになります。詳しい説明はソースコードを参照してください。",d(s,"class","inner svelte-1hkdwcd"),d(o,"class","svelte-1hkdwcd"),d(_,"class","svelte-1hkdwcd"),d(c,"class","inner svelte-1hkdwcd"),d(A,"class","svelte-1hkdwcd"),d(R,"class","svelte-1hkdwcd"),d(ne,"class","info svelte-1hkdwcd"),d(fe,"class","svelte-1hkdwcd"),d(L,"class","svelte-1hkdwcd"),d(X,"class","svelte-1hkdwcd"),d(le,"class","svelte-1hkdwcd"),d(ge,"class","info svelte-1hkdwcd"),d(J,"class","svelte-1hkdwcd"),d(ue,"class","svelte-1hkdwcd"),d(Ce,"class","svelte-1hkdwcd"),d(me,"class","svelte-1hkdwcd"),d(Ae,"class","info svelte-1hkdwcd"),d(pe,"class","svelte-1hkdwcd"),d(I,"class","svelte-1hkdwcd"),d(Be,"class","svelte-1hkdwcd"),d(je,"class","svelte-1hkdwcd"),d(Xe,"class","info svelte-1hkdwcd"),d(Ye,"class","svelte-1hkdwcd"),d(h,"class","inner svelte-1hkdwcd"),d(e,"class","body svelte-1hkdwcd")},m(N,ie){k(N,e,ie),z(t,e,null),a(e,l),a(e,s),a(e,i),z(r,e,null),a(e,f),a(e,c),a(c,o),a(c,u),a(c,_),a(c,p),z(g,c,null),a(c,b),ee&&ee.m(c,null),a(e,M),z(S,e,null),a(e,B),a(e,h),a(h,A),a(h,V),a(h,R),a(h,U),a(h,j),z(F,j,null),a(j,_e),a(j,ne),a(h,ce),a(h,fe),a(h,G),a(h,L),a(h,Q),a(h,X),a(h,Y),a(h,le),a(h,he),z(oe,h,null),a(h,$e),a(h,ge),a(h,Se),a(h,J),a(h,De),a(h,ue),a(h,Le),a(h,Ce),a(h,Ie),a(h,me),a(h,Fe),z(se,h,null),a(h,Ne),a(h,Ae),a(h,Me),a(h,pe),a(h,K),a(h,I),a(h,H),a(h,Be),a(h,Je),a(h,je),a(h,Ve),z(Te,h,null),a(h,gt),a(h,Xe),a(h,mt),a(h,Ye),et=!0},p(N,[ie]){const bt={};ie&4&&(bt.$$scope={dirty:ie,ctx:N}),t.$set(bt);const wt={};ie&4&&(wt.$$scope={dirty:ie,ctx:N}),r.$set(wt);const kt={};!$&&ie&1&&($=!0,kt.select=N[0],qe(()=>$=!1)),g.$set(kt),Pe!==(Pe=vt(N))&&(ee&&ee.d(1),ee=Pe&&Pe(N),ee&&(ee.c(),ee.m(c,null)));const yt={};ie&4&&(yt.$$scope={dirty:ie,ctx:N}),S.$set(yt)},i(N){et||(y(t.$$.fragment,N),y(r.$$.fragment,N),y(g.$$.fragment,N),y(S.$$.fragment,N),y(F.$$.fragment,N),y(oe.$$.fragment,N),y(se.$$.fragment,N),y(Te.$$.fragment,N),et=!0)},o(N){C(t.$$.fragment,N),C(r.$$.fragment,N),C(g.$$.fragment,N),C(S.$$.fragment,N),C(F.$$.fragment,N),C(oe.$$.fragment,N),C(se.$$.fragment,N),C(Te.$$.fragment,N),et=!1},d(N){N&&w(e),q(t),q(r),q(g),ee&&ee.d(),q(S),q(F),q(oe),q(se),q(Te)}}}function Vl(n,e,t){let l=null;function s(i){l=i,t(0,l)}return[l,s]}class Gl extends W{constructor(e){super(),O(this,e,Vl,Jl,P,{})}}function Kl(n){let e;return{c(){e=m("div"),d(e,"class","footer svelte-mpheog")},m(t,l){k(t,e,l)},p:T,i:T,o:T,d(t){t&&w(e)}}}class Zl extends W{constructor(e){super(),O(this,e,null,Kl,P,{})}}function Ql(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="inner svelte-1hpvxsb"><a href="https://www.unbiasedlearning.org/" class="title svelte-1hpvxsb">Unbiased Programming</a></div>',d(e,"class","head svelte-1hpvxsb")},m(t,l){k(t,e,l)},p:T,i:T,o:T,d(t){t&&w(e)}}}class Xl extends W{constructor(e){super(),O(this,e,null,Ql,P,{})}}function Yl(n){return{c:T,m:T,i:T,o:T,d:T}}function es(n){let e,t;return e=new sl({}),{c(){x(e.$$.fragment)},m(l,s){z(e,l,s),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function ts(n){let e,t;return e=new Ln({props:{text:"AIを読み込んでいます"}}),{c(){x(e.$$.fragment)},m(l,s){z(e,l,s),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function ns(n){let e,t,l,s,i,r,f;e=new Xl({});let c={ctx:n,current:null,token:null,hasCatch:!1,pending:ts,then:es,catch:Yl,blocks:[,,,]};return In(jn,c),s=new Gl({}),r=new Zl({}),{c(){x(e.$$.fragment),t=v(),c.block.c(),l=v(),x(s.$$.fragment),i=v(),x(r.$$.fragment)},m(o,u){z(e,o,u),k(o,t,u),c.block.m(o,c.anchor=u),c.mount=()=>l.parentNode,c.anchor=l,k(o,l,u),z(s,o,u),k(o,i,u),z(r,o,u),f=!0},p(o,[u]){n=o},i(o){f||(y(e.$$.fragment,o),y(c.block),y(s.$$.fragment,o),y(r.$$.fragment,o),f=!0)},o(o){C(e.$$.fragment,o);for(let u=0;u<3;u+=1){const _=c.blocks[u];C(_)}C(s.$$.fragment,o),C(r.$$.fragment,o),f=!1},d(o){o&&(w(t),w(l),w(i)),q(e,o),c.block.d(o),c.token=null,c=null,q(s,o),q(r,o)}}}class ls extends W{constructor(e){super(),O(this,e,null,ns,P,{})}}new ls({target:document.getElementById("app")});
