var it=Object.defineProperty;var rt=(t,e,n)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>(rt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function C(){}function He(t,e){for(const n in e)t[n]=e[n];return t}function ct(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ve(t){return t()}function We(){return Object.create(null)}function se(t){t.forEach(Ve)}function Ge(t){return typeof t=="function"}function R(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ot(t){return Object.keys(t).length===0}function h(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function Ke(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function ut(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function P(t){return document.createTextNode(t)}function W(){return P(" ")}function ke(){return P("")}function Q(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function at(t){return Array.from(t.childNodes)}function K(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let ae;function ft(){if(ae===void 0){ae=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ae=!0}}return ae}function dt(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=v("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const i=ft();let s;return i?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Q(window,"message",r=>{r.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{s=Q(l.contentWindow,"resize",e),e()}),h(t,l),()=>{(i||s&&l.contentWindow)&&s(),I(l)}}function V(t,e,n){t.classList.toggle(e,!!n)}function _t(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}class gt{constructor(e=!1){H(this,"is_svg",!1);H(this,"e");H(this,"n");H(this,"t");H(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=ut(n.nodeName):this.e=v(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)M(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(I)}}let oe;function x(t){oe=t}function Ae(){if(!oe)throw new Error("Function called outside component initialization");return oe}function ht(t){Ae().$$.on_mount.push(t)}function Je(){const t=Ae();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=_t(e,n,{cancelable:l});return i.slice().forEach(r=>{r.call(t,s)}),!s.defaultPrevented}return!0}}function pt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const Z=[],G=[];let ee=[];const be=[],mt=Promise.resolve();let ye=!1;function bt(){ye||(ye=!0,mt.then(Ee))}function de(t){ee.push(t)}function te(t){be.push(t)}const me=new Set;let Y=0;function Ee(){if(Y!==0)return;const t=oe;do{try{for(;Y<Z.length;){const e=Z[Y];Y++,x(e),yt(e.$$)}}catch(e){throw Z.length=0,Y=0,e}for(x(null),Z.length=0,Y=0;G.length;)G.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];me.has(n)||(me.add(n),n())}ee.length=0}while(Z.length);for(;be.length;)be.pop()();ye=!1,me.clear(),x(t)}function yt(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(de)}}function wt(t){const e=[],n=[];ee.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ee=e}const fe=new Set;let J;function ge(){J={r:0,c:[],p:J}}function he(){J.r||se(J.c),J=J.p}function E(t,e){t&&t.i&&(fe.delete(t),t.i(e))}function L(t,e,n,l){if(t&&t.o){if(fe.has(t))return;fe.add(t),J.c.push(()=>{fe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function vt(t,e){const n=e.token={};function l(i,s,r,u){if(e.token!==n)return;e.resolved=u;let o=e.ctx;r!==void 0&&(o=o.slice(),o[r]=u);const c=i&&(e.current=i)(o);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,g)=>{g!==s&&f&&(ge(),L(f,1,1,()=>{e.blocks[g]===f&&(e.blocks[g]=null)}),he())}):e.block.d(1),c.c(),E(c,1),c.m(e.mount(),e.anchor),a=!0),e.block=c,e.blocks&&(e.blocks[s]=c),a&&Ee()}if(ct(t)){const i=Ae();if(t.then(s=>{x(i),l(e.then,1,e.value,s),x(null)},s=>{if(x(i),l(e.catch,2,e.error,s),x(null),!e.hasCatch)throw s}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function _e(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Qe(t,e){const n={},l={},i={$$scope:1};let s=t.length;for(;s--;){const r=t[s],u=e[s];if(u){for(const o in r)o in u||(l[o]=1);for(const o in u)i[o]||(n[o]=u[o],i[o]=1);t[s]=u}else for(const o in r)i[o]=1}for(const r in l)r in n||(n[r]=void 0);return n}function Xe(t){return typeof t=="object"&&t!==null?t:{}}function ne(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function U(t){t&&t.c()}function S(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),de(()=>{const s=t.$$.on_mount.map(Ve).filter(Ge);t.$$.on_destroy?t.$$.on_destroy.push(...s):se(s),t.$$.on_mount=[]}),i.forEach(de)}function j(t,e){const n=t.$$;n.fragment!==null&&(wt(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(t,e){t.$$.dirty[0]===-1&&(Z.push(t),bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(t,e,n,l,i,s,r,u=[-1]){const o=oe;x(t);const c=t.$$={fragment:null,ctx:[],props:s,update:C,not_equal:i,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:We(),dirty:u,skip_bound:!1,root:e.target||o.$$.root};r&&r(c.root);let a=!1;if(c.ctx=n?n(t,e.props||{},(f,g,...d)=>{const y=d.length?d[0]:g;return c.ctx&&i(c.ctx[f],c.ctx[f]=y)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](y),a&&kt(t,f)),g}):[],c.update(),a=!0,se(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const f=at(e.target);c.fragment&&c.fragment.l(f),f.forEach(I)}else c.fragment&&c.fragment.c();e.intro&&E(t.$$.fragment),S(t,e.target,e.anchor),Ee()}x(o)}class q{constructor(){H(this,"$$");H(this,"$$set")}$destroy(){j(this,1),this.$destroy=C}$on(e,n){if(!Ge(n))return C;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const At="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(At);function Et(){return new Worker("/assets/ai.worker-d1874de0.js")}let z,ie=null;function le(){return(ie===null||ie.byteLength===0)&&(ie=new Int32Array(z.memory.buffer)),ie}const Ye=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ye.decode();let re=null;function zt(){return(re===null||re.byteLength===0)&&(re=new Uint8Array(z.memory.buffer)),re}function Lt(t,e){return t=t>>>0,Ye.decode(zt().subarray(t,t+e))}function Tt(){let t,e;try{const i=z.__wbindgen_add_to_stack_pointer(-16);z.version(i);var n=le()[i/4+0],l=le()[i/4+1];return t=n,e=l,Lt(n,l)}finally{z.__wbindgen_add_to_stack_pointer(16),z.__wbindgen_free(t,e,1)}}let ce=null;function Ze(){return(ce===null||ce.byteLength===0)&&(ce=new Uint32Array(z.memory.buffer)),ce}let ze=0;function $e(t,e){const n=e(t.length*4,4)>>>0;return Ze().set(t,n/4),ze=t.length,n}function et(t,e){return t=t>>>0,Ze().subarray(t/4,t/4+e)}function we(t,e){try{const s=z.__wbindgen_add_to_stack_pointer(-16),r=$e(t,z.__wbindgen_malloc),u=ze;z.legal_moves(s,r,u,e);var n=le()[s/4+0],l=le()[s/4+1],i=et(n,l).slice();return z.__wbindgen_free(n,l*4),i}finally{z.__wbindgen_add_to_stack_pointer(16)}}function Ne(t,e,n,l){try{const u=z.__wbindgen_add_to_stack_pointer(-16),o=$e(t,z.__wbindgen_malloc),c=ze;z.put(u,o,c,e,n,l);var i=le()[u/4+0],s=le()[u/4+1],r=et(i,s).slice();return z.__wbindgen_free(i,s*4),r}finally{z.__wbindgen_add_to_stack_pointer(16)}}async function It(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(l){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",l);else throw l}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Ct(){const t={};return t.wbg={},t}function Mt(t,e){return z=t.exports,tt.__wbindgen_wasm_module=e,ie=null,ce=null,re=null,z}async function tt(t){if(z!==void 0)return z;typeof t>"u"&&(t=new URL("/assets/webai_bg-4fb1a13d.wasm",self.location));const e=Ct();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:l}=await It(await t,e);return Mt(n,l)}const ve=new Et;let Wt=new Promise((t,e)=>{ve.onmessage=n=>{t(n.data)}});const Pe=1e3;async function Nt(t,e){const n=Date.now();ve.postMessage({data:t,color:e});const l=await new Promise((s,r)=>{ve.onmessage=u=>{s(u.data)}}),i=Date.now()-n;return console.log(`ai elapsed: ${i}ms`),i<Pe&&await new Promise((s,r)=>{setTimeout(()=>{s()},Pe-i)}),l}let Oe=!1;async function Pt(){if(Oe)return;await tt();const t=Tt();console.log(`othello ai web edition(${t}) is successfully loaded.`),Oe=!0}function Ot(t){let e,n;return{c(){e=new gt(!1),n=ke(),e.a=n},m(l,i){e.m(t[0],l,i),M(l,n,i)},p(l,[i]){i&1&&e.p(l[0])},i:C,o:C,d(l){l&&(I(n),e.d())}}}function St(t,e,n){let l=".&nbsp;&nbsp;";return ht(()=>{let i=0,s=setInterval(()=>{i++,i>3&&(i=0),n(0,l=".".repeat(i)+"&nbsp;".repeat(3-i))},300);return()=>{clearInterval(s)}}),[l]}class nt extends q{constructor(e){super(),D(this,e,St,Ot,R,{})}}function jt(t){let e,n,l,i,s,r,u;return r=new nt({}),{c(){e=v("div"),n=v("div"),l=W(),i=v("div"),s=P(t[0]),U(r.$$.fragment),p(n,"class","spinner svelte-7ywxxi"),p(e,"class","loading svelte-7ywxxi")},m(o,c){M(o,e,c),h(e,n),h(e,l),h(e,i),h(i,s),S(r,i,null),u=!0},p(o,[c]){(!u||c&1)&&K(s,o[0])},i(o){u||(E(r.$$.fragment,o),u=!0)},o(o){L(r.$$.fragment,o),u=!1},d(o){o&&I(e),j(r)}}}function Ut(t,e,n){let{text:l}=e;return t.$$set=i=>{"text"in i&&n(0,l=i.text)},[l]}class Bt extends q{constructor(e){super(),D(this,e,Ut,jt,R,{text:0})}}function Rt(t){let e,n,l,i,s,r,u,o,c;return{c(){e=v("label"),n=v("input"),l=W(),i=v("span"),s=W(),r=v("span"),u=P(t[1]),p(n,"type","checkbox"),p(n,"class","input svelte-15e3hob"),p(i,"class","checkmark svelte-15e3hob"),p(r,"class","span"),p(e,"class","label svelte-15e3hob")},m(a,f){M(a,e,f),h(e,n),n.checked=t[0],h(e,l),h(e,i),h(e,s),h(e,r),h(r,u),o||(c=Q(n,"change",t[2]),o=!0)},p(a,[f]){f&1&&(n.checked=a[0]),f&2&&K(u,a[1])},i:C,o:C,d(a){a&&I(e),o=!1,c()}}}function Dt(t,e,n){let{value:l=!1}=e,{text:i}=e;function s(){l=this.checked,n(0,l)}return t.$$set=r=>{"value"in r&&n(0,l=r.value),"text"in r&&n(1,i=r.text)},[l,i,s]}class Se extends q{constructor(e){super(),D(this,e,Dt,Rt,R,{value:0,text:1})}}function je(t){let e;return{c(){e=v("div"),p(e,"class","cover")},m(n,l){M(n,e,l)},d(n){n&&I(e)}}}function qt(t){let e,n,l,i,s,r,u,o,c=t[1]&&je();return{c(){e=v("div"),n=v("div"),n.textContent="黒",l=W(),i=v("div"),i.textContent="白",s=W(),c&&c.c(),p(n,"class","black svelte-12p4wrd"),p(n,"role","button"),p(n,"tabindex","0"),V(n,"select",t[0]==1),p(i,"class","white svelte-12p4wrd"),p(i,"role","button"),p(i,"tabindex","0"),V(i,"select",t[0]==2),p(e,"class",r="wrap w_"+t[0]+" svelte-12p4wrd")},m(a,f){M(a,e,f),h(e,n),h(e,l),h(e,i),h(e,s),c&&c.m(e,null),u||(o=[Q(n,"click",t[2]),Q(i,"click",t[3])],u=!0)},p(a,[f]){f&1&&V(n,"select",a[0]==1),f&1&&V(i,"select",a[0]==2),a[1]?c||(c=je(),c.c(),c.m(e,null)):c&&(c.d(1),c=null),f&1&&r!==(r="wrap w_"+a[0]+" svelte-12p4wrd")&&p(e,"class",r)},i:C,o:C,d(a){a&&I(e),c&&c.d(),u=!1,se(o)}}}function xt(t,e,n){let{select:l=1}=e,{disable:i=!1}=e;const s=()=>n(0,l=1),r=()=>n(0,l=2);return t.$$set=u=>{"select"in u&&n(0,l=u.select),"disable"in u&&n(1,i=u.disable)},[l,i,s,r]}class Ft extends q{constructor(e){super(),D(this,e,xt,qt,R,{select:0,disable:1})}}function Ue(t){let e;return{c(){e=v("div"),p(e,"class","cover svelte-1su97di")},m(n,l){M(n,e,l)},d(n){n&&I(e)}}}function Ht(t){let e,n,l,i,s,r,u,o,c,a,f,g,d,y,k,N,T,w,_,m,F,O,B,b=!t[3]&&Ue();function ue(A){t[6](A)}let Le={text:"プレイヤー"};t[2]!==void 0&&(Le.value=t[2]),a=new Se({props:Le}),G.push(()=>ne(a,"value",ue));function lt(A){t[7](A)}let Te={text:"AI"};t[1]!==void 0&&(Te.value=t[1]),d=new Se({props:Te}),G.push(()=>ne(d,"value",lt));function st(A){t[8](A)}let Ie={disable:!t[3]};return t[0]!==void 0&&(Ie.select=t[0]),_=new Ft({props:Ie}),G.push(()=>ne(_,"select",st)),{c(){e=v("div"),n=v("div"),l=v("div"),i=v("span"),i.textContent="はじめから",s=W(),b&&b.c(),r=W(),u=v("div"),u.textContent="候補を表示",o=W(),c=v("div"),U(a.$$.fragment),g=W(),U(d.$$.fragment),k=W(),N=v("div"),N.textContent="色を選択する(ゲームがリセットされます。)",T=W(),w=v("div"),U(_.$$.fragment),p(l,"class","reset svelte-1su97di"),p(l,"role","button"),p(l,"tabindex","0"),p(n,"class","r_wrap svelte-1su97di"),p(u,"class","title svelte-1su97di"),p(c,"class","inner svelte-1su97di"),p(N,"class","title svelte-1su97di"),p(w,"class","inner svelte-1su97di"),p(e,"class","panel svelte-1su97di")},m(A,X){M(A,e,X),h(e,n),h(n,l),h(l,i),h(l,s),b&&b.m(l,null),h(e,r),h(e,u),h(e,o),h(e,c),S(a,c,null),h(c,g),S(d,c,null),h(e,k),h(e,N),h(e,T),h(e,w),S(_,w,null),F=!0,O||(B=Q(l,"click",t[5]),O=!0)},p(A,[X]){A[3]?b&&(b.d(1),b=null):b||(b=Ue(),b.c(),b.m(l,null));const Ce={};!f&&X&4&&(f=!0,Ce.value=A[2],te(()=>f=!1)),a.$set(Ce);const Me={};!y&&X&2&&(y=!0,Me.value=A[1],te(()=>y=!1)),d.$set(Me);const pe={};X&8&&(pe.disable=!A[3]),!m&&X&1&&(m=!0,pe.select=A[0],te(()=>m=!1)),_.$set(pe)},i(A){F||(E(a.$$.fragment,A),E(d.$$.fragment,A),E(_.$$.fragment,A),F=!0)},o(A){L(a.$$.fragment,A),L(d.$$.fragment,A),L(_.$$.fragment,A),F=!1},d(A){A&&I(e),b&&b.d(),j(a),j(d),j(_),O=!1,B()}}}function Vt(t,e,n){let l=Je();function i(d){l("reset",{p:d})}let{display_ai_legal:s=!0}=e,{display_player_legal:r=!0}=e,{player:u=1}=e,{free:o=!0}=e;const c=()=>{o&&i(u)};function a(d){r=d,n(2,r)}function f(d){s=d,n(1,s)}function g(d){u=d,n(0,u)}return t.$$set=d=>{"display_ai_legal"in d&&n(1,s=d.display_ai_legal),"display_player_legal"in d&&n(2,r=d.display_player_legal),"player"in d&&n(0,u=d.player),"free"in d&&n(3,o=d.free)},t.$$.update=()=>{t.$$.dirty&1&&i(u)},[u,s,r,o,i,c,a,f,g]}class Gt extends q{constructor(e){super(),D(this,e,Vt,Ht,R,{display_ai_legal:1,display_player_legal:2,player:0,free:3})}}function Kt(t){let e,n;return{c(){e=v("div"),p(e,"class",n="cell "+t[0]+" "+t[2]+" suggest "+t[3]+" svelte-1v0lz0w"),V(e,"latest",t[1])},m(l,i){M(l,e,i)},p(l,i){i&13&&n!==(n="cell "+l[0]+" "+l[2]+" suggest "+l[3]+" svelte-1v0lz0w")&&p(e,"class",n),i&15&&V(e,"latest",l[1])},d(l){l&&I(e)}}}function Jt(t){let e,n,l,i;return{c(){e=v("div"),p(e,"class",n="cell "+t[0]+" clickable suggest "+t[3]+" svelte-1v0lz0w"),p(e,"role","button"),p(e,"tabindex","0"),V(e,"latest",t[1])},m(s,r){M(s,e,r),l||(i=Q(e,"click",t[5]),l=!0)},p(s,r){r&9&&n!==(n="cell "+s[0]+" clickable suggest "+s[3]+" svelte-1v0lz0w")&&p(e,"class",n),r&11&&V(e,"latest",s[1])},d(s){s&&I(e),l=!1,i()}}}function Qt(t){let e;function n(s,r){return s[4]?Jt:Kt}let l=n(t),i=l(t);return{c(){i.c(),e=ke()},m(s,r){i.m(s,r),M(s,e,r)},p(s,[r]){l===(l=n(s))&&i?i.p(s,r):(i.d(1),i=l(s),i&&(i.c(),i.m(e.parentNode,e)))},i:C,o:C,d(s){s&&I(e),i.d(s)}}}function Xt(t,e,n){let l,i,{index:s}=e,r=Je();function u(){l&&r("click",{index:s})}let{type:o="null"}=e,{latest:c=!1}=e,{suggest:a=!1}=e,{input:f=!1}=e,{suggest_type:g="null"}=e,d="",y=null;return t.$$set=k=>{"index"in k&&n(6,s=k.index),"type"in k&&n(0,o=k.type),"latest"in k&&n(1,c=k.latest),"suggest"in k&&n(7,a=k.suggest),"input"in k&&n(8,f=k.input),"suggest_type"in k&&n(9,g=k.suggest_type)},t.$$.update=()=>{t.$$.dirty&1025&&(o=="black"?(y=="white"?n(2,d="white_to_black"):n(2,d=""),n(10,y="black")):o=="white"?(y=="black"?n(2,d="black_to_white"):n(2,d=""),n(10,y="white")):(n(2,d=""),n(10,y=null))),t.$$.dirty&768&&n(4,l=g!="null"&&f),t.$$.dirty&640&&n(3,i=a?`s_${g}`:"s_null")},[o,c,d,i,l,u,s,a,f,g,y]}class Yt extends q{constructor(e){super(),D(this,e,Xt,Qt,R,{index:6,type:0,latest:1,suggest:7,input:8,suggest_type:9})}}function Be(t,e,n){const l=t.slice();return l[9]=e[n],l[11]=n,l}function Re(t,e,n){const l=t.slice();return l[9]=e[n],l[13]=n,l}function De(t){let e,n;const l=[t[3][t[11]*8+t[13]],{suggest:t[1]},{input:t[0]},{index:t[11]*8+t[13]}];let i={};for(let s=0;s<l.length;s+=1)i=He(i,l[s]);return e=new Yt({props:i}),e.$on("click",t[7]),{c(){U(e.$$.fragment)},m(s,r){S(e,s,r),n=!0},p(s,r){const u=r&11?Qe(l,[r&8&&Xe(s[3][s[11]*8+s[13]]),r&2&&{suggest:s[1]},r&1&&{input:s[0]},l[3]]):{};e.$set(u)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function qe(t){let e,n,l,i=_e({length:8}),s=[];for(let u=0;u<i.length;u+=1)s[u]=De(Re(t,i,u));const r=u=>L(s[u],1,1,()=>{s[u]=null});return{c(){e=v("div");for(let u=0;u<s.length;u+=1)s[u].c();n=W(),p(e,"class","row svelte-1xwiqwo")},m(u,o){M(u,e,o);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);h(e,n),l=!0},p(u,o){if(o&11){i=_e({length:8});let c;for(c=0;c<i.length;c+=1){const a=Re(u,i,c);s[c]?(s[c].p(a,o),E(s[c],1)):(s[c]=De(a),s[c].c(),E(s[c],1),s[c].m(e,n))}for(ge(),c=i.length;c<s.length;c+=1)r(c);he()}},i(u){if(!l){for(let o=0;o<i.length;o+=1)E(s[o]);l=!0}},o(u){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)L(s[o]);l=!1},d(u){u&&I(e),Ke(s,u)}}}function Zt(t){let e,n=`${t[2]}px`,l=`${t[2]}px`,i,s=_e({length:8}),r=[];for(let o=0;o<s.length;o+=1)r[o]=qe(Be(t,s,o));const u=o=>L(r[o],1,1,()=>{r[o]=null});return{c(){e=v("div");for(let o=0;o<r.length;o+=1)r[o].c();p(e,"class","board svelte-1xwiqwo"),$(e,"width",n),$(e,"height",l)},m(o,c){M(o,e,c);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);i=!0},p(o,[c]){if(c&11){s=_e({length:8});let a;for(a=0;a<s.length;a+=1){const f=Be(o,s,a);r[a]?(r[a].p(f,c),E(r[a],1)):(r[a]=qe(f),r[a].c(),E(r[a],1),r[a].m(e,null))}for(ge(),a=s.length;a<r.length;a+=1)u(a);he()}c&4&&n!==(n=`${o[2]}px`)&&$(e,"width",n),c&4&&l!==(l=`${o[2]}px`)&&$(e,"height",l)},i(o){if(!i){for(let c=0;c<s.length;c+=1)E(r[c]);i=!0}},o(o){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)L(r[c]);i=!1},d(o){o&&I(e),Ke(r,o)}}}function $t(t,e,n){let{data:l}=e,{player:i=1}=e,{latest:s=null}=e,{input:r=!1}=e,{suggest:u=!0}=e,{size:o=500}=e,c;const a={type:"null",latest:!1,suggest_type:"null"};function f(g){pt.call(this,t,g)}return t.$$set=g=>{"data"in g&&n(4,l=g.data),"player"in g&&n(5,i=g.player),"latest"in g&&n(6,s=g.latest),"input"in g&&n(0,r=g.input),"suggest"in g&&n(1,u=g.suggest),"size"in g&&n(2,o=g.size)},t.$$.update=()=>{if(t.$$.dirty&112){let g=[],d=we(l,i);for(let y=0;y<l.length;y++)if(l[y]==0)if(d.includes(y)){let k=i==1?"black":"white";g.push({...a,type:"null",latest:!1,suggest_type:k})}else g.push({...a,type:"null"});else l[y]==1?g.push({...a,type:"black"}):l[y]==2&&g.push({...a,type:"white"});s!=null&&(g[s].latest=!0),n(3,c=g)}},[r,u,o,c,l,i,s,f]}class en extends q{constructor(e){super(),D(this,e,$t,Zt,R,{data:4,player:5,latest:6,input:0,suggest:1,size:2})}}function xe(t){let e,n;return e=new nt({}),{c(){U(e.$$.fragment)},m(l,i){S(e,l,i),n=!0},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){j(e,l)}}}function tn(t){let e,n=t[4][0]+"",l,i,s=t[0][0]+"",r,u,o=t[4][1]+"",c,a,f=t[0][1]+"",g,d,y,k,N=`${t[1]}px`,T,w=t[2]&&xe();return{c(){e=v("div"),l=P(n),i=P(":"),r=P(s),u=P(" | "),c=P(o),a=P(":"),g=P(f),d=P(" | "),y=P(t[3]),k=W(),w&&w.c(),p(e,"class","info svelte-1nn9nw6"),$(e,"width",N)},m(_,m){M(_,e,m),h(e,l),h(e,i),h(e,r),h(e,u),h(e,c),h(e,a),h(e,g),h(e,d),h(e,y),h(e,k),w&&w.m(e,null),T=!0},p(_,[m]){(!T||m&16)&&n!==(n=_[4][0]+"")&&K(l,n),(!T||m&1)&&s!==(s=_[0][0]+"")&&K(r,s),(!T||m&16)&&o!==(o=_[4][1]+"")&&K(c,o),(!T||m&1)&&f!==(f=_[0][1]+"")&&K(g,f),(!T||m&8)&&K(y,_[3]),_[2]?w?m&4&&E(w,1):(w=xe(),w.c(),E(w,1),w.m(e,null)):w&&(ge(),L(w,1,1,()=>{w=null}),he()),m&2&&N!==(N=`${_[1]}px`)&&$(e,"width",N)},i(_){T||(E(w),T=!0)},o(_){L(w),T=!1},d(_){_&&I(e),w&&w.d()}}}function nn(t,e,n){let l,i,s,{counts:r=[2,2]}=e,{player:u=1}=e,{next:o=1}=e,{finish:c=!1}=e,{size:a=500}=e;return t.$$set=f=>{"counts"in f&&n(0,r=f.counts),"player"in f&&n(5,u=f.player),"next"in f&&n(6,o=f.next),"finish"in f&&n(7,c=f.finish),"size"in f&&n(1,a=f.size)},t.$$.update=()=>{t.$$.dirty&32&&n(4,l=u==1?["黒(あなた)","白(AI)"]:["黒(AI)","白(あなた)"]),t.$$.dirty&225&&n(3,i=c?r[u-1]>r[2-u]?"あなたの勝ち":r[u-1]<r[2-u]?"AIの勝ち":"引き分け":o==u?"あなたの番です。":"AIが考えています"),t.$$.dirty&224&&n(2,s=o!==u&&!c)},[r,a,s,i,l,u,o,c]}class ln extends q{constructor(e){super(),D(this,e,nn,tn,R,{counts:0,player:5,next:6,finish:7,size:1})}}const Fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function sn(t){let e,n,l,i,s,r,u,o,c,a,f,g;const d=[t[9],{data:t[1]},{latest:t[6]},{size:t[5]}];let y={};for(let _=0;_<d.length;_+=1)y=He(y,d[_]);l=new en({props:y}),l.$on("click",t[10]),s=new ln({props:{next:t[4],counts:t[8],size:t[5],finish:t[7],player:t[0]}});function k(_){t[13](_)}function N(_){t[14](_)}function T(_){t[15](_)}let w={free:t[0]==t[4]};return t[2].suggest!==void 0&&(w.display_ai_legal=t[2].suggest),t[3].suggest!==void 0&&(w.display_player_legal=t[3].suggest),t[0]!==void 0&&(w.player=t[0]),o=new Gt({props:w}),G.push(()=>ne(o,"display_ai_legal",k)),G.push(()=>ne(o,"display_player_legal",N)),G.push(()=>ne(o,"player",T)),o.$on("reset",t[11]),{c(){e=v("div"),n=v("div"),U(l.$$.fragment),i=W(),U(s.$$.fragment),u=W(),U(o.$$.fragment),p(n,"class","main svelte-1p4md1r"),de(()=>t[12].call(n)),p(e,"class","game svelte-1p4md1r")},m(_,m){M(_,e,m),h(e,n),S(l,n,null),h(n,i),S(s,n,null),r=dt(n,t[12].bind(n)),h(e,u),S(o,e,null),g=!0},p(_,[m]){const F=m&610?Qe(d,[m&512&&Xe(_[9]),m&2&&{data:_[1]},m&64&&{latest:_[6]},m&32&&{size:_[5]}]):{};l.$set(F);const O={};m&16&&(O.next=_[4]),m&256&&(O.counts=_[8]),m&32&&(O.size=_[5]),m&128&&(O.finish=_[7]),m&1&&(O.player=_[0]),s.$set(O);const B={};m&17&&(B.free=_[0]==_[4]),!c&&m&4&&(c=!0,B.display_ai_legal=_[2].suggest,te(()=>c=!1)),!a&&m&8&&(a=!0,B.display_player_legal=_[3].suggest,te(()=>a=!1)),!f&&m&1&&(f=!0,B.player=_[0],te(()=>f=!1)),o.$set(B)},i(_){g||(E(l.$$.fragment,_),E(s.$$.fragment,_),E(o.$$.fragment,_),g=!0)},o(_){L(l.$$.fragment,_),L(s.$$.fragment,_),L(o.$$.fragment,_),g=!1},d(_){_&&I(e),j(l),j(s),r(),j(o)}}}function rn(t,e,n){let l,i,s=500,r=1,u=null,o=!1,c=Fe;function a(){n(1,c=Fe),n(6,u=null),n(7,o=!1),n(4,d=1)}let f={suggest:!0,input:!1,player:3-r},g={suggest:!0,input:!0,player:r},d=r;async function y(){let b=await Nt(c,d);n(6,u=b),n(1,c=Ne(c,b,d,3-d))}function k(){return we(c,d).length!=0}function N(){return we(c,3-d).length!=0}let T=!1;async function w(b){if(T)return;T=!0;let ue=b.detail.index;for(n(6,u=ue),n(1,c=Ne(c,ue,d,3-d)),n(4,d=3-d);k()&&(await y(),!N()););n(4,d=3-d),!k()&&!N()&&n(7,o=!0),T=!1}async function _(){a(),r==2&&(await y(),n(4,d=3-d))}function m(){s=this.clientWidth,n(5,s)}function F(b){t.$$.not_equal(f.suggest,b)&&(f.suggest=b,n(2,f),n(0,r))}function O(b){t.$$.not_equal(g.suggest,b)&&(g.suggest=b,n(3,g),n(0,r))}function B(b){r=b,n(0,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(3,g.player=r,g),t.$$.dirty&1&&n(2,f.player=3-r,f),t.$$.dirty&29&&n(9,l=d==r?g:f),t.$$.dirty&2&&n(8,i=[c.filter(b=>b==1).length,c.filter(b=>b==2).length])},[r,c,f,g,d,s,u,o,i,l,w,_,m,F,O,B]}class cn extends q{constructor(e){super(),D(this,e,rn,sn,R,{})}}function on(t){return{c:C,m:C,i:C,o:C,d:C}}function un(t){let e,n;return e=new cn({}),{c(){U(e.$$.fragment)},m(l,i){S(e,l,i),n=!0},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){j(e,l)}}}function an(t){let e,n;return e=new Bt({props:{text:"AIを読み込んでいます."}}),{c(){U(e.$$.fragment)},m(l,i){S(e,l,i),n=!0},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){j(e,l)}}}function fn(t){let e,n,l={ctx:t,current:null,token:null,hasCatch:!1,pending:an,then:un,catch:on,blocks:[,,,]};return vt(Wt,l),{c(){e=ke(),l.block.c()},m(i,s){M(i,e,s),l.block.m(i,l.anchor=s),l.mount=()=>e.parentNode,l.anchor=e,n=!0},p(i,[s]){t=i},i(i){n||(E(l.block),n=!0)},o(i){for(let s=0;s<3;s+=1){const r=l.blocks[s];L(r)}n=!1},d(i){i&&I(e),l.block.d(i),l.token=null,l=null}}}function dn(t){let e=!1;return(async()=>e||(await Pt(),e=!0))(),[]}class _n extends q{constructor(e){super(),D(this,e,dn,fn,R,{})}}new _n({target:document.getElementById("app")});
