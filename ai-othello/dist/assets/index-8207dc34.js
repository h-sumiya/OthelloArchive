var rt=Object.defineProperty;var ct=(t,e,n)=>e in t?rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>(ct(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function M(){}function Ve(t,e){for(const n in e)t[n]=e[n];return t}function ut(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ge(t){return t()}function Ne(){return Object.create(null)}function se(t){t.forEach(Ge)}function Ke(t){return typeof t=="function"}function R(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ot(t){return Object.keys(t).length===0}function h(t,e){t.appendChild(e)}function C(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function ft(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function P(t){return document.createTextNode(t)}function N(){return P(" ")}function pe(){return P("")}function Q(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function at(t){return Array.from(t.childNodes)}function K(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let de;function dt(){if(de===void 0){de=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{de=!0}}return de}function _t(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=v("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const i=dt();let s;return i?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Q(window,"message",r=>{r.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{s=Q(l.contentWindow,"resize",e),e()}),h(t,l),()=>{(i||s&&l.contentWindow)&&s(),T(l)}}function V(t,e,n){t.classList.toggle(e,!!n)}function gt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}class ht{constructor(e=!1){H(this,"is_svg",!1);H(this,"e");H(this,"n");H(this,"t");H(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=ft(n.nodeName):this.e=v(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)C(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(T)}}let ue;function x(t){ue=t}function Ae(){if(!ue)throw new Error("Function called outside component initialization");return ue}function pt(t){Ae().$$.on_mount.push(t)}function Qe(){const t=Ae();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=gt(e,n,{cancelable:l});return i.slice().forEach(r=>{r.call(t,s)}),!s.defaultPrevented}return!0}}function mt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const Z=[],G=[];let ee=[];const ye=[],bt=Promise.resolve();let we=!1;function yt(){we||(we=!0,bt.then(Ee))}function ge(t){ee.push(t)}function te(t){ye.push(t)}const be=new Set;let Y=0;function Ee(){if(Y!==0)return;const t=ue;do{try{for(;Y<Z.length;){const e=Z[Y];Y++,x(e),wt(e.$$)}}catch(e){throw Z.length=0,Y=0,e}for(x(null),Z.length=0,Y=0;G.length;)G.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];be.has(n)||(be.add(n),n())}ee.length=0}while(Z.length);for(;ye.length;)ye.pop()();we=!1,be.clear(),x(t)}function wt(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ge)}}function vt(t){const e=[],n=[];ee.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ee=e}const _e=new Set;let J;function oe(){J={r:0,c:[],p:J}}function fe(){J.r||se(J.c),J=J.p}function k(t,e){t&&t.i&&(_e.delete(t),t.i(e))}function L(t,e,n,l){if(t&&t.o){if(_e.has(t))return;_e.add(t),J.c.push(()=>{_e.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function kt(t,e){const n=e.token={};function l(i,s,r,o){if(e.token!==n)return;e.resolved=o;let u=e.ctx;r!==void 0&&(u=u.slice(),u[r]=o);const c=i&&(e.current=i)(u);let f=!1;e.block&&(e.blocks?e.blocks.forEach((a,g)=>{g!==s&&a&&(oe(),L(a,1,1,()=>{e.blocks[g]===a&&(e.blocks[g]=null)}),fe())}):e.block.d(1),c.c(),k(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[s]=c),f&&Ee()}if(ut(t)){const i=Ae();if(t.then(s=>{x(i),l(e.then,1,e.value,s),x(null)},s=>{if(x(i),l(e.catch,2,e.error,s),x(null),!e.hasCatch)throw s}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function he(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Xe(t,e){const n={},l={},i={$$scope:1};let s=t.length;for(;s--;){const r=t[s],o=e[s];if(o){for(const u in r)u in o||(l[u]=1);for(const u in o)i[u]||(n[u]=o[u],i[u]=1);t[s]=o}else for(const u in r)i[u]=1}for(const r in l)r in n||(n[r]=void 0);return n}function Ye(t){return typeof t=="object"&&t!==null?t:{}}function ne(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function q(t){t&&t.c()}function S(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),ge(()=>{const s=t.$$.on_mount.map(Ge).filter(Ke);t.$$.on_destroy?t.$$.on_destroy.push(...s):se(s),t.$$.on_mount=[]}),i.forEach(ge)}function U(t,e){const n=t.$$;n.fragment!==null&&(vt(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function At(t,e){t.$$.dirty[0]===-1&&(Z.push(t),yt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,n,l,i,s,r,o=[-1]){const u=ue;x(t);const c=t.$$={fragment:null,ctx:[],props:s,update:M,not_equal:i,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ne(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};r&&r(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(a,g,...d)=>{const y=d.length?d[0]:g;return c.ctx&&i(c.ctx[a],c.ctx[a]=y)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](y),f&&At(t,a)),g}):[],c.update(),f=!0,se(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const a=at(e.target);c.fragment&&c.fragment.l(a),a.forEach(T)}else c.fragment&&c.fragment.c();e.intro&&k(t.$$.fragment),S(t,e.target,e.anchor),Ee()}x(u)}class D{constructor(){H(this,"$$");H(this,"$$set")}$destroy(){U(this,1),this.$destroy=M}$on(e,n){if(!Ke(n))return M;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Et);function zt(){return new Worker(""+new URL("ai.worker-0495f567.js",import.meta.url).href)}let z,ie=null;function le(){return(ie===null||ie.byteLength===0)&&(ie=new Int32Array(z.memory.buffer)),ie}const Ze=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ze.decode();let re=null;function Lt(){return(re===null||re.byteLength===0)&&(re=new Uint8Array(z.memory.buffer)),re}function Tt(t,e){return t=t>>>0,Ze.decode(Lt().subarray(t,t+e))}function It(){let t,e;try{const i=z.__wbindgen_add_to_stack_pointer(-16);z.version(i);var n=le()[i/4+0],l=le()[i/4+1];return t=n,e=l,Tt(n,l)}finally{z.__wbindgen_add_to_stack_pointer(16),z.__wbindgen_free(t,e,1)}}let ce=null;function $e(){return(ce===null||ce.byteLength===0)&&(ce=new Uint32Array(z.memory.buffer)),ce}let ze=0;function et(t,e){const n=e(t.length*4,4)>>>0;return $e().set(t,n/4),ze=t.length,n}function tt(t,e){return t=t>>>0,$e().subarray(t/4,t/4+e)}function ve(t,e){try{const s=z.__wbindgen_add_to_stack_pointer(-16),r=et(t,z.__wbindgen_malloc),o=ze;z.legal_moves(s,r,o,e);var n=le()[s/4+0],l=le()[s/4+1],i=tt(n,l).slice();return z.__wbindgen_free(n,l*4),i}finally{z.__wbindgen_add_to_stack_pointer(16)}}function We(t,e,n,l){try{const o=z.__wbindgen_add_to_stack_pointer(-16),u=et(t,z.__wbindgen_malloc),c=ze;z.put(o,u,c,e,n,l);var i=le()[o/4+0],s=le()[o/4+1],r=tt(i,s).slice();return z.__wbindgen_free(i,s*4),r}finally{z.__wbindgen_add_to_stack_pointer(16)}}async function Ct(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(l){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",l);else throw l}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Mt(){const t={};return t.wbg={},t}function Nt(t,e){return z=t.exports,nt.__wbindgen_wasm_module=e,ie=null,ce=null,re=null,z}async function nt(t){if(z!==void 0)return z;typeof t>"u"&&(t=new URL(""+new URL("webai_bg-4fb1a13d.wasm",import.meta.url).href,self.location));const e=Mt();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:l}=await Ct(await t,e);return Nt(n,l)}const ke=new zt;let Wt=new Promise((t,e)=>{ke.onmessage=n=>{t()}});const Pe=1e3;async function Pt(t,e){const n=Date.now();ke.postMessage({data:t,color:e});const l=await new Promise((s,r)=>{ke.onmessage=o=>{s(o.data)}}),i=Date.now()-n;return console.log(`ai elapsed: ${i}ms`),i<Pe&&await new Promise((s,r)=>{setTimeout(()=>{s()},Pe-i)}),l}let Oe=!1;async function Ot(){if(Oe)return;await nt();const t=It();console.log(`othello ai web edition(${t}) is successfully loaded.`),Oe=!0}function St(t){let e,n;return{c(){e=new ht(!1),n=pe(),e.a=n},m(l,i){e.m(t[0],l,i),C(l,n,i)},p(l,[i]){i&1&&e.p(l[0])},i:M,o:M,d(l){l&&(T(n),e.d())}}}function Ut(t,e,n){let l=".&nbsp;&nbsp;";return pt(()=>{let i=0,s=setInterval(()=>{i++,i>3&&(i=0),n(0,l=".".repeat(i)+"&nbsp;".repeat(3-i))},300);return()=>{clearInterval(s)}}),[l]}class lt extends D{constructor(e){super(),B(this,e,Ut,St,R,{})}}function qt(t){let e,n,l,i,s,r,o;return r=new lt({}),{c(){e=v("div"),n=v("div"),l=N(),i=v("div"),s=P(t[0]),q(r.$$.fragment),p(n,"class","spinner svelte-7ywxxi"),p(e,"class","loading svelte-7ywxxi")},m(u,c){C(u,e,c),h(e,n),h(e,l),h(e,i),h(i,s),S(r,i,null),o=!0},p(u,[c]){(!o||c&1)&&K(s,u[0])},i(u){o||(k(r.$$.fragment,u),o=!0)},o(u){L(r.$$.fragment,u),o=!1},d(u){u&&T(e),U(r)}}}function jt(t,e,n){let{text:l}=e;return t.$$set=i=>{"text"in i&&n(0,l=i.text)},[l]}class Rt extends D{constructor(e){super(),B(this,e,jt,qt,R,{text:0})}}function Bt(t){let e,n,l,i,s,r,o,u,c;return{c(){e=v("label"),n=v("input"),l=N(),i=v("span"),s=N(),r=v("span"),o=P(t[1]),p(n,"type","checkbox"),p(n,"class","input svelte-15e3hob"),p(i,"class","checkmark svelte-15e3hob"),p(r,"class","span"),p(e,"class","label svelte-15e3hob")},m(f,a){C(f,e,a),h(e,n),n.checked=t[0],h(e,l),h(e,i),h(e,s),h(e,r),h(r,o),u||(c=Q(n,"change",t[2]),u=!0)},p(f,[a]){a&1&&(n.checked=f[0]),a&2&&K(o,f[1])},i:M,o:M,d(f){f&&T(e),u=!1,c()}}}function Dt(t,e,n){let{value:l=!1}=e,{text:i}=e;function s(){l=this.checked,n(0,l)}return t.$$set=r=>{"value"in r&&n(0,l=r.value),"text"in r&&n(1,i=r.text)},[l,i,s]}class Se extends D{constructor(e){super(),B(this,e,Dt,Bt,R,{value:0,text:1})}}function Ue(t){let e;return{c(){e=v("div"),p(e,"class","cover svelte-ubliqf")},m(n,l){C(n,e,l)},d(n){n&&T(e)}}}function xt(t){let e,n,l,i,s,r,o,u,c=t[1]&&Ue();return{c(){e=v("div"),n=v("div"),n.textContent="黒",l=N(),i=v("div"),i.textContent="白",s=N(),c&&c.c(),p(n,"class","black svelte-ubliqf"),p(n,"role","button"),p(n,"tabindex","0"),V(n,"select",t[0]==1),p(i,"class","white svelte-ubliqf"),p(i,"role","button"),p(i,"tabindex","0"),V(i,"select",t[0]==2),p(e,"class",r="wrap w_"+t[0]+" svelte-ubliqf")},m(f,a){C(f,e,a),h(e,n),h(e,l),h(e,i),h(e,s),c&&c.m(e,null),o||(u=[Q(n,"click",t[2]),Q(i,"click",t[3])],o=!0)},p(f,[a]){a&1&&V(n,"select",f[0]==1),a&1&&V(i,"select",f[0]==2),f[1]?c||(c=Ue(),c.c(),c.m(e,null)):c&&(c.d(1),c=null),a&1&&r!==(r="wrap w_"+f[0]+" svelte-ubliqf")&&p(e,"class",r)},i:M,o:M,d(f){f&&T(e),c&&c.d(),o=!1,se(u)}}}function Ft(t,e,n){let{select:l=1}=e,{disable:i=!1}=e;const s=()=>n(0,l=1),r=()=>n(0,l=2);return t.$$set=o=>{"select"in o&&n(0,l=o.select),"disable"in o&&n(1,i=o.disable)},[l,i,s,r]}class Ht extends D{constructor(e){super(),B(this,e,Ft,xt,R,{select:0,disable:1})}}function qe(t){let e;return{c(){e=v("div"),p(e,"class","cover svelte-1su97di")},m(n,l){C(n,e,l)},d(n){n&&T(e)}}}function Vt(t){let e,n,l,i,s,r,o,u,c,f,a,g,d,y,A,W,I,w,_,m,F,O,j,b=!t[3]&&qe();function ae(E){t[6](E)}let Le={text:"プレイヤー"};t[2]!==void 0&&(Le.value=t[2]),f=new Se({props:Le}),G.push(()=>ne(f,"value",ae));function st(E){t[7](E)}let Te={text:"AI"};t[1]!==void 0&&(Te.value=t[1]),d=new Se({props:Te}),G.push(()=>ne(d,"value",st));function it(E){t[8](E)}let Ie={disable:!t[3]};return t[0]!==void 0&&(Ie.select=t[0]),_=new Ht({props:Ie}),G.push(()=>ne(_,"select",it)),{c(){e=v("div"),n=v("div"),l=v("div"),i=v("span"),i.textContent="はじめから",s=N(),b&&b.c(),r=N(),o=v("div"),o.textContent="候補を表示",u=N(),c=v("div"),q(f.$$.fragment),g=N(),q(d.$$.fragment),A=N(),W=v("div"),W.textContent="色を選択する(ゲームがリセットされます。)",I=N(),w=v("div"),q(_.$$.fragment),p(l,"class","reset svelte-1su97di"),p(l,"role","button"),p(l,"tabindex","0"),p(n,"class","r_wrap svelte-1su97di"),p(o,"class","title svelte-1su97di"),p(c,"class","inner svelte-1su97di"),p(W,"class","title svelte-1su97di"),p(w,"class","inner svelte-1su97di"),p(e,"class","panel svelte-1su97di")},m(E,X){C(E,e,X),h(e,n),h(n,l),h(l,i),h(l,s),b&&b.m(l,null),h(e,r),h(e,o),h(e,u),h(e,c),S(f,c,null),h(c,g),S(d,c,null),h(e,A),h(e,W),h(e,I),h(e,w),S(_,w,null),F=!0,O||(j=Q(l,"click",t[5]),O=!0)},p(E,[X]){E[3]?b&&(b.d(1),b=null):b||(b=qe(),b.c(),b.m(l,null));const Ce={};!a&&X&4&&(a=!0,Ce.value=E[2],te(()=>a=!1)),f.$set(Ce);const Me={};!y&&X&2&&(y=!0,Me.value=E[1],te(()=>y=!1)),d.$set(Me);const me={};X&8&&(me.disable=!E[3]),!m&&X&1&&(m=!0,me.select=E[0],te(()=>m=!1)),_.$set(me)},i(E){F||(k(f.$$.fragment,E),k(d.$$.fragment,E),k(_.$$.fragment,E),F=!0)},o(E){L(f.$$.fragment,E),L(d.$$.fragment,E),L(_.$$.fragment,E),F=!1},d(E){E&&T(e),b&&b.d(),U(f),U(d),U(_),O=!1,j()}}}function Gt(t,e,n){let l=Qe();function i(d){l("reset",{p:d})}let{display_ai_legal:s=!0}=e,{display_player_legal:r=!0}=e,{player:o=1}=e,{free:u=!0}=e;const c=()=>{u&&i(o)};function f(d){r=d,n(2,r)}function a(d){s=d,n(1,s)}function g(d){o=d,n(0,o)}return t.$$set=d=>{"display_ai_legal"in d&&n(1,s=d.display_ai_legal),"display_player_legal"in d&&n(2,r=d.display_player_legal),"player"in d&&n(0,o=d.player),"free"in d&&n(3,u=d.free)},t.$$.update=()=>{t.$$.dirty&1&&i(o)},[o,s,r,u,i,c,f,a,g]}class Kt extends D{constructor(e){super(),B(this,e,Gt,Vt,R,{display_ai_legal:1,display_player_legal:2,player:0,free:3})}}function Jt(t){let e,n;return{c(){e=v("div"),p(e,"class",n="cell "+t[0]+" "+t[2]+" suggest "+t[3]+" svelte-1v0lz0w"),V(e,"latest",t[1])},m(l,i){C(l,e,i)},p(l,i){i&13&&n!==(n="cell "+l[0]+" "+l[2]+" suggest "+l[3]+" svelte-1v0lz0w")&&p(e,"class",n),i&15&&V(e,"latest",l[1])},d(l){l&&T(e)}}}function Qt(t){let e,n,l,i;return{c(){e=v("div"),p(e,"class",n="cell "+t[0]+" clickable suggest "+t[3]+" svelte-1v0lz0w"),p(e,"role","button"),p(e,"tabindex","0"),V(e,"latest",t[1])},m(s,r){C(s,e,r),l||(i=Q(e,"click",t[5]),l=!0)},p(s,r){r&9&&n!==(n="cell "+s[0]+" clickable suggest "+s[3]+" svelte-1v0lz0w")&&p(e,"class",n),r&11&&V(e,"latest",s[1])},d(s){s&&T(e),l=!1,i()}}}function Xt(t){let e;function n(s,r){return s[4]?Qt:Jt}let l=n(t),i=l(t);return{c(){i.c(),e=pe()},m(s,r){i.m(s,r),C(s,e,r)},p(s,[r]){l===(l=n(s))&&i?i.p(s,r):(i.d(1),i=l(s),i&&(i.c(),i.m(e.parentNode,e)))},i:M,o:M,d(s){s&&T(e),i.d(s)}}}function Yt(t,e,n){let l,i,{index:s}=e,r=Qe();function o(){l&&r("click",{index:s})}let{type:u="null"}=e,{latest:c=!1}=e,{suggest:f=!1}=e,{input:a=!1}=e,{suggest_type:g="null"}=e,d="",y=null;return t.$$set=A=>{"index"in A&&n(6,s=A.index),"type"in A&&n(0,u=A.type),"latest"in A&&n(1,c=A.latest),"suggest"in A&&n(7,f=A.suggest),"input"in A&&n(8,a=A.input),"suggest_type"in A&&n(9,g=A.suggest_type)},t.$$.update=()=>{t.$$.dirty&1025&&(u=="black"?(y=="white"?n(2,d="white_to_black"):n(2,d=""),n(10,y="black")):u=="white"?(y=="black"?n(2,d="black_to_white"):n(2,d=""),n(10,y="white")):(n(2,d=""),n(10,y=null))),t.$$.dirty&768&&n(4,l=g!="null"&&a),t.$$.dirty&640&&n(3,i=f?`s_${g}`:"s_null")},[u,c,d,i,l,o,s,f,a,g,y]}class Zt extends D{constructor(e){super(),B(this,e,Yt,Xt,R,{index:6,type:0,latest:1,suggest:7,input:8,suggest_type:9})}}function je(t,e,n){const l=t.slice();return l[9]=e[n],l[11]=n,l}function Re(t,e,n){const l=t.slice();return l[9]=e[n],l[13]=n,l}function Be(t){let e,n;const l=[t[3][t[11]*8+t[13]],{suggest:t[1]},{input:t[0]},{index:t[11]*8+t[13]}];let i={};for(let s=0;s<l.length;s+=1)i=Ve(i,l[s]);return e=new Zt({props:i}),e.$on("click",t[7]),{c(){q(e.$$.fragment)},m(s,r){S(e,s,r),n=!0},p(s,r){const o=r&11?Xe(l,[r&8&&Ye(s[3][s[11]*8+s[13]]),r&2&&{suggest:s[1]},r&1&&{input:s[0]},l[3]]):{};e.$set(o)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function De(t){let e,n,l,i=he({length:8}),s=[];for(let o=0;o<i.length;o+=1)s[o]=Be(Re(t,i,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=v("div");for(let o=0;o<s.length;o+=1)s[o].c();n=N(),p(e,"class","row svelte-1xwiqwo")},m(o,u){C(o,e,u);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);h(e,n),l=!0},p(o,u){if(u&11){i=he({length:8});let c;for(c=0;c<i.length;c+=1){const f=Re(o,i,c);s[c]?(s[c].p(f,u),k(s[c],1)):(s[c]=Be(f),s[c].c(),k(s[c],1),s[c].m(e,n))}for(oe(),c=i.length;c<s.length;c+=1)r(c);fe()}},i(o){if(!l){for(let u=0;u<i.length;u+=1)k(s[u]);l=!0}},o(o){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)L(s[u]);l=!1},d(o){o&&T(e),Je(s,o)}}}function $t(t){let e,n=`${t[2]}px`,l=`${t[2]}px`,i,s=he({length:8}),r=[];for(let u=0;u<s.length;u+=1)r[u]=De(je(t,s,u));const o=u=>L(r[u],1,1,()=>{r[u]=null});return{c(){e=v("div");for(let u=0;u<r.length;u+=1)r[u].c();p(e,"class","board svelte-1xwiqwo"),$(e,"width",n),$(e,"height",l)},m(u,c){C(u,e,c);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);i=!0},p(u,[c]){if(c&11){s=he({length:8});let f;for(f=0;f<s.length;f+=1){const a=je(u,s,f);r[f]?(r[f].p(a,c),k(r[f],1)):(r[f]=De(a),r[f].c(),k(r[f],1),r[f].m(e,null))}for(oe(),f=s.length;f<r.length;f+=1)o(f);fe()}c&4&&n!==(n=`${u[2]}px`)&&$(e,"width",n),c&4&&l!==(l=`${u[2]}px`)&&$(e,"height",l)},i(u){if(!i){for(let c=0;c<s.length;c+=1)k(r[c]);i=!0}},o(u){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)L(r[c]);i=!1},d(u){u&&T(e),Je(r,u)}}}function en(t,e,n){let{data:l}=e,{player:i=1}=e,{latest:s=null}=e,{input:r=!1}=e,{suggest:o=!0}=e,{size:u=500}=e,c;const f={type:"null",latest:!1,suggest_type:"null"};function a(g){mt.call(this,t,g)}return t.$$set=g=>{"data"in g&&n(4,l=g.data),"player"in g&&n(5,i=g.player),"latest"in g&&n(6,s=g.latest),"input"in g&&n(0,r=g.input),"suggest"in g&&n(1,o=g.suggest),"size"in g&&n(2,u=g.size)},t.$$.update=()=>{if(t.$$.dirty&112){let g=[],d=ve(l,i);for(let y=0;y<l.length;y++)if(l[y]==0)if(d.includes(y)){let A=i==1?"black":"white";g.push({...f,type:"null",latest:!1,suggest_type:A})}else g.push({...f,type:"null"});else l[y]==1?g.push({...f,type:"black"}):l[y]==2&&g.push({...f,type:"white"});s!=null&&(g[s].latest=!0),n(3,c=g)}},[r,o,u,c,l,i,s,a]}class tn extends D{constructor(e){super(),B(this,e,en,$t,R,{data:4,player:5,latest:6,input:0,suggest:1,size:2})}}function xe(t){let e,n;return e=new lt({}),{c(){q(e.$$.fragment)},m(l,i){S(e,l,i),n=!0},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function nn(t){let e,n=t[4][0]+"",l,i,s=t[0][0]+"",r,o,u=t[4][1]+"",c,f,a=t[0][1]+"",g,d,y,A,W=`${t[1]}px`,I,w=t[2]&&xe();return{c(){e=v("div"),l=P(n),i=P(":"),r=P(s),o=P(" | "),c=P(u),f=P(":"),g=P(a),d=P(" | "),y=P(t[3]),A=N(),w&&w.c(),p(e,"class","info svelte-1nn9nw6"),$(e,"width",W)},m(_,m){C(_,e,m),h(e,l),h(e,i),h(e,r),h(e,o),h(e,c),h(e,f),h(e,g),h(e,d),h(e,y),h(e,A),w&&w.m(e,null),I=!0},p(_,[m]){(!I||m&16)&&n!==(n=_[4][0]+"")&&K(l,n),(!I||m&1)&&s!==(s=_[0][0]+"")&&K(r,s),(!I||m&16)&&u!==(u=_[4][1]+"")&&K(c,u),(!I||m&1)&&a!==(a=_[0][1]+"")&&K(g,a),(!I||m&8)&&K(y,_[3]),_[2]?w?m&4&&k(w,1):(w=xe(),w.c(),k(w,1),w.m(e,null)):w&&(oe(),L(w,1,1,()=>{w=null}),fe()),m&2&&W!==(W=`${_[1]}px`)&&$(e,"width",W)},i(_){I||(k(w),I=!0)},o(_){L(w),I=!1},d(_){_&&T(e),w&&w.d()}}}function ln(t,e,n){let l,i,s,{counts:r=[2,2]}=e,{player:o=1}=e,{next:u=1}=e,{finish:c=!1}=e,{size:f=500}=e;return t.$$set=a=>{"counts"in a&&n(0,r=a.counts),"player"in a&&n(5,o=a.player),"next"in a&&n(6,u=a.next),"finish"in a&&n(7,c=a.finish),"size"in a&&n(1,f=a.size)},t.$$.update=()=>{t.$$.dirty&32&&n(4,l=o==1?["黒(あなた)","白(AI)"]:["黒(AI)","白(あなた)"]),t.$$.dirty&225&&n(3,i=c?r[o-1]>r[2-o]?"あなたの勝ち":r[o-1]<r[2-o]?"AIの勝ち":"引き分け":u==o?"あなたの番です。":"AIが考えています"),t.$$.dirty&224&&n(2,s=u!==o&&!c)},[r,f,s,i,l,o,u,c]}class sn extends D{constructor(e){super(),B(this,e,ln,nn,R,{counts:0,player:5,next:6,finish:7,size:1})}}const Fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function rn(t){let e,n,l,i,s,r,o,u,c,f,a,g;const d=[t[9],{data:t[1]},{latest:t[6]},{size:t[5]}];let y={};for(let _=0;_<d.length;_+=1)y=Ve(y,d[_]);l=new tn({props:y}),l.$on("click",t[10]),s=new sn({props:{next:t[4],counts:t[8],size:t[5],finish:t[7],player:t[0]}});function A(_){t[13](_)}function W(_){t[14](_)}function I(_){t[15](_)}let w={free:t[0]==t[4]};return t[2].suggest!==void 0&&(w.display_ai_legal=t[2].suggest),t[3].suggest!==void 0&&(w.display_player_legal=t[3].suggest),t[0]!==void 0&&(w.player=t[0]),u=new Kt({props:w}),G.push(()=>ne(u,"display_ai_legal",A)),G.push(()=>ne(u,"display_player_legal",W)),G.push(()=>ne(u,"player",I)),u.$on("reset",t[11]),{c(){e=v("div"),n=v("div"),q(l.$$.fragment),i=N(),q(s.$$.fragment),o=N(),q(u.$$.fragment),p(n,"class","main svelte-cpu8vx"),ge(()=>t[12].call(n)),p(e,"class","game svelte-cpu8vx")},m(_,m){C(_,e,m),h(e,n),S(l,n,null),h(n,i),S(s,n,null),r=_t(n,t[12].bind(n)),h(e,o),S(u,e,null),g=!0},p(_,[m]){const F=m&610?Xe(d,[m&512&&Ye(_[9]),m&2&&{data:_[1]},m&64&&{latest:_[6]},m&32&&{size:_[5]}]):{};l.$set(F);const O={};m&16&&(O.next=_[4]),m&256&&(O.counts=_[8]),m&32&&(O.size=_[5]),m&128&&(O.finish=_[7]),m&1&&(O.player=_[0]),s.$set(O);const j={};m&17&&(j.free=_[0]==_[4]),!c&&m&4&&(c=!0,j.display_ai_legal=_[2].suggest,te(()=>c=!1)),!f&&m&8&&(f=!0,j.display_player_legal=_[3].suggest,te(()=>f=!1)),!a&&m&1&&(a=!0,j.player=_[0],te(()=>a=!1)),u.$set(j)},i(_){g||(k(l.$$.fragment,_),k(s.$$.fragment,_),k(u.$$.fragment,_),g=!0)},o(_){L(l.$$.fragment,_),L(s.$$.fragment,_),L(u.$$.fragment,_),g=!1},d(_){_&&T(e),U(l),U(s),r(),U(u)}}}function cn(t,e,n){let l,i,s=500,r=1,o=null,u=!1,c=Fe;function f(){n(1,c=Fe),n(6,o=null),n(7,u=!1),n(4,d=1)}let a={suggest:!0,input:!1,player:3-r},g={suggest:!0,input:!0,player:r},d=r;async function y(){let b=await Pt(c,d);n(6,o=b),n(1,c=We(c,b,d,3-d))}function A(){return ve(c,d).length!=0}function W(){return ve(c,3-d).length!=0}let I=!1;async function w(b){if(I)return;I=!0;let ae=b.detail.index;for(n(6,o=ae),n(1,c=We(c,ae,d,3-d)),n(4,d=3-d);A()&&(await y(),!W()););n(4,d=3-d),!A()&&!W()&&n(7,u=!0),I=!1}async function _(){f(),r==2&&(await y(),n(4,d=3-d))}function m(){s=this.clientWidth,n(5,s)}function F(b){t.$$.not_equal(a.suggest,b)&&(a.suggest=b,n(2,a),n(0,r))}function O(b){t.$$.not_equal(g.suggest,b)&&(g.suggest=b,n(3,g),n(0,r))}function j(b){r=b,n(0,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(3,g.player=r,g),t.$$.dirty&1&&n(2,a.player=3-r,a),t.$$.dirty&29&&n(9,l=d==r?g:a),t.$$.dirty&2&&n(8,i=[c.filter(b=>b==1).length,c.filter(b=>b==2).length])},[r,c,a,g,d,s,o,u,i,l,w,_,m,F,O,j]}class un extends D{constructor(e){super(),B(this,e,cn,rn,R,{})}}function He(t){let e,n,l={ctx:t,current:null,token:null,hasCatch:!1,pending:an,then:fn,catch:on,blocks:[,,,]};return kt(Wt,l),{c(){e=pe(),l.block.c()},m(i,s){C(i,e,s),l.block.m(i,l.anchor=s),l.mount=()=>e.parentNode,l.anchor=e,n=!0},p(i,s){t=i},i(i){n||(k(l.block),n=!0)},o(i){for(let s=0;s<3;s+=1){const r=l.blocks[s];L(r)}n=!1},d(i){i&&T(e),l.block.d(i),l.token=null,l=null}}}function on(t){return{c:M,m:M,i:M,o:M,d:M}}function fn(t){let e,n;return e=new un({}),{c(){q(e.$$.fragment)},m(l,i){S(e,l,i),n=!0},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function an(t){let e,n;return e=new Rt({props:{text:"AIを読み込んでいます."}}),{c(){q(e.$$.fragment)},m(l,i){S(e,l,i),n=!0},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function dn(t){let e,n,l=t[0]&&He(t);return{c(){l&&l.c(),e=pe()},m(i,s){l&&l.m(i,s),C(i,e,s),n=!0},p(i,[s]){i[0]?l?s&1&&k(l,1):(l=He(i),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(oe(),L(l,1,1,()=>{l=null}),fe())},i(i){n||(k(l),n=!0)},o(i){L(l),n=!1},d(i){i&&T(e),l&&l.d(i)}}}function _n(t,e,n){let l=!1;return(async()=>l||(await Ot(),n(0,l=!0)))(),[l]}class gn extends D{constructor(e){super(),B(this,e,_n,dn,R,{})}}new gn({target:document.getElementById("app")});
