var fn=Object.defineProperty;var an=(n,e,t)=>e in n?fn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>(an(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function N(){}function dt(n,e){for(const t in e)n[t]=e[t];return n}function on(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Qt(n){return n()}function $t(){return Object.create(null)}function Ue(n){n.forEach(Qt)}function Xt(n){return typeof n=="function"}function P(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function un(n){return Object.keys(n).length===0}function dn(n,e,t,l){if(n){const s=Yt(n,e,t,l);return n[0](s)}}function Yt(n,e,t,l){return n[1]&&l?dt(t.ctx.slice(),n[1](l(e))):t.ctx}function _n(n,e,t,l){if(n[2]&&l){const s=n[2](l(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],r=Math.max(e.dirty.length,s.length);for(let f=0;f<r;f+=1)i[f]=e.dirty[f]|s[f];return i}return e.dirty|s}return e.dirty}function hn(n,e,t,l,s,i){if(s){const r=Yt(e,t,l,i);n.p(r,s)}}function gn(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let l=0;l<t;l++)e[l]=-1;return e}return-1}function o(n,e){n.appendChild(e)}function y(n,e,t){n.insertBefore(e,t||null)}function w(n){n.parentNode&&n.parentNode.removeChild(n)}function Se(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function m(n){return document.createElement(n)}function be(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function z(n){return document.createTextNode(n)}function v(){return z(" ")}function Fe(){return z("")}function we(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function _(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function pn(n){return Array.from(n.childNodes)}function U(n,e){e=""+e,n.data!==e&&(n.data=e)}function re(n,e,t,l){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,l?"important":"")}let tt;function mn(){if(tt===void 0){tt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{tt=!0}}return tt}function en(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const l=m("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const s=mn();let i;return s?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=we(window,"message",r=>{r.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{i=we(l.contentWindow,"resize",e),e()}),o(n,l),()=>{(s||i&&l.contentWindow)&&i(),w(l)}}function te(n,e,t){n.classList.toggle(e,!!t)}function vn(n,e,{bubbles:t=!1,cancelable:l=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:l})}class bn{constructor(e=!1){ve(this,"is_svg",!1);ve(this,"e");ve(this,"n");ve(this,"t");ve(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,l=null){this.e||(this.is_svg?this.e=be(t.nodeName):this.e=m(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)y(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(w)}}let Ze;function ue(n){Ze=n}function _t(){if(!Ze)throw new Error("Function called outside component initialization");return Ze}function it(n){_t().$$.on_mount.push(n)}function rt(){const n=_t();return(e,t,{cancelable:l=!1}={})=>{const s=n.$$.callbacks[e];if(s){const i=vn(e,t,{cancelable:l});return s.slice().forEach(r=>{r.call(n,i)}),!i.defaultPrevented}return!0}}function wn(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(l=>l.call(this,e))}const We=[],de=[];let He=[];const at=[],yn=Promise.resolve();let ot=!1;function kn(){ot||(ot=!0,yn.then(ht))}function Qe(n){He.push(n)}function je(n){at.push(n)}const ct=new Set;let Oe=0;function ht(){if(Oe!==0)return;const n=Ze;do{try{for(;Oe<We.length;){const e=We[Oe];Oe++,ue(e),$n(e.$$)}}catch(e){throw We.length=0,Oe=0,e}for(ue(null),We.length=0,Oe=0;de.length;)de.pop()();for(let e=0;e<He.length;e+=1){const t=He[e];ct.has(t)||(ct.add(t),t())}He.length=0}while(We.length);for(;at.length;)at.pop()();ot=!1,ct.clear(),ue(n)}function $n(n){if(n.fragment!==null){n.update(),Ue(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Qe)}}function Cn(n){const e=[],t=[];He.forEach(l=>n.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),He=e}const nt=new Set;let xe;function ye(){xe={r:0,c:[],p:xe}}function ke(){xe.r||Ue(xe.c),xe=xe.p}function k(n,e){n&&n.i&&(nt.delete(n),n.i(e))}function C(n,e,t,l){if(n&&n.o){if(nt.has(n))return;nt.add(n),xe.c.push(()=>{nt.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}function In(n,e){const t=e.token={};function l(s,i,r,f){if(e.token!==t)return;e.resolved=f;let c=e.ctx;r!==void 0&&(c=c.slice(),c[r]=f);const a=s&&(e.current=s)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,p)=>{p!==i&&d&&(ye(),C(d,1,1,()=>{e.blocks[p]===d&&(e.blocks[p]=null)}),ke())}):e.block.d(1),a.c(),k(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[i]=a),u&&ht()}if(on(n)){const s=_t();if(n.then(i=>{ue(s),l(e.then,1,e.value,i),ue(null)},i=>{if(ue(s),l(e.catch,2,e.error,i),ue(null),!e.hasCatch)throw i}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,n),!0;e.resolved=n}}function Z(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function tn(n,e){const t={},l={},s={$$scope:1};let i=n.length;for(;i--;){const r=n[i],f=e[i];if(f){for(const c in r)c in f||(l[c]=1);for(const c in f)s[c]||(t[c]=f[c],s[c]=1);n[i]=f}else for(const c in r)s[c]=1}for(const r in l)r in t||(t[r]=void 0);return t}function nn(n){return typeof n=="object"&&n!==null?n:{}}function Ee(n,e,t){const l=n.$$.props[e];l!==void 0&&(n.$$.bound[l]=t,t(n.$$.ctx[l]))}function S(n){n&&n.c()}function B(n,e,t){const{fragment:l,after_update:s}=n.$$;l&&l.m(e,t),Qe(()=>{const i=n.$$.on_mount.map(Qt).filter(Xt);n.$$.on_destroy?n.$$.on_destroy.push(...i):Ue(i),n.$$.on_mount=[]}),s.forEach(Qe)}function x(n,e){const t=n.$$;t.fragment!==null&&(Cn(t.after_update),Ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function An(n,e){n.$$.dirty[0]===-1&&(We.push(n),kn(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function O(n,e,t,l,s,i,r,f=[-1]){const c=Ze;ue(n);const a=n.$$={fragment:null,ctx:[],props:i,update:N,not_equal:s,bound:$t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:$t(),dirty:f,skip_bound:!1,root:e.target||c.$$.root};r&&r(a.root);let u=!1;if(a.ctx=t?t(n,e.props||{},(d,p,...h)=>{const $=h.length?h[0]:p;return a.ctx&&s(a.ctx[d],a.ctx[d]=$)&&(!a.skip_bound&&a.bound[d]&&a.bound[d]($),u&&An(n,d)),p}):[],a.update(),u=!0,Ue(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const d=pn(e.target);a.fragment&&a.fragment.l(d),d.forEach(w)}else a.fragment&&a.fragment.c();e.intro&&k(n.$$.fragment),B(n,e.target,e.anchor),ht()}ue(c)}class W{constructor(){ve(this,"$$");ve(this,"$$set")}$destroy(){x(this,1),this.$destroy=N}$on(e,t){if(!Xt(t))return N;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const s=l.indexOf(t);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!un(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zn);function Mn(){return new Worker(""+new URL("ai.worker-ec4ed721.js",import.meta.url).href)}const ut=new Mn;let Bn=new Promise((n,e)=>{ut.onmessage=t=>{n()}});const Ct=1e3;async function xn(n,e){const t=Date.now();ut.postMessage({data:n,color:e});const l=await new Promise((i,r)=>{ut.onmessage=f=>{i(f.data)}}),s=Date.now()-t;return console.log(`ai elapsed: ${s}ms`),s<Ct&&await new Promise((i,r)=>{setTimeout(()=>{i()},Ct-s)}),l}function jn(n){let e,t;return{c(){e=new bn(!1),t=Fe(),e.a=t},m(l,s){e.m(n[0],l,s),y(l,t,s)},p(l,[s]){s&1&&e.p(l[0])},i:N,o:N,d(l){l&&(w(t),e.d())}}}function En(n,e,t){let l=".&nbsp;&nbsp;";return it(()=>{let s=0,i=setInterval(()=>{s++,s>3&&(s=0),t(0,l=".".repeat(s)+"&nbsp;".repeat(3-s))},300);return()=>{clearInterval(i)}}),[l]}class ln extends W{constructor(e){super(),O(this,e,En,jn,P,{})}}function Sn(n){let e,t,l,s,i,r,f;return r=new ln({}),{c(){e=m("div"),t=m("div"),l=v(),s=m("div"),i=z(n[0]),S(r.$$.fragment),_(t,"class","spinner svelte-7ywxxi"),_(e,"class","loading svelte-7ywxxi")},m(c,a){y(c,e,a),o(e,t),o(e,l),o(e,s),o(s,i),B(r,s,null),f=!0},p(c,[a]){(!f||a&1)&&U(i,c[0])},i(c){f||(k(r.$$.fragment,c),f=!0)},o(c){C(r.$$.fragment,c),f=!1},d(c){c&&w(e),x(r)}}}function Ln(n,e,t){let{text:l}=e;return n.$$set=s=>{"text"in s&&t(0,l=s.text)},[l]}class qn extends W{constructor(e){super(),O(this,e,Ln,Sn,P,{text:0})}}function Nn(n){let e,t,l,s,i,r,f,c,a;return{c(){e=m("label"),t=m("input"),l=v(),s=m("span"),i=v(),r=m("span"),f=z(n[1]),_(t,"type","checkbox"),_(t,"class","input svelte-15e3hob"),_(s,"class","checkmark svelte-15e3hob"),_(r,"class","span"),_(e,"class","label svelte-15e3hob")},m(u,d){y(u,e,d),o(e,t),t.checked=n[0],o(e,l),o(e,s),o(e,i),o(e,r),o(r,f),c||(a=we(t,"change",n[2]),c=!0)},p(u,[d]){d&1&&(t.checked=u[0]),d&2&&U(f,u[1])},i:N,o:N,d(u){u&&w(e),c=!1,a()}}}function Tn(n,e,t){let{value:l=!1}=e,{text:s}=e;function i(){l=this.checked,t(0,l)}return n.$$set=r=>{"value"in r&&t(0,l=r.value),"text"in r&&t(1,s=r.text)},[l,s,i]}class It extends W{constructor(e){super(),O(this,e,Tn,Nn,P,{value:0,text:1})}}function At(n){let e;return{c(){e=m("div"),_(e,"class","cover svelte-ubliqf")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Pn(n){let e,t,l,s,i,r,f,c,a=n[1]&&At();return{c(){e=m("div"),t=m("div"),t.textContent="黒",l=v(),s=m("div"),s.textContent="白",i=v(),a&&a.c(),_(t,"class","black svelte-ubliqf"),_(t,"role","button"),_(t,"tabindex","0"),te(t,"select",n[0]==1),_(s,"class","white svelte-ubliqf"),_(s,"role","button"),_(s,"tabindex","0"),te(s,"select",n[0]==2),_(e,"class",r="wrap w_"+n[0]+" svelte-ubliqf")},m(u,d){y(u,e,d),o(e,t),o(e,l),o(e,s),o(e,i),a&&a.m(e,null),f||(c=[we(t,"click",n[2]),we(s,"click",n[3])],f=!0)},p(u,[d]){d&1&&te(t,"select",u[0]==1),d&1&&te(s,"select",u[0]==2),u[1]?a||(a=At(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),d&1&&r!==(r="wrap w_"+u[0]+" svelte-ubliqf")&&_(e,"class",r)},i:N,o:N,d(u){u&&w(e),a&&a.d(),f=!1,Ue(c)}}}function On(n,e,t){let{select:l=1}=e,{disable:s=!1}=e;const i=()=>t(0,l=1),r=()=>t(0,l=2);return n.$$set=f=>{"select"in f&&t(0,l=f.select),"disable"in f&&t(1,s=f.disable)},[l,s,i,r]}class Wn extends W{constructor(e){super(),O(this,e,On,Pn,P,{select:0,disable:1})}}function zt(n){let e;return{c(){e=m("div"),_(e,"class","cover svelte-1sioc2l")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Rn(n){let e,t,l,s,i,r,f,c,a,u,d,p,h,$,b,M,L,j,g,A,J,R,F,E=!n[3]&&zt();function D(q){n[6](q)}let _e={text:"プレイヤー"};n[2]!==void 0&&(_e.value=n[2]),u=new It({props:_e}),de.push(()=>Ee(u,"value",D));function ne(q){n[7](q)}let ce={text:"AI"};n[1]!==void 0&&(ce.value=n[1]),h=new It({props:ce}),de.push(()=>Ee(h,"value",ne));function fe(q){n[8](q)}let V={disable:!n[3]};return n[0]!==void 0&&(V.select=n[0]),g=new Wn({props:V}),de.push(()=>Ee(g,"select",fe)),{c(){e=m("div"),t=m("div"),l=m("div"),s=m("span"),s.textContent="はじめから",i=v(),E&&E.c(),r=v(),f=m("div"),f.textContent="候補を表示",c=v(),a=m("div"),S(u.$$.fragment),p=v(),S(h.$$.fragment),b=v(),M=m("div"),M.textContent="色を選択する(ゲームがリセットされます。)",L=v(),j=m("div"),S(g.$$.fragment),_(l,"class","reset svelte-1sioc2l"),_(l,"role","button"),_(l,"tabindex","0"),_(t,"class","r_wrap svelte-1sioc2l"),_(f,"class","title svelte-1sioc2l"),_(a,"class","inner svelte-1sioc2l"),_(M,"class","title svelte-1sioc2l"),_(j,"class","inner svelte-1sioc2l"),_(e,"class","panel svelte-1sioc2l")},m(q,Q){y(q,e,Q),o(e,t),o(t,l),o(l,s),o(l,i),E&&E.m(l,null),o(e,r),o(e,f),o(e,c),o(e,a),B(u,a,null),o(a,p),B(h,a,null),o(e,b),o(e,M),o(e,L),o(e,j),B(g,j,null),J=!0,R||(F=we(l,"click",n[5]),R=!0)},p(q,[Q]){q[3]?E&&(E.d(1),E=null):E||(E=zt(),E.c(),E.m(l,null));const X={};!d&&Q&4&&(d=!0,X.value=q[2],je(()=>d=!1)),u.$set(X);const Y={};!$&&Q&2&&($=!0,Y.value=q[1],je(()=>$=!1)),h.$set(Y);const le={};Q&8&&(le.disable=!q[3]),!A&&Q&1&&(A=!0,le.select=q[0],je(()=>A=!1)),g.$set(le)},i(q){J||(k(u.$$.fragment,q),k(h.$$.fragment,q),k(g.$$.fragment,q),J=!0)},o(q){C(u.$$.fragment,q),C(h.$$.fragment,q),C(g.$$.fragment,q),J=!1},d(q){q&&w(e),E&&E.d(),x(u),x(h),x(g),R=!1,F()}}}function Hn(n,e,t){let l=rt();function s(h){l("reset",{p:h})}let{display_ai_legal:i=!0}=e,{display_player_legal:r=!0}=e,{player:f=1}=e,{free:c=!0}=e;const a=()=>{c&&s(f)};function u(h){r=h,t(2,r)}function d(h){i=h,t(1,i)}function p(h){f=h,t(0,f)}return n.$$set=h=>{"display_ai_legal"in h&&t(1,i=h.display_ai_legal),"display_player_legal"in h&&t(2,r=h.display_player_legal),"player"in h&&t(0,f=h.player),"free"in h&&t(3,c=h.free)},n.$$.update=()=>{n.$$.dirty&1&&s(f)},[f,i,r,c,s,a,u,d,p]}class Un extends W{constructor(e){super(),O(this,e,Hn,Rn,P,{display_ai_legal:1,display_player_legal:2,player:0,free:3})}}const lt=[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];function st(n,e){return 0<=n&&n<8?0<=e&&e<8:!1}function Mt(n,e,t){let l=[],s=3-t,i=e%8,r=Math.floor(e/8);if(n[e]!==0)throw"すでに石が置かれていました";for(let c=0;c<8;c++){let a=lt[c][0],u=lt[c][1],d=[],p=i+a,h=r+u;for(;st(p,h)&&n[h*8+p]==s;)d.push(h*8+p),p+=a,h+=u;st(p,h)&&n[h*8+p]==t&&(l=[...l,...d])}if(l.length==0)throw"置けません";let f=[...n];for(let c=0;c<l.length;c++)f[l[c]]=t;return f[e]=t,f}function sn(n,e,t){let l=3-t,s=e%8,i=Math.floor(e/8);if(n[e]!==0)return!1;for(let r=0;r<8;r++){let f=lt[r][0],c=lt[r][1],a=s+f,u=i+c,d=!1;for(;st(a,u)&&n[u*8+a]==l;)d=!0,a+=f,u+=c;if(st(a,u)&&n[u*8+a]==t&&d)return!0}return!1}function Fn(n,e){let t=[];for(let l=0;l<64;l++)sn(n,l,e)&&t.push(l);return t}function Bt(n,e){for(let t=0;t<64;t++)if(sn(n,t,e))return!0;return!1}function Dn(n){let e,t;return{c(){e=m("div"),_(e,"class",t="cell "+n[0]+" "+n[2]+" suggest "+n[3]+" svelte-1v0lz0w"),te(e,"latest",n[1])},m(l,s){y(l,e,s)},p(l,s){s&13&&t!==(t="cell "+l[0]+" "+l[2]+" suggest "+l[3]+" svelte-1v0lz0w")&&_(e,"class",t),s&15&&te(e,"latest",l[1])},d(l){l&&w(e)}}}function Gn(n){let e,t,l,s;return{c(){e=m("div"),_(e,"class",t="cell "+n[0]+" clickable suggest "+n[3]+" svelte-1v0lz0w"),_(e,"role","button"),_(e,"tabindex","0"),te(e,"latest",n[1])},m(i,r){y(i,e,r),l||(s=we(e,"click",n[5]),l=!0)},p(i,r){r&9&&t!==(t="cell "+i[0]+" clickable suggest "+i[3]+" svelte-1v0lz0w")&&_(e,"class",t),r&11&&te(e,"latest",i[1])},d(i){i&&w(e),l=!1,s()}}}function Jn(n){let e;function t(i,r){return i[4]?Gn:Dn}let l=t(n),s=l(n);return{c(){s.c(),e=Fe()},m(i,r){s.m(i,r),y(i,e,r)},p(i,[r]){l===(l=t(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},i:N,o:N,d(i){i&&w(e),s.d(i)}}}function Vn(n,e,t){let l,s,{index:i}=e,r=rt();function f(){l&&r("click",{index:i})}let{type:c="null"}=e,{latest:a=!1}=e,{suggest:u=!1}=e,{input:d=!1}=e,{suggest_type:p="null"}=e,h="",$=null;return n.$$set=b=>{"index"in b&&t(6,i=b.index),"type"in b&&t(0,c=b.type),"latest"in b&&t(1,a=b.latest),"suggest"in b&&t(7,u=b.suggest),"input"in b&&t(8,d=b.input),"suggest_type"in b&&t(9,p=b.suggest_type)},n.$$.update=()=>{n.$$.dirty&1025&&(c=="black"?($=="white"?t(2,h="white_to_black"):t(2,h=""),t(10,$="black")):c=="white"?($=="black"?t(2,h="black_to_white"):t(2,h=""),t(10,$="white")):(t(2,h=""),t(10,$=null))),n.$$.dirty&768&&t(4,l=p!="null"&&d),n.$$.dirty&640&&t(3,s=u?`s_${p}`:"s_null")},[c,a,h,s,l,f,i,u,d,p,$]}class Kn extends W{constructor(e){super(),O(this,e,Vn,Jn,P,{index:6,type:0,latest:1,suggest:7,input:8,suggest_type:9})}}function xt(n,e,t){const l=n.slice();return l[9]=e[t],l[11]=t,l}function jt(n,e,t){const l=n.slice();return l[9]=e[t],l[13]=t,l}function Et(n){let e,t;const l=[n[3][n[11]*8+n[13]],{suggest:n[1]},{input:n[0]},{index:n[11]*8+n[13]}];let s={};for(let i=0;i<l.length;i+=1)s=dt(s,l[i]);return e=new Kn({props:s}),e.$on("click",n[7]),{c(){S(e.$$.fragment)},m(i,r){B(e,i,r),t=!0},p(i,r){const f=r&11?tn(l,[r&8&&nn(i[3][i[11]*8+i[13]]),r&2&&{suggest:i[1]},r&1&&{input:i[0]},l[3]]):{};e.$set(f)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){x(e,i)}}}function St(n){let e,t,l,s=Z({length:8}),i=[];for(let f=0;f<s.length;f+=1)i[f]=Et(jt(n,s,f));const r=f=>C(i[f],1,1,()=>{i[f]=null});return{c(){e=m("div");for(let f=0;f<i.length;f+=1)i[f].c();t=v(),_(e,"class","row svelte-1xwiqwo")},m(f,c){y(f,e,c);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);o(e,t),l=!0},p(f,c){if(c&11){s=Z({length:8});let a;for(a=0;a<s.length;a+=1){const u=jt(f,s,a);i[a]?(i[a].p(u,c),k(i[a],1)):(i[a]=Et(u),i[a].c(),k(i[a],1),i[a].m(e,t))}for(ye(),a=s.length;a<i.length;a+=1)r(a);ke()}},i(f){if(!l){for(let c=0;c<s.length;c+=1)k(i[c]);l=!0}},o(f){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)C(i[c]);l=!1},d(f){f&&w(e),Se(i,f)}}}function Zn(n){let e,t=`${n[2]}px`,l=`${n[2]}px`,s,i=Z({length:8}),r=[];for(let c=0;c<i.length;c+=1)r[c]=St(xt(n,i,c));const f=c=>C(r[c],1,1,()=>{r[c]=null});return{c(){e=m("div");for(let c=0;c<r.length;c+=1)r[c].c();_(e,"class","board svelte-1xwiqwo"),re(e,"width",t),re(e,"height",l)},m(c,a){y(c,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);s=!0},p(c,[a]){if(a&11){i=Z({length:8});let u;for(u=0;u<i.length;u+=1){const d=xt(c,i,u);r[u]?(r[u].p(d,a),k(r[u],1)):(r[u]=St(d),r[u].c(),k(r[u],1),r[u].m(e,null))}for(ye(),u=i.length;u<r.length;u+=1)f(u);ke()}a&4&&t!==(t=`${c[2]}px`)&&re(e,"width",t),a&4&&l!==(l=`${c[2]}px`)&&re(e,"height",l)},i(c){if(!s){for(let a=0;a<i.length;a+=1)k(r[a]);s=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)C(r[a]);s=!1},d(c){c&&w(e),Se(r,c)}}}function Qn(n,e,t){let{data:l}=e,{player:s=1}=e,{latest:i=null}=e,{input:r=!1}=e,{suggest:f=!0}=e,{size:c=500}=e,a;const u={type:"null",latest:!1,suggest_type:"null"};function d(p){wn.call(this,n,p)}return n.$$set=p=>{"data"in p&&t(4,l=p.data),"player"in p&&t(5,s=p.player),"latest"in p&&t(6,i=p.latest),"input"in p&&t(0,r=p.input),"suggest"in p&&t(1,f=p.suggest),"size"in p&&t(2,c=p.size)},n.$$.update=()=>{if(n.$$.dirty&112){let p=[],h=Fn(l,s);for(let $=0;$<l.length;$++)if(l[$]==0)if(h.includes($)){let b=s==1?"black":"white";p.push({...u,type:"null",latest:!1,suggest_type:b})}else p.push({...u,type:"null"});else l[$]==1?p.push({...u,type:"black"}):l[$]==2&&p.push({...u,type:"white"});i!=null&&(p[i].latest=!0),t(3,a=p)}},[r,f,c,a,l,s,i,d]}class Xn extends W{constructor(e){super(),O(this,e,Qn,Zn,P,{data:4,player:5,latest:6,input:0,suggest:1,size:2})}}function Lt(n){let e,t;return e=new ln({}),{c(){S(e.$$.fragment)},m(l,s){B(e,l,s),t=!0},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Yn(n){let e,t=n[4][0]+"",l,s,i=n[0][0]+"",r,f,c=n[4][1]+"",a,u,d=n[0][1]+"",p,h,$,b,M=`${n[1]}px`,L,j=n[2]&&Lt();return{c(){e=m("div"),l=z(t),s=z(": "),r=z(i),f=z(" | "),a=z(c),u=z(": "),p=z(d),h=z(" | "),$=z(n[3]),b=v(),j&&j.c(),_(e,"class","info svelte-1nn9nw6"),re(e,"width",M)},m(g,A){y(g,e,A),o(e,l),o(e,s),o(e,r),o(e,f),o(e,a),o(e,u),o(e,p),o(e,h),o(e,$),o(e,b),j&&j.m(e,null),L=!0},p(g,[A]){(!L||A&16)&&t!==(t=g[4][0]+"")&&U(l,t),(!L||A&1)&&i!==(i=g[0][0]+"")&&U(r,i),(!L||A&16)&&c!==(c=g[4][1]+"")&&U(a,c),(!L||A&1)&&d!==(d=g[0][1]+"")&&U(p,d),(!L||A&8)&&U($,g[3]),g[2]?j?A&4&&k(j,1):(j=Lt(),j.c(),k(j,1),j.m(e,null)):j&&(ye(),C(j,1,1,()=>{j=null}),ke()),A&2&&M!==(M=`${g[1]}px`)&&re(e,"width",M)},i(g){L||(k(j),L=!0)},o(g){C(j),L=!1},d(g){g&&w(e),j&&j.d()}}}function el(n,e,t){let l,s,i,{counts:r=[2,2]}=e,{player:f=1}=e,{next:c=1}=e,{finish:a=!1}=e,{size:u=500}=e;return n.$$set=d=>{"counts"in d&&t(0,r=d.counts),"player"in d&&t(5,f=d.player),"next"in d&&t(6,c=d.next),"finish"in d&&t(7,a=d.finish),"size"in d&&t(1,u=d.size)},n.$$.update=()=>{n.$$.dirty&32&&t(4,l=f==1?["黒(あなた)","白(AI)"]:["黒(AI)","白(あなた)"]),n.$$.dirty&225&&t(3,s=a?r[f-1]>r[2-f]?"あなたの勝ち":r[f-1]<r[2-f]?"AIの勝ち":"引き分け":c==f?"あなたの番です。":"AIが考えています"),n.$$.dirty&224&&t(2,i=c!==f&&!a)},[r,u,i,s,l,f,c,a]}class tl extends W{constructor(e){super(),O(this,e,el,Yn,P,{counts:0,player:5,next:6,finish:7,size:1})}}const qt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function nl(n){let e,t,l,s,i,r,f,c,a,u,d,p;const h=[n[9],{data:n[1]},{latest:n[6]},{size:n[5]}];let $={};for(let g=0;g<h.length;g+=1)$=dt($,h[g]);l=new Xn({props:$}),l.$on("click",n[10]),i=new tl({props:{next:n[4],counts:n[8],size:n[5],finish:n[7],player:n[0]}});function b(g){n[13](g)}function M(g){n[14](g)}function L(g){n[15](g)}let j={free:n[0]==n[4]};return n[2].suggest!==void 0&&(j.display_ai_legal=n[2].suggest),n[3].suggest!==void 0&&(j.display_player_legal=n[3].suggest),n[0]!==void 0&&(j.player=n[0]),c=new Un({props:j}),de.push(()=>Ee(c,"display_ai_legal",b)),de.push(()=>Ee(c,"display_player_legal",M)),de.push(()=>Ee(c,"player",L)),c.$on("reset",n[11]),{c(){e=m("div"),t=m("div"),S(l.$$.fragment),s=v(),S(i.$$.fragment),f=v(),S(c.$$.fragment),_(t,"class","main svelte-cpu8vx"),Qe(()=>n[12].call(t)),_(e,"class","game svelte-cpu8vx")},m(g,A){y(g,e,A),o(e,t),B(l,t,null),o(t,s),B(i,t,null),r=en(t,n[12].bind(t)),o(e,f),B(c,e,null),p=!0},p(g,[A]){const J=A&610?tn(h,[A&512&&nn(g[9]),A&2&&{data:g[1]},A&64&&{latest:g[6]},A&32&&{size:g[5]}]):{};l.$set(J);const R={};A&16&&(R.next=g[4]),A&256&&(R.counts=g[8]),A&32&&(R.size=g[5]),A&128&&(R.finish=g[7]),A&1&&(R.player=g[0]),i.$set(R);const F={};A&17&&(F.free=g[0]==g[4]),!a&&A&4&&(a=!0,F.display_ai_legal=g[2].suggest,je(()=>a=!1)),!u&&A&8&&(u=!0,F.display_player_legal=g[3].suggest,je(()=>u=!1)),!d&&A&1&&(d=!0,F.player=g[0],je(()=>d=!1)),c.$set(F)},i(g){p||(k(l.$$.fragment,g),k(i.$$.fragment,g),k(c.$$.fragment,g),p=!0)},o(g){C(l.$$.fragment,g),C(i.$$.fragment,g),C(c.$$.fragment,g),p=!1},d(g){g&&w(e),x(l),x(i),r(),x(c)}}}function ll(n,e,t){let l,s,i=500,r=1,f=null,c=!1,a=qt;function u(){t(1,a=qt),t(6,f=null),t(7,c=!1),t(4,h=1)}let d={suggest:!0,input:!1,player:3-r},p={suggest:!0,input:!0,player:r},h=r;async function $(){let E=await xn(a,h);t(6,f=E),t(1,a=Mt(a,E,h))}function b(){return Bt(a,h)}function M(){return Bt(a,3-h)}let L=!1;async function j(E){if(L)return;L=!0;let D=E.detail.index;for(t(6,f=D),t(1,a=Mt(a,D,h)),t(4,h=3-h);b()&&(await $(),!M()););t(4,h=3-h),!b()&&!M()&&t(7,c=!0),L=!1}async function g(){u(),r==2&&(await $(),t(4,h=3-h))}function A(){i=this.clientWidth,t(5,i)}function J(E){n.$$.not_equal(d.suggest,E)&&(d.suggest=E,t(2,d),t(0,r))}function R(E){n.$$.not_equal(p.suggest,E)&&(p.suggest=E,t(3,p),t(0,r))}function F(E){r=E,t(0,r)}return n.$$.update=()=>{n.$$.dirty&1&&t(3,p.player=r,p),n.$$.dirty&1&&t(2,d.player=3-r,d),n.$$.dirty&29&&t(9,l=h==r?p:d),n.$$.dirty&2&&t(8,s=[a.filter(E=>E==1).length,a.filter(E=>E==2).length])},[r,a,d,p,h,i,f,c,s,l,j,g,A,J,R,F]}class sl extends W{constructor(e){super(),O(this,e,ll,nl,P,{})}}function il(n){let e,t;const l=n[1].default,s=dn(l,n,n[0],null);return{c(){e=m("div"),s&&s.c(),_(e,"class","title svelte-w8pvte")},m(i,r){y(i,e,r),s&&s.m(e,null),t=!0},p(i,[r]){s&&s.p&&(!t||r&1)&&hn(s,l,i,i[0],t?_n(l,i[0],r,null):gn(i[0]),null)},i(i){t||(k(s,i),t=!0)},o(i){C(s,i),t=!1},d(i){i&&w(e),s&&s.d(i)}}}function rl(n,e,t){let{$$slots:l={},$$scope:s}=e;return n.$$set=i=>{"$$scope"in i&&t(0,s=i.$$scope)},[s,l]}class ft extends W{constructor(e){super(),O(this,e,rl,il,P,{})}}function Nt(n,e,t){const l=n.slice();return l[4]=e[t],l[6]=t,l}function Tt(n){let e,t=n[4]+"",l,s,i,r;function f(){return n[3](n[6])}return{c(){e=m("div"),l=z(t),s=v(),_(e,"class","item svelte-rvcr6i"),_(e,"role","button"),_(e,"tabindex","0"),te(e,"select",n[6]==n[0])},m(c,a){y(c,e,a),o(e,l),o(e,s),i||(r=we(e,"click",f),i=!0)},p(c,a){n=c,a&2&&t!==(t=n[4]+"")&&U(l,t),a&1&&te(e,"select",n[6]==n[0])},d(c){c&&w(e),i=!1,r()}}}function cl(n){let e,t=Z(n[1]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Tt(Nt(n,t,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();_(e,"class","wrap svelte-rvcr6i")},m(s,i){y(s,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,[i]){if(i&7){t=Z(s[1]);let r;for(r=0;r<t.length;r+=1){const f=Nt(s,t,r);l[r]?l[r].p(f,i):(l[r]=Tt(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},i:N,o:N,d(s){s&&w(e),Se(l,s)}}}function fl(n,e,t){let{select:l=null}=e,{values:s=[]}=e;function i(f){f==l?t(0,l=null):t(0,l=f)}const r=f=>{i(f)};return n.$$set=f=>{"select"in f&&t(0,l=f.select),"values"in f&&t(1,s=f.values)},[l,s,i,r]}class al extends W{constructor(e){super(),O(this,e,fl,cl,P,{select:0,values:1})}}function Pt(n){let e,t,l;return{c(){e=be("path"),_(e,"d",t="M"+(n[6]*n[0]+n[5])+",100 L"+n[4]+",0 "),_(e,"stroke",l=n[2]===1?"red":"blue"),_(e,"stroke-width","3")},m(s,i){y(s,e,i)},p(s,i){i&113&&t!==(t="M"+(s[6]*s[0]+s[5])+",100 L"+s[4]+",0 ")&&_(e,"d",t),i&4&&l!==(l=s[2]===1?"red":"blue")&&_(e,"stroke",l)},d(s){s&&w(e)}}}function Ot(n){let e=n[1],t,l=Wt(n);return{c(){l.c(),t=Fe()},m(s,i){l.m(s,i),y(s,t,i)},p(s,i){i&2&&P(e,e=s[1])?(l.d(1),l=Wt(s),l.c(),l.m(t.parentNode,t)):l.p(s,i)},d(s){s&&w(t),l.d(s)}}}function Wt(n){let e,t,l,s,i;return{c(){e=m("div"),t=be("svg"),l=be("path"),_(l,"d",s="M"+n[4]+",0 L"+(n[6]*n[1]+n[5])+",100"),_(l,"stroke","green"),_(l,"stroke-width","3"),_(t,"viewBox",i="0 0 "+n[3]+" 100"),_(t,"class","line svelte-1izpj23"),_(e,"class","line_box svelte-1izpj23")},m(r,f){y(r,e,f),o(e,t),o(t,l)},p(r,f){f&114&&s!==(s="M"+r[4]+",0 L"+(r[6]*r[1]+r[5])+",100")&&_(l,"d",s),f&8&&i!==(i="0 0 "+r[3]+" 100")&&_(t,"viewBox",i)},d(r){r&&w(e)}}}function ol(n){let e,t,l,s,i,r,f=n[0]!==null&&Pt(n),c=n[1]!==null&&Ot(n);return{c(){e=m("div"),t=be("svg"),l=be("path"),f&&f.c(),i=v(),c&&c.c(),_(l,"d",n[7]),_(l,"stroke","black"),_(l,"stroke-width","1"),_(t,"viewBox",s="0 0 "+n[3]+" 100"),_(e,"class","svelte-1izpj23"),Qe(()=>n[9].call(e))},m(a,u){y(a,e,u),o(e,t),o(t,l),f&&f.m(t,null),o(e,i),c&&c.m(e,null),r=en(e,n[9].bind(e))},p(a,[u]){u&128&&_(l,"d",a[7]),a[0]!==null?f?f.p(a,u):(f=Pt(a),f.c(),f.m(t,null)):f&&(f.d(1),f=null),u&8&&s!==(s="0 0 "+a[3]+" 100")&&_(t,"viewBox",s),a[1]!==null?c?c.p(a,u):(c=Ot(a),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:N,o:N,d(a){a&&w(e),f&&f.d(),c&&c.d(),r()}}}function ul(n,e,t){let l,s,i,r,{lines:f=2}=e,{select:c=null}=e,{check:a=null}=e,{mode:u=1}=e,d=100;function p(){d=this.clientWidth,t(3,d)}return n.$$set=h=>{"lines"in h&&t(8,f=h.lines),"select"in h&&t(0,c=h.select),"check"in h&&t(1,a=h.check),"mode"in h&&t(2,u=h.mode)},n.$$.update=()=>{if(n.$$.dirty&264&&t(6,l=d/f),n.$$.dirty&264&&t(5,s=d/f/2),n.$$.dirty&8&&t(4,i=d/2),n.$$.dirty&368){let h="";for(let $=0;$<f;$++)h+=`M${l*$+s},100 L${i},0 `;t(7,r=h)}},t(7,r=""),[c,a,u,d,i,s,l,r,f,p]}class dl extends W{constructor(e){super(),O(this,e,ul,ol,P,{lines:8,select:0,check:1,mode:2})}}function _l(n){let e,t,l,s;return{c(){e=m("div"),t=m("div"),l=m("span"),s=z(n[0]),_(l,"class","svelte-ed4d3x"),_(t,"class","value svelte-ed4d3x"),_(e,"class","box svelte-ed4d3x")},m(i,r){y(i,e,r),o(e,t),o(t,l),o(l,s)},p(i,[r]){r&1&&U(s,i[0])},i:N,o:N,d(i){i&&w(e)}}}function hl(n,e,t){let l=rt(),{start:s=!1}=e,i="",r=!1;return n.$$set=f=>{"start"in f&&t(1,s=f.start)},n.$$.update=()=>{n.$$.dirty&7&&s&&!r&&(t(2,r=!0),setTimeout(()=>{t(0,i=t(0,i=Math.floor(Math.random()*100-50))),l("value",{value:i})},500))},[i,s,r]}class gl extends W{constructor(e){super(),O(this,e,hl,_l,P,{start:1})}}function Rt(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function Ht(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function pl(n){let e,t,l=Z({length:n[0]}),s=[];for(let r=0;r<l.length;r+=1)s[r]=Ut(Rt(n,l,r));const i=r=>C(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Fe()},m(r,f){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,f);y(r,e,f),t=!0},p(r,f){if(f&137){l=Z({length:r[0]});let c;for(c=0;c<l.length;c+=1){const a=Rt(r,l,c);s[c]?(s[c].p(a,f),k(s[c],1)):(s[c]=Ut(a),s[c].c(),k(s[c],1),s[c].m(e.parentNode,e))}for(ye(),c=l.length;c<s.length;c+=1)i(c);ke()}},i(r){if(!t){for(let f=0;f<l.length;f+=1)k(s[f]);t=!0}},o(r){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)C(s[f]);t=!1},d(r){r&&w(e),Se(s,r)}}}function ml(n){let e,t,l=Z({length:n[0]}),s=[];for(let r=0;r<l.length;r+=1)s[r]=Ft(Ht(n,l,r));const i=r=>C(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Fe()},m(r,f){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,f);y(r,e,f),t=!0},p(r,f){if(f&143){l=Z({length:r[0]});let c;for(c=0;c<l.length;c+=1){const a=Ht(r,l,c);s[c]?(s[c].p(a,f),k(s[c],1)):(s[c]=Ft(a),s[c].c(),k(s[c],1),s[c].m(e.parentNode,e))}for(ye(),c=l.length;c<s.length;c+=1)i(c);ke()}},i(r){if(!t){for(let f=0;f<l.length;f+=1)k(s[f]);t=!0}},o(r){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)C(s[f]);t=!1},d(r){r&&w(e),Se(s,r)}}}function Ut(n){let e,t;function l(...s){return n[10](n[14],...s)}return e=new gl({props:{start:n[14]<=n[3]}}),e.$on("value",l),{c(){S(e.$$.fragment)},m(s,i){B(e,s,i),t=!0},p(s,i){n=s;const r={};i&8&&(r.start=n[14]<=n[3]),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Ft(n){let e,t;function l(...s){return n[9](n[14],...s)}return e=new rn({props:{depth:n[1]-1,mode:n[2]*-1,start:n[14]<=n[3]}}),e.$on("value",l),{c(){S(e.$$.fragment)},m(s,i){B(e,s,i),t=!0},p(s,i){n=s;const r={};i&2&&(r.depth=n[1]-1),i&4&&(r.mode=n[2]*-1),i&8&&(r.start=n[14]<=n[3]),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function vl(n){let e,t,l,s,i,r,f,c,a,u,d;r=new dl({props:{lines:n[0],check:n[5],select:n[4],mode:n[2]}});const p=[ml,pl],h=[];function $(b,M){return b[1]!==0?0:1}return a=$(n),u=h[a]=p[a](n),{c(){e=m("div"),t=m("div"),l=m("span"),s=z(n[6]),i=v(),S(r.$$.fragment),f=v(),c=m("div"),u.c(),_(l,"class","svelte-35ympf"),_(t,"class","value svelte-35ympf"),_(c,"class","wraps svelte-35ympf"),_(e,"class","wrap svelte-35ympf"),te(e,"view",n[1]===0&&n[3]>=0&&n[3]!==n[0])},m(b,M){y(b,e,M),o(e,t),o(t,l),o(l,s),o(e,i),B(r,e,null),o(e,f),o(e,c),h[a].m(c,null),d=!0},p(b,[M]){(!d||M&64)&&U(s,b[6]);const L={};M&1&&(L.lines=b[0]),M&32&&(L.check=b[5]),M&16&&(L.select=b[4]),M&4&&(L.mode=b[2]),r.$set(L);let j=a;a=$(b),a===j?h[a].p(b,M):(ye(),C(h[j],1,1,()=>{h[j]=null}),ke(),u=h[a],u?u.p(b,M):(u=h[a]=p[a](b),u.c()),k(u,1),u.m(c,null)),(!d||M&11)&&te(e,"view",b[1]===0&&b[3]>=0&&b[3]!==b[0])},i(b){d||(k(r.$$.fragment,b),k(u),d=!0)},o(b){C(r.$$.fragment,b),C(u),d=!1},d(b){b&&w(e),x(r),h[a].d()}}}function bl(n,e,t){let{n:l=Math.floor(Math.random()*3)+1}=e,{depth:s=0}=e,{mode:i=1}=e,{start:r=!1}=e,f=rt(),c=-1,a=null,u=null,d="";function p(b,M){(d===""||b*i>d*i)&&(t(4,a=M),t(6,d=b)),t(3,c++,c),c<l?t(5,u=c):(t(5,u=null),f("value",{value:d}))}const h=(b,M)=>p(M.detail.value,b),$=(b,M)=>p(M.detail.value,b);return n.$$set=b=>{"n"in b&&t(0,l=b.n),"depth"in b&&t(1,s=b.depth),"mode"in b&&t(2,i=b.mode),"start"in b&&t(8,r=b.start)},n.$$.update=()=>{n.$$.dirty&256&&r&&setTimeout(()=>{t(3,c=0),t(5,u=0)},500)},[l,s,i,c,a,u,d,p,r,h,$]}class rn extends W{constructor(e){super(),O(this,e,bl,vl,P,{n:0,depth:1,mode:2,start:8})}}function Dt(n){let e,t;return e=new rn({props:{depth:2,start:!0,n:Math.floor(Math.random()*2)+2}}),e.$on("value",n[1]),{c(){S(e.$$.fragment)},m(l,s){B(e,l,s),t=!0},p:N,i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function wl(n){let e,t,l=n[0],s,i=Dt(n);return{c(){e=m("div"),t=m("div"),i.c(),_(t,"class","inner svelte-1q53nds"),_(e,"class","wrap svelte-1q53nds")},m(r,f){y(r,e,f),o(e,t),i.m(t,null),s=!0},p(r,[f]){f&1&&P(l,l=r[0])?(ye(),C(i,1,1,N),ke(),i=Dt(r),i.c(),k(i,1),i.m(t,null)):i.p(r,f)},i(r){s||(k(i),s=!0)},o(r){C(i),s=!1},d(r){r&&w(e),i.d(r)}}}function yl(n,e,t){let l=0;function s(){setTimeout(()=>{t(0,l++,l)},5e3)}return[l,s]}class kl extends W{constructor(e){super(),O(this,e,yl,wl,P,{})}}function Gt(n,e,t){const l=n.slice();return l[5]=e[t],l[7]=t,l}function Jt(n,e,t){const l=n.slice();return l[5]=e[t],l[9]=t,l}function Vt(n){let e,t;return{c(){e=m("div"),_(e,"class",t="cell cell_"+n[0][n[7]*n[1]+n[9]]+" svelte-1s0u75h")},m(l,s){y(l,e,s)},p(l,s){s&3&&t!==(t="cell cell_"+l[0][l[7]*l[1]+l[9]]+" svelte-1s0u75h")&&_(e,"class",t)},d(l){l&&w(e)}}}function Kt(n){let e,t,l=Z({length:n[1]}),s=[];for(let i=0;i<l.length;i+=1)s[i]=Vt(Jt(n,l,i));return{c(){e=m("div");for(let i=0;i<s.length;i+=1)s[i].c();t=v(),_(e,"class","row svelte-1s0u75h")},m(i,r){y(i,e,r);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);o(e,t)},p(i,r){if(r&3){l=Z({length:i[1]});let f;for(f=0;f<l.length;f+=1){const c=Jt(i,l,f);s[f]?s[f].p(c,r):(s[f]=Vt(c),s[f].c(),s[f].m(e,t))}for(;f<s.length;f+=1)s[f].d(1);s.length=l.length}},d(i){i&&w(e),Se(s,i)}}}function $l(n){let e,t=Z({length:n[2]}),l=[];for(let s=0;s<t.length;s+=1)l[s]=Kt(Gt(n,t,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();_(e,"class","icon svelte-1s0u75h"),re(e,"--ws",n[4]),re(e,"--hs",n[3])},m(s,i){y(s,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,[i]){if(i&7){t=Z({length:s[2]});let r;for(r=0;r<t.length;r+=1){const f=Gt(s,t,r);l[r]?l[r].p(f,i):(l[r]=Kt(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}i&16&&re(e,"--ws",s[4]),i&8&&re(e,"--hs",s[3])},i:N,o:N,d(s){s&&w(e),Se(l,s)}}}function Cl(n,e,t){let l,s,{data:i}=e,{w:r=8}=e,{h:f=8}=e;return n.$$set=c=>{"data"in c&&t(0,i=c.data),"w"in c&&t(1,r=c.w),"h"in c&&t(2,f=c.h)},n.$$.update=()=>{n.$$.dirty&2&&t(4,l=r/8),n.$$.dirty&4&&t(3,s=f/8)},[i,r,f,s,l]}class Re extends W{constructor(e){super(),O(this,e,Cl,$l,P,{data:0,w:1,h:2})}}function Il(n){let e,t,l;return{c(){e=be("svg"),t=be("path"),_(t,"d",l=n[1][n[0]]),_(t,"class","svelte-nuwpfa"),_(e,"viewBox","0 -960 960 960"),_(e,"class","svelte-nuwpfa")},m(s,i){y(s,e,i),o(e,t)},p(s,[i]){i&1&&l!==(l=s[1][s[0]])&&_(t,"d",l)},i:N,o:N,d(s){s&&w(e)}}}function Al(n,e,t){let l={then:"m560-242-43-42 168-168H160v-60h525L516-681l43-42 241 241-240 240Z"},{name:s}=e;return n.$$set=i=>{"name"in i&&t(0,s=i.name)},[s,l]}class Ke extends W{constructor(e){super(),O(this,e,Al,Il,P,{name:0})}}function zl(n){let e,t,l,s,i,r,f,c=n[1][n[0]].pos+"",a,u;return t=new Re({props:{data:n[1][n[0]].data}}),i=new Ke({props:{name:"then"}}),{c(){e=m("div"),S(t.$$.fragment),l=v(),s=m("div"),S(i.$$.fragment),r=v(),f=m("div"),a=z(c),_(s,"class","then svelte-1empsdn"),_(f,"class","num svelte-1empsdn"),_(e,"class","book svelte-1empsdn")},m(d,p){y(d,e,p),B(t,e,null),o(e,l),o(e,s),B(i,s,null),o(e,r),o(e,f),o(f,a),u=!0},p(d,[p]){const h={};p&1&&(h.data=d[1][d[0]].data),t.$set(h),(!u||p&1)&&c!==(c=d[1][d[0]].pos+"")&&U(a,c)},i(d){u||(k(t.$$.fragment,d),k(i.$$.fragment,d),u=!0)},o(d){C(t.$$.fragment,d),C(i.$$.fragment,d),u=!1},d(d){d&&w(e),x(t),x(i)}}}function Ml(n,e,t){class l{constructor(f,c,a){this.data=[];for(let u=0;u<64;u++){let d=1n<<BigInt(u);f&d?this.data.push(1):c&d?this.data.push(2):this.data.push(0)}this.pos=a}}const s=[new l(0x00081820000000n,0x0010001e180000n,"f6"),new l(0x10302020200400n,0x04081c1c181800n,"d1"),new l(0x00381200000000n,0x00040c1c000000n,"b6"),new l(0x00221400000800n,0x0808083c3c3000n,"c2"),new l(0x0000002c0c0800n,0x00083e10000000n,"b6"),new l(0x00003008080000n,0x003c0c14240000n,"e3"),new l(0x00003800000000n,0x0000001e100000n,"d3"),new l(0x0028000c102000n,0x00043c10000000n,"f4"),new l(0x000018180c0000n,0x00382024000000n,"c5"),new l(0x003c7c38002000n,0x00010246fe1800n,"e1"),new l(0x0000060e0c2c20n,0x143c3830301010n,"d1"),new l(0x00000018180000n,0x00203c24040000n,"d6"),new l(0x00000810100000n,0x00203028000000n,"d3"),new l(0x00102074000400n,0x000e1c08380800n,"b5"),new l(0x000018181c0000n,0x00040406000000n,"b3"),new l(0x18002010000000n,0x20f85808000000n,"f8"),new l(0x04083c04040000n,0x00000038380000n,"g3"),new l(0x0008043a080000n,0x00003804060000n,"e6"),new l(0x081828000a0000n,0x0004143e302000n,"e2"),new l(0x0000682e0a0000n,0x003c1450341000n,"b6"),new l(0x002c0e0c040000n,0x10103030182800n,"g4"),new l(0x00080008000000n,0x00101c10000000n,"f4"),new l(0x0000181c040000n,0x00382020080000n,"e3"),new l(0x00040000040010n,0x00383838180804n,"f3"),new l(0x0000040c040000n,0x00181810000000n,"f6"),new l(0x00080020080000n,0x0010381c040000n,"b3"),new l(0x00201038102000n,0x000e0c060f0000n,"a4"),new l(0x00181818080000n,0x20202400100000n,"g6"),new l(0x101c1000700000n,0x20002e7c080000n,"f6"),new l(0x1010181c181000n,0x00002020200000n,"g4"),new l(0x00081c001c0000n,0x0004003e000000n,"b5"),new l(0x000010001c0000n,0x0000081c200000n,"d6")];let i=0;return it(()=>{let r=setInterval(()=>{let f=Math.floor(Math.random()*s.length);for(;f==i;)f=Math.floor(Math.random()*s.length);t(0,i=f)},600);return()=>clearInterval(r)}),[i,s]}class Bl extends W{constructor(e){super(),O(this,e,Ml,zl,P,{})}}function xl(n){let e,t,l,s,i,r,f,c,a,u,d,p,h,$,b,M=n[0].rands[0]+"",L,j,g,A,J,R,F,E,D,_e,ne=n[0].rands[1]+"",ce,fe,V,q,Q,X,Y,le,he,ae,$e=n[0].rands[2]+"",ge,Le,G,De,oe=n[0].rands[0]+"",qe,Ce,Ie=n[0].rands[1]+"",pe,Ge,se=n[0].rands[2]+"",Ne,Ae,ze=n[0].rands[0]+n[0].rands[1]+n[0].rands[2]+"",me,K;return t=new Re({props:{data:n[0].data}}),i=new Ke({props:{name:"then"}}),a=new Re({props:{data:n[0].cross()}}),p=new Ke({props:{name:"then"}}),A=new Re({props:{data:n[0].corner(),w:4,h:4}}),F=new Ke({props:{name:"then"}}),q=new Re({props:{data:n[0].edge(),w:1}}),Y=new Ke({props:{name:"then"}}),{c(){e=m("div"),S(t.$$.fragment),l=v(),s=m("div"),S(i.$$.fragment),r=v(),f=m("div"),c=m("div"),S(a.$$.fragment),u=v(),d=m("div"),S(p.$$.fragment),h=v(),$=m("div"),b=z("A:"),L=z(M),j=v(),g=m("div"),S(A.$$.fragment),J=v(),R=m("div"),S(F.$$.fragment),E=v(),D=m("div"),_e=z("B:"),ce=z(ne),fe=v(),V=m("div"),S(q.$$.fragment),Q=v(),X=m("div"),S(Y.$$.fragment),le=v(),he=m("div"),ae=z("C:"),ge=z($e),Le=v(),G=m("div"),De=z("A("),qe=z(oe),Ce=z(") + B("),pe=z(Ie),Ge=z(") + C("),Ne=z(se),Ae=z(") = SCORE:"),me=z(ze),_(e,"class","src svelte-6mnjq4"),_(s,"class","flow flow_m svelte-6mnjq4"),_(d,"class","flow svelte-6mnjq4"),_($,"class","rand svelte-6mnjq4"),_(c,"class","svelte-6mnjq4"),_(R,"class","flow svelte-6mnjq4"),_(D,"class","rand svelte-6mnjq4"),_(g,"class","svelte-6mnjq4"),_(X,"class","flow svelte-6mnjq4"),_(he,"class","rand svelte-6mnjq4"),_(V,"class","svelte-6mnjq4"),_(f,"class","parts svelte-6mnjq4"),_(G,"class","res svelte-6mnjq4")},m(I,H){y(I,e,H),B(t,e,null),y(I,l,H),y(I,s,H),B(i,s,null),y(I,r,H),y(I,f,H),o(f,c),B(a,c,null),o(c,u),o(c,d),B(p,d,null),o(c,h),o(c,$),o($,b),o($,L),o(f,j),o(f,g),B(A,g,null),o(g,J),o(g,R),B(F,R,null),o(g,E),o(g,D),o(D,_e),o(D,ce),o(f,fe),o(f,V),B(q,V,null),o(V,Q),o(V,X),B(Y,X,null),o(V,le),o(V,he),o(he,ae),o(he,ge),y(I,Le,H),y(I,G,H),o(G,De),o(G,qe),o(G,Ce),o(G,pe),o(G,Ge),o(G,Ne),o(G,Ae),o(G,me),K=!0},p(I,[H]){const Me={};H&1&&(Me.data=I[0].data),t.$set(Me);const Je={};H&1&&(Je.data=I[0].cross()),a.$set(Je),(!K||H&1)&&M!==(M=I[0].rands[0]+"")&&U(L,M);const Be={};H&1&&(Be.data=I[0].corner()),A.$set(Be),(!K||H&1)&&ne!==(ne=I[0].rands[1]+"")&&U(ce,ne);const Ve={};H&1&&(Ve.data=I[0].edge()),q.$set(Ve),(!K||H&1)&&$e!==($e=I[0].rands[2]+"")&&U(ge,$e),(!K||H&1)&&oe!==(oe=I[0].rands[0]+"")&&U(qe,oe),(!K||H&1)&&Ie!==(Ie=I[0].rands[1]+"")&&U(pe,Ie),(!K||H&1)&&se!==(se=I[0].rands[2]+"")&&U(Ne,se),(!K||H&1)&&ze!==(ze=I[0].rands[0]+I[0].rands[1]+I[0].rands[2]+"")&&U(me,ze)},i(I){K||(k(t.$$.fragment,I),k(i.$$.fragment,I),k(a.$$.fragment,I),k(p.$$.fragment,I),k(A.$$.fragment,I),k(F.$$.fragment,I),k(q.$$.fragment,I),k(Y.$$.fragment,I),K=!0)},o(I){C(t.$$.fragment,I),C(i.$$.fragment,I),C(a.$$.fragment,I),C(p.$$.fragment,I),C(A.$$.fragment,I),C(F.$$.fragment,I),C(q.$$.fragment,I),C(Y.$$.fragment,I),K=!1},d(I){I&&(w(e),w(l),w(s),w(r),w(f),w(Le),w(G)),x(t),x(i),x(a),x(p),x(A),x(F),x(q),x(Y)}}}function Zt(){let n=[];for(let e=0;e<64;e++)n.push(Math.floor(Math.random()*3));return n}function jl(n,e,t){const l=[0,1,2,3,8,9,10,16,17,24],s=[0,1,2,3,4,5,6,8,9,12],i=[0,9,18,27,36,45,54,63];class r{constructor(a){this.data=a,this.rands=[];for(let u=0;u<3;u++)this.rands.push(Math.floor(Math.random()*64-32))}edge(){return this.data.slice(0,8)}corner(){let a=Array(16).fill(3);for(let u=0;u<l.length;u++)a[s[u]]=this.data[l[u]];return a}cross(){let a=Array(64).fill(3);for(let u=0;u<i.length;u++)a[i[u]]=this.data[i[u]];return a}}let f=new r(Zt());return it(()=>{let c=setInterval(()=>{t(0,f=new r(Zt()))},1e3);return()=>clearInterval(c)}),[f]}class El extends W{constructor(e){super(),O(this,e,jl,xl,P,{})}}function Sl(n){let e,t,l,s,i,r,f,c,a,u=n[0].toString(16)+"",d,p;return t=new Re({props:{data:n[1]}}),{c(){e=m("div"),S(t.$$.fragment),l=v(),s=m("div"),i=z("10進数表記"),r=z(n[0]),f=v(),c=m("div"),a=z("16進数表記:"),d=z(u),_(s,"class","svelte-t6xt2z"),_(c,"class","svelte-t6xt2z"),_(e,"class","icon svelte-t6xt2z")},m(h,$){y(h,e,$),B(t,e,null),o(e,l),o(e,s),o(s,i),o(s,r),o(e,f),o(e,c),o(c,a),o(c,d),p=!0},p(h,[$]){const b={};$&2&&(b.data=h[1]),t.$set(b),(!p||$&1)&&U(r,h[0]),(!p||$&1)&&u!==(u=h[0].toString(16)+"")&&U(d,u)},i(h){p||(k(t.$$.fragment,h),p=!0)},o(h){C(t.$$.fragment,h),p=!1},d(h){h&&w(e),x(t)}}}function Ll(n,e){let t=[];for(let l=0;l<64;l++)n&1n<<BigInt(l)?t.push(e):t.push(0);return t}function ql(n,e,t){let l,{n:s=0n}=e,{color:i=1}=e;return n.$$set=r=>{"n"in r&&t(0,s=r.n),"color"in r&&t(2,i=r.color)},n.$$.update=()=>{n.$$.dirty&5&&t(1,l=Ll(s,i))},[s,l,i]}class Nl extends W{constructor(e){super(),O(this,e,ql,Sl,P,{n:0,color:2})}}function Tl(n){let e,t;return e=new Nl({props:{n:n[0].black,color:1}}),{c(){S(e.$$.fragment)},m(l,s){B(e,l,s),t=!0},p(l,[s]){const i={};s&1&&(i.n=l[0].black),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Pl(n,e,t){class l{constructor(){this.black=0n,this.white=0n;for(let r=0;r<64;r++)Math.random()<1/3?this.black|=1n<<BigInt(r):Math.random()<.5&&(this.white|=1n<<BigInt(r))}}let s=new l;return it(()=>{let i=setInterval(()=>{t(0,s.black=0x7f7f7f7f7f7f7fn&s.black>>9n,s),s.black===0n&&t(0,s=new l)},1e3);return()=>clearInterval(i)}),[s]}class Ol extends W{constructor(e){super(),O(this,e,Pl,Tl,P,{})}}function Wl(n){let e;return{c(){e=z("このサイトについて")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Rl(n){let e;return{c(){e=z("サイトの仕組み")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Hl(n){let e,t,l,s,i,r,f;return{c(){e=m("p"),e.textContent="Svelteとは独自の記法で書いたSvelteファイルをCSS、JavaScriptにコンパイルするツールです。",t=v(),l=m("p"),l.textContent="WebフレームワークとしてはReact、Vue、Angularなどが有名ですが、Svelteはこれらのツールと比較して少ないコード量、小さなコンパイルサイズ、高速な動作が特徴です。",s=v(),i=m("p"),i.textContent="今回のプロジェクトでは短い期間で開発するためにSvelteを使用しました。",r=v(),f=m("p"),f.innerHTML='公式チュートリアルはこちら<a href="https://svelte.jp/tutorial/basics">こちら</a>',_(e,"class","svelte-ihapih"),_(l,"class","svelte-ihapih"),_(i,"class","svelte-ihapih"),_(f,"class","svelte-ihapih")},m(c,a){y(c,e,a),y(c,t,a),y(c,l,a),y(c,s,a),y(c,i,a),y(c,r,a),y(c,f,a)},d(c){c&&(w(e),w(t),w(l),w(s),w(i),w(r),w(f))}}}function Ul(n){let e,t,l;return{c(){e=m("p"),e.textContent=`WebAssemblyとは従来ブラウザ上ではJavaScriptのみ実行できたのに対し、Rust、C、GOなどの言語を用いて書かれたコードを\r
                コンパイルし生成されたバイナリをブラウザ上で実行できるようにする技術です。`,t=v(),l=m("p"),l.textContent="JavaScriptと比較して高速に動作し、今回のように大量の盤面を探索する際には非常に有効です。",_(e,"class","svelte-ihapih"),_(l,"class","svelte-ihapih")},m(s,i){y(s,e,i),y(s,t,i),y(s,l,i)},d(s){s&&(w(e),w(t),w(l))}}}function Fl(n){let e,t,l,s,i,r,f;return{c(){e=m("p"),e.textContent="今回のプロジェクトでは主にRustというプログラミング言語を使い開発しました。",t=v(),l=m("p"),l.textContent="Rustは数あるプログラミング言語の中でも最も高いパフォーマンスを発揮するこのできる言語の一つであり、今回のようにブラウザ上で実行することができるなど、ほぼすべてのプラットフォームに向けてコンパイルすることもできます。",s=v(),i=m("p"),i.textContent="オセロAIでは大量の計算が必要となるためRustで開発を行いました。",r=v(),f=m("p"),f.innerHTML='公式チュートリアルはこちら<a href="https://doc.rust-jp.rs/book-ja/">こちら</a>',_(e,"class","svelte-ihapih"),_(l,"class","svelte-ihapih"),_(i,"class","svelte-ihapih"),_(f,"class","svelte-ihapih")},m(c,a){y(c,e,a),y(c,t,a),y(c,l,a),y(c,s,a),y(c,i,a),y(c,r,a),y(c,f,a)},d(c){c&&(w(e),w(t),w(l),w(s),w(i),w(r),w(f))}}}function Dl(n){let e;return{c(){e=z("AIの仕組み")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Gl(n){let e,t,l,s,i,r,f,c,a,u,d,p,h,$,b,M,L,j,g,A,J,R,F,E,D,_e,ne,ce,fe,V,q,Q,X,Y,le,he,ae,$e,ge,Le,G,De,oe,qe,Ce,Ie,pe,Ge,se,Ne,Ae,ze,me,K,I,H,Me,Je,Be,Ve,Te,gt,Xe,pt,Ye,et;t=new ft({props:{$$slots:{default:[Wl]},$$scope:{ctx:n}}}),r=new ft({props:{$$slots:{default:[Rl]},$$scope:{ctx:n}}});function cn(T){n[1](T)}let mt={values:["Rust","WebAssembly","Svelte"]};n[0]!==void 0&&(mt.select=n[0]),h=new al({props:mt}),de.push(()=>Ee(h,"select",cn));function vt(T,ie){if(T[0]===0)return Fl;if(T[0]===1)return Ul;if(T[0]===2)return Hl}let Pe=vt(n),ee=Pe&&Pe(n);return L=new ft({props:{$$slots:{default:[Dl]},$$scope:{ctx:n}}}),D=new Bl({}),ae=new kl({}),se=new El({}),Te=new Ol({}),{c(){e=m("div"),S(t.$$.fragment),l=v(),s=m("div"),s.innerHTML='<p class="svelte-ihapih">このサイトは上智大学のプログラミングサークル(UnbiasedProgramming)内のイベントProjectSoma2023で作成したオセロAIをブラウザ上で動かせるように移植したものです。</p> <p class="svelte-ihapih">サイトのソースコードは<a href="https://github.com/h-sumiya/OthelloAI-WEB">こちら</a>にあります。</p> <p class="svelte-ihapih">移植前のオセロAIは<a href="https://www.codingame.com/multiplayer/bot-programming/othello-1">オセロAIの大会</a>に提出し最高で16位(学生4位)の成績を残しています。</p>',i=v(),S(r.$$.fragment),f=v(),c=m("div"),a=m("p"),a.textContent="オセロAIのコードはRustを使って書かれており、WebAssemblyに変換して静的なページとして公開しています。",u=v(),d=m("p"),d.textContent="UI部分はSvelteを使用し作成しました。",p=v(),S(h.$$.fragment),b=v(),ee&&ee.c(),M=v(),S(L.$$.fragment),j=v(),g=m("div"),A=m("p"),A.textContent="このオセロAIは主に4つの要素、定跡データ、αβ法、評価関数、Bitboardによって構成されています。",J=v(),R=m("p"),R.textContent="AIははじめに定跡データの確認を行い登録されている手が見つかった場合に登録されていた手を打ちます。",F=v(),E=m("div"),S(D.$$.fragment),_e=v(),ne=m("div"),ne.textContent="図のように盤面の状態をハッシュテーブルのキーとしてその後打つべき手を値に格納している",ce=v(),fe=m("p"),fe.textContent="AIは後述するαβ法によって最善手を探索しますが、8手ほど先までのみの探索となるので序盤においては終盤を見据えた手を打つことができません。",V=v(),q=m("p"),q.textContent="そこで序盤において取ることのできるパターンが少ないことを利用して事前に打つ手を決めて置くと言うことです。",Q=v(),X=m("p"),X.textContent="登録されている定跡が見つからなかった場合にAIはαβ法による探索を開始します。αβ法とはより簡単なアルゴリズムであるミニマックス法と同じ結果を高速に出すことができるアルゴリズムです。",Y=v(),le=m("p"),le.textContent="ミニマックス法とは自分は常に最善手を打ち、相手は常に自分にとって最悪の手を打つという仮定のもとに探索を行い、その中で最も良い結果となる手を探索するアルゴリズムです。",he=v(),S(ae.$$.fragment),$e=v(),ge=m("div"),ge.textContent="赤線(自分のターン)は最大値、青線(相手のターン)は最小値を探している。",Le=v(),G=m("p"),G.textContent=`では評価関数とは何を行うものでしょうか?\r
            前述のミニマックス法やαβ法では最悪の手、最善の手をそれぞれ打つと説明しましたが何を持って最善の手、最悪の手とするのでしょうか?`,De=v(),oe=m("p"),oe.textContent="この問題の答えが評価関数です。評価関数ではある盤面の状態に対して点数をつけます。その点数を評価値と呼び探索においてはこの点数をもとに最善の手を決定します。",qe=v(),Ce=m("p"),Ce.textContent="しかしオセロの盤面に決まった点数、良し悪しはありません。そこでこの評価関数をどのように作成するかが様々なオセロAIの差となります。",Ie=v(),pe=m("p"),pe.textContent="今回作成したAIでは1ターン目から60ターン目の最終点差をPyTorchを用いて学習させたニューラルネットワークによって評価値を算出しています。",Ge=v(),S(se.$$.fragment),Ne=v(),Ae=m("div"),Ae.textContent="実際には10個のマスなら3^10通りのパターンしかないため盤面を細かく分割して学習させ、それぞれのパターンの点数を事前に計算しておくことで高速化を図っていいる。",ze=v(),me=m("p"),me.textContent="最後にBitboardについて軽く説明します。Bitboardとは盤面の状態を2つの64bitの整数で表現したものです。",K=v(),I=m("p"),I.textContent="コンピューターでは数字を01000111...のように0と1のみを使って管理していてbitとは一つの0か1のことを指します。",H=v(),Me=m("p"),Me.textContent="64bitの整数は64個のbitを持っているので64マスの盤面を表現することができ、黒のデータ、白のデータの2つを用意することで盤面の状態を表現することができます。",Je=v(),Be=m("p"),Be.textContent=`このような方法を用いる理由は一度にすべての着手可能なマスを求めたり、着手後の盤面を求める処理を非常に高速に行うことが可能になるためです。\r
            (複雑な操作になるためここでは説明を省略)\r
            更に2つの数字で1ターン分のデータを表すことができるためメモリの使用量も少なく済みます。`,Ve=v(),S(Te.$$.fragment),gt=v(),Xe=m("div"),Xe.textContent="操作の例:0x7f7f7f7f7f7f7f(盤面の上、左のみビットが立っていない64bit整数)と黒盤の9bit右にシフトしたものの論理積をとり左上に盤面を移動させている。",pt=v(),Ye=m("p"),Ye.textContent="以上が簡易的なこのオセロAIの仕組みになります。詳しい説明はソースコードを参照してください。",_(s,"class","inner svelte-ihapih"),_(a,"class","svelte-ihapih"),_(d,"class","svelte-ihapih"),_(c,"class","inner svelte-ihapih"),_(A,"class","svelte-ihapih"),_(R,"class","svelte-ihapih"),_(ne,"class","info svelte-ihapih"),_(fe,"class","svelte-ihapih"),_(q,"class","svelte-ihapih"),_(X,"class","svelte-ihapih"),_(le,"class","svelte-ihapih"),_(ge,"class","info svelte-ihapih"),_(G,"class","svelte-ihapih"),_(oe,"class","svelte-ihapih"),_(Ce,"class","svelte-ihapih"),_(pe,"class","svelte-ihapih"),_(Ae,"class","info svelte-ihapih"),_(me,"class","svelte-ihapih"),_(I,"class","svelte-ihapih"),_(Me,"class","svelte-ihapih"),_(Be,"class","svelte-ihapih"),_(Xe,"class","info svelte-ihapih"),_(Ye,"class","svelte-ihapih"),_(g,"class","inner svelte-ihapih"),_(e,"class","body svelte-ihapih")},m(T,ie){y(T,e,ie),B(t,e,null),o(e,l),o(e,s),o(e,i),B(r,e,null),o(e,f),o(e,c),o(c,a),o(c,u),o(c,d),o(c,p),B(h,c,null),o(c,b),ee&&ee.m(c,null),o(e,M),B(L,e,null),o(e,j),o(e,g),o(g,A),o(g,J),o(g,R),o(g,F),o(g,E),B(D,E,null),o(E,_e),o(E,ne),o(g,ce),o(g,fe),o(g,V),o(g,q),o(g,Q),o(g,X),o(g,Y),o(g,le),o(g,he),B(ae,g,null),o(g,$e),o(g,ge),o(g,Le),o(g,G),o(g,De),o(g,oe),o(g,qe),o(g,Ce),o(g,Ie),o(g,pe),o(g,Ge),B(se,g,null),o(g,Ne),o(g,Ae),o(g,ze),o(g,me),o(g,K),o(g,I),o(g,H),o(g,Me),o(g,Je),o(g,Be),o(g,Ve),B(Te,g,null),o(g,gt),o(g,Xe),o(g,pt),o(g,Ye),et=!0},p(T,[ie]){const bt={};ie&4&&(bt.$$scope={dirty:ie,ctx:T}),t.$set(bt);const wt={};ie&4&&(wt.$$scope={dirty:ie,ctx:T}),r.$set(wt);const yt={};!$&&ie&1&&($=!0,yt.select=T[0],je(()=>$=!1)),h.$set(yt),Pe!==(Pe=vt(T))&&(ee&&ee.d(1),ee=Pe&&Pe(T),ee&&(ee.c(),ee.m(c,null)));const kt={};ie&4&&(kt.$$scope={dirty:ie,ctx:T}),L.$set(kt)},i(T){et||(k(t.$$.fragment,T),k(r.$$.fragment,T),k(h.$$.fragment,T),k(L.$$.fragment,T),k(D.$$.fragment,T),k(ae.$$.fragment,T),k(se.$$.fragment,T),k(Te.$$.fragment,T),et=!0)},o(T){C(t.$$.fragment,T),C(r.$$.fragment,T),C(h.$$.fragment,T),C(L.$$.fragment,T),C(D.$$.fragment,T),C(ae.$$.fragment,T),C(se.$$.fragment,T),C(Te.$$.fragment,T),et=!1},d(T){T&&w(e),x(t),x(r),x(h),ee&&ee.d(),x(L),x(D),x(ae),x(se),x(Te)}}}function Jl(n,e,t){let l=null;function s(i){l=i,t(0,l)}return[l,s]}class Vl extends W{constructor(e){super(),O(this,e,Jl,Gl,P,{})}}function Kl(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="inner svelte-1m9y9cm"><div><a href="https://github.com/h-sumiya" class="svelte-1m9y9cm">GitHub</a></div> <div><a href="https://www.unbiasedlearning.org" class="svelte-1m9y9cm">Unbiased Learning</a></div></div>',_(e,"class","footer svelte-1m9y9cm")},m(t,l){y(t,e,l)},p:N,i:N,o:N,d(t){t&&w(e)}}}class Zl extends W{constructor(e){super(),O(this,e,null,Kl,P,{})}}function Ql(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="inner svelte-1hpvxsb"><a href="https://www.unbiasedlearning.org/" class="title svelte-1hpvxsb">Unbiased Programming</a></div>',_(e,"class","head svelte-1hpvxsb")},m(t,l){y(t,e,l)},p:N,i:N,o:N,d(t){t&&w(e)}}}class Xl extends W{constructor(e){super(),O(this,e,null,Ql,P,{})}}function Yl(n){let e,t,l,s,i,r,f,c;return{c(){e=m("div"),t=m("div"),l=z(`ブラウザに\r
            `),s=m("div"),i=z(n[0]),r=z(`\r
            をお使いの場合、一部の機能が正しく動作しない可能性があります。`),f=v(),c=m("div"),c.textContent=`画面が正しく表示されない場合はChrome, Firefox,\r
            Edgeなどの最新のブラウザをご利用ください。`,_(s,"class","name svelte-1dzzeah"),_(t,"class","svelte-1dzzeah"),_(c,"class","svelte-1dzzeah"),_(e,"class","warp svelte-1dzzeah")},m(a,u){y(a,e,u),o(e,t),o(t,l),o(t,s),o(s,i),o(t,r),o(e,f),o(e,c)},p(a,u){u&1&&U(i,a[0])},d(a){a&&w(e)}}}function es(n){let e,t=n[1]&&Yl(n);return{c(){t&&t.c(),e=Fe()},m(l,s){t&&t.m(l,s),y(l,e,s)},p(l,[s]){l[1]&&t.p(l,s)},i:N,o:N,d(l){l&&w(e),t&&t.d(l)}}}function ts(n,e,t){const l=window.navigator.userAgent.toLowerCase(),s=l.indexOf("chrome")>-1,i=l.indexOf("firefox")>-1,r=l.indexOf("safari")>-1&&!s&&!i,f=l.indexOf("msie")>-1||l.indexOf("trident")>-1&&!s&&!i,c=r||f;let a="";return r?a="Safari":f&&(a="Internet Explorer"),[a,c]}class ns extends W{constructor(e){super(),O(this,e,ts,es,P,{})}}function ls(n){return{c:N,m:N,i:N,o:N,d:N}}function ss(n){let e,t;return e=new sl({}),{c(){S(e.$$.fragment)},m(l,s){B(e,l,s),t=!0},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function is(n){let e,t;return e=new qn({props:{text:"AIを読み込んでいます"}}),{c(){S(e.$$.fragment)},m(l,s){B(e,l,s),t=!0},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function rs(n){let e,t,l,s,i,r,f,c,a;e=new Xl({}),l=new ns({});let u={ctx:n,current:null,token:null,hasCatch:!1,pending:is,then:ss,catch:ls,blocks:[,,,]};return In(Bn,u),r=new Vl({}),c=new Zl({}),{c(){S(e.$$.fragment),t=v(),S(l.$$.fragment),s=v(),u.block.c(),i=v(),S(r.$$.fragment),f=v(),S(c.$$.fragment)},m(d,p){B(e,d,p),y(d,t,p),B(l,d,p),y(d,s,p),u.block.m(d,u.anchor=p),u.mount=()=>i.parentNode,u.anchor=i,y(d,i,p),B(r,d,p),y(d,f,p),B(c,d,p),a=!0},p(d,[p]){n=d},i(d){a||(k(e.$$.fragment,d),k(l.$$.fragment,d),k(u.block),k(r.$$.fragment,d),k(c.$$.fragment,d),a=!0)},o(d){C(e.$$.fragment,d),C(l.$$.fragment,d);for(let p=0;p<3;p+=1){const h=u.blocks[p];C(h)}C(r.$$.fragment,d),C(c.$$.fragment,d),a=!1},d(d){d&&(w(t),w(s),w(i),w(f)),x(e,d),x(l,d),u.block.d(d),u.token=null,u=null,x(r,d),x(c,d)}}}class cs extends W{constructor(e){super(),O(this,e,null,rs,P,{})}}new cs({target:document.getElementById("app")});
